"use strict";(self.webpackChunkclear_horizon=self.webpackChunkclear_horizon||[]).push([[471],{9847:function(r,t,e){e.d(t,{WL:function(){return A}}),e(1539),e(8674),e(7941),e(2526),e(7327),e(5003),e(4747),e(9337),e(5666),e(1249),e(1817),e(2165),e(6992),e(8783),e(3948),e(7042),e(8309),e(1038);var n=e(1344),o=(e(4916),e(5306),{tms:"TILE"});function i(r){var t=("https:"===location.protocol?"https":"http")+"://",e=r.url.replace(/^(https?|ftp):\/\//,t);return r.y_origin_top||(e=e.replace("{y}","{-y}")),{url:e,name:r.name,attribution:r.copyright_text,maxZoom:r.z_max,minZoom:r.z_min}}function a(r){return new Promise((function(t,e){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState&&200===o.status&&o.responseText)try{t(JSON.parse(o.responseText))}catch(r){e(r)}},o.open("GET",(0,n.nH)(r),!0),o.send()}))}function u(r){var t=[];return[r=r.replace(/{switch:(.*?)}/,(function(r,e){return"string"==typeof e&&e.split(",").forEach((function(r){return t.push(r)})),"{s}"})),t]}function c(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var n,o,i=[],a=!0,u=!1;try{for(e=e.call(r);!(a=(n=e.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(r){u=!0,o=r}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}}(r,t)||function(r,t){if(r){if("string"==typeof r)return s(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(r):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(r,t):void 0}}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function f(r,t,e,n,o,i,a){try{var u=r[i](a),c=u.value}catch(r){return void e(r)}u.done?t(c):Promise.resolve(c).then(n,o)}function l(r){return function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(r){f(i,n,o,a,u,"next",r)}function u(r){f(i,n,o,a,u,"throw",r)}a(void 0)}))}}function p(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function h(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?p(Object(e),!0).forEach((function(t){b(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):p(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}function v(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function y(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function m(r,t,e){return t&&y(r.prototype,t),e&&y(r,e),r}function b(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}e(3123);var d="https://qms.nextgis.com";function g(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t||(t=d);var s=function(){function s(r,t){v(this,s),b(this,"qms",void 0),b(this,"options",void 0),b(this,"map",void 0),this.map=r;var n=h(h({},e),t);this.options=n,this.options.baselayer=!0,n.qms&&(this.qms=n.qms)}var f;return m(s,[{key:"addLayer",value:(f=l(regeneratorRuntime.mark((function e(f){var l,p,v,y,m,b,d,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.qms||!f.qmsId){e.next=10;break}return e.prev=1,e.next=4,a(t+"/api/v1/geoservices/"+f.qmsId);case 4:this.qms=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:if(!(l=this.qms)){e.next=22;break}if(p=o[l.type||"tms"],!(v=r.mapAdapter.layerAdapters[p])){e.next=22;break}if((0,n.FR)(s,v,["showLayer","hideLayer"]),"TILE"!==p){e.next=22;break}return f=h(h({order:0,maxZoom:r.options.maxZoom,minZoom:r.options.minZoom},this.options),i(l)),l.origin_url&&(y=u(l.origin_url),m=c(y,2),b=m[0],(d=m[1]).length&&(f.subdomains=d,f.url=b)),this.options=f,g=new v(this.map,f),e.abrupt("return",g.addLayer(f));case 22:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(r){return f.apply(this,arguments)})}]),s}();return s}function O(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),e.push.apply(e,n)}return e}function w(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?O(Object(e),!0).forEach((function(t){P(r,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):O(Object(e)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}))}return r}function j(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function P(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}var A=function(){function r(t){!function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),P(this,"options",{url:"https://qms.nextgis.com"}),P(this,"url",void 0),this.options=w(w({},this.options),t),this.url=this.options.url}var t,e;return t=r,(e=[{key:"getLayerAdapters",value:function(){var r=this;return Promise.resolve([{name:"QMS",createAdapter:function(t){return Promise.resolve(r._createAdapter(t))}}])}},{key:"_createAdapter",value:function(r){return g(r,this.url)}}])&&j(t.prototype,e),r}();P(A,"utils",{createQmsAdapter:g})},4034:function(r,t,e){e.d(t,{qL:function(){return o},Zm:function(){return u},Ql:function(){return a},cC:function(){return i}}),e(4747);var n=e(8133);function o(r,t,e,n){return!!s(r,t,e,p,n)}function i(r,t,e,n){return!!s(r,t,e,f,n)}function a(r,t,e,n){return s(r,t,e,f,n)}function u(r,t,e,n){return s(r,t,e,l,n)}function c(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"children",e=[],n="function"==typeof t?t:function(r){return r[t]},o=n(r);return o&&(Array.isArray(o)?e=o:e.push(o)),o?e:void 0}function s(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(r){return!!r},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a="function"==typeof t?t:function(r){return(0,n.Ml)(r,t)};return o(r,i?function(r){return a(i(r))}:a,e)}function f(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(r){return!!r},e=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=[];if(Array.isArray(r))o=r;else{var i=t(r);if(i)return r;var a=c(r,e);a&&(o=a)}for(var u=0;u<o.length;u++)if(o[u]){var s=f(o[u],t,e,n);if(s)return s}}function l(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(r){return!!r},e=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=[];if(Array.isArray(r))o=r;else{var i=t(r);i&&n.push(r);var a=c(r,e);a&&(o=a)}for(var u=0;u<o.length;u++)o[u]&&l(o[u],t,e,n);return n}function p(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(r){return!!r},e=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=[];if(Array.isArray(r))o=r;else{var i=t(r);if(!i)return!1;var a=c(r,e);a&&(o=a)}for(var u=0;u<o.length;u++)if(o[u]){var s=p(o[u],t,e,n);if(!s)return!1}return!0}}}]);
//# sourceMappingURL=main-68903dae7ec32d9.js.map