{"version":3,"file":"main-296f7ffc4a578ff.js","mappings":"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","sources":["webpack://clear_horizon/./@nextgis/packages/webmap/src/components/keys/KeysCodes.ts","webpack://clear_horizon/./@nextgis/packages/webmap/src/components/mapStates/StateItem.ts","webpack://clear_horizon/./@nextgis/packages/webmap/src/components/mapStates/CenterState.ts","webpack://clear_horizon/./@nextgis/packages/webmap/src/components/mapStates/ZoomState.ts","webpack://clear_horizon/./@nextgis/packages/webmap/src/WebMapMain.ts","webpack://clear_horizon/./@nextgis/packages/webmap/src/utils/clearObject.ts","webpack://clear_horizon/./@nextgis/packages/webmap/src/utils/geometryTypes.ts","webpack://clear_horizon/./@nextgis/packages/webmap/src/components/keys/Keys.ts","webpack://clear_horizon/./@nextgis/packages/webmap/src/utils/updateGeoJsonAdapterOptions.ts","webpack://clear_horizon/./@nextgis/packages/webmap/src/WebMapLayers.ts","webpack://clear_horizon/./@nextgis/packages/webmap/src/WebMapControls.ts","webpack://clear_horizon/./@nextgis/packages/webmap/src/components/controls/createToggleControl.ts","webpack://clear_horizon/./@nextgis/packages/webmap/src/container.ts","webpack://clear_horizon/./@nextgis/packages/webmap/src/WebMap.ts","webpack://clear_horizon/./@nextgis/packages/webmap/src/utils/getDefaultControls.ts","webpack://clear_horizon/./node_modules/moment/locale/ sync ^\\.\\/.*$"],"sourcesContent":["export class KeyCodes {\n  'backspace' = 8;\n  'tab' = 9;\n  'enter' = 13;\n  'shift' = 16;\n  'ctrl' = 17;\n  'alt' = 18;\n  'pause/break' = 19;\n  'caps_lock' = 20;\n  'escape' = 27;\n  'page_up' = 33;\n  'page_down' = 34;\n  'end' = 35;\n  'home' = 36;\n  'left_arrow' = 37;\n  'up_arrow' = 38;\n  'right_arrow' = 39;\n  'down_arrow' = 40;\n  'insert' = 45;\n  'delete' = 46;\n  'left_window_key' = 91;\n  'right_window_key' = 92;\n  'select_key' = 93;\n  'numpad_0' = 96;\n  'numpad_1' = 97;\n  'numpad_2' = 98;\n  'numpad_3' = 99;\n  'numpad_4' = 100;\n  'numpad_5' = 101;\n  'numpad_6' = 102;\n  'numpad_7' = 103;\n  'numpad_8' = 104;\n  'numpad_9' = 105;\n  'multiply' = 106;\n  'add' = 107;\n  'subtract' = 109;\n  'decimal_point' = 110;\n  'divide' = 111;\n  'f1' = 112;\n  'f2' = 113;\n  'f3' = 114;\n  'f4' = 115;\n  'f5' = 116;\n  'f6' = 117;\n  'f7' = 118;\n  'f8' = 119;\n  'f9' = 120;\n  'f10' = 121;\n  'f11' = 122;\n  'f12' = 123;\n  'num_lock' = 144;\n  'scroll_lock' = 145;\n  'semi-colon' = 186;\n  'equal_sign' = 187;\n  ',' = 188; // \"comma\";\n  '-' = 189; // \"dash\";\n  '.' = 190; // \"period\";\n  '/' = 191; // \"forward slash\";\n  '`' = 192; // \"grave accent\";\n  '[' = 219; // \"open bracket\";\n  '\\\\' = 220; // \"back slash\";\n  ']' = 221; // \"close braket\";\n  \"'\" = 222; // \"single quote\"\n}\n","import type { WebMap } from '../../WebMap';\nimport type { WebMapEvents } from '../../interfaces/Events';\nimport type { MapOptions } from '../../interfaces/MapOptions';\nimport type { MapStateItem } from '../../interfaces/MapState';\n\nexport abstract class StateItem<V extends any | undefined = any | undefined>\n  implements MapStateItem<V | undefined>\n{\n  name!: keyof MapOptions;\n  event!: keyof WebMapEvents;\n  protected value?: V;\n\n  constructor(\n    protected webMap: WebMap,\n    opt?: { name?: keyof MapOptions; event?: keyof WebMapEvents; value?: V },\n  ) {\n    if (opt) {\n      if (opt.value) {\n        this.setValue(opt.value);\n      }\n      if (opt.name) {\n        this.name = opt.name;\n      }\n      if (opt.event) {\n        this.event = opt.event;\n      }\n    }\n  }\n\n  getValue(): V | undefined {\n    return this.value;\n  }\n\n  setValue(val: V): void {\n    this.value = val;\n  }\n\n  abstract toString(data: unknown): string;\n  abstract parse(str: string): V;\n}\n","import { StateItem } from './StateItem';\n\nimport type { WebMapEvents } from '../../interfaces/Events';\nimport type { MapOptions } from '../../interfaces/MapOptions';\nimport type { LngLatArray } from '@nextgis/utils';\n\nexport class CenterState extends StateItem<LngLatArray> {\n  name: keyof MapOptions = 'center';\n  event: keyof WebMapEvents = 'moveend';\n\n  getValue(): LngLatArray | undefined {\n    return this.webMap.getCenter();\n  }\n  setValue(val: LngLatArray): void {\n    this.webMap.setCenter(val);\n  }\n  toString(data: LngLatArray): string {\n    const d = data.map((x) => x.toFixed(5));\n    return d[0] + '_' + d[1];\n  }\n  parse(str: string): LngLatArray {\n    const lngLat = str.split('_').map(Number) as LngLatArray;\n    return lngLat;\n  }\n}\n","import { StateItem } from './StateItem';\n\nimport type { WebMapEvents } from '../../interfaces/Events';\nimport type { MapOptions } from '../../interfaces/MapOptions';\n\nexport class ZoomState extends StateItem<number> {\n  name: keyof MapOptions = 'zoom';\n  event: keyof WebMapEvents = 'zoomend';\n  getValue(): number | undefined {\n    const zoom = this.webMap.getZoom();\n    return zoom !== undefined ? Math.round(zoom) : undefined;\n  }\n  setValue(val: number): void {\n    this.webMap.setZoom(val);\n  }\n  toString(val: number): string {\n    return String(val);\n  }\n  parse(str: string): number {\n    return Number(str);\n  }\n}\n","import { EventEmitter } from 'events';\n\nimport CancelablePromise from '@nextgis/cancelable-promise';\nimport { deepmerge, defined, getBoundsFeature } from '@nextgis/utils';\nimport { deprecatedMapClick } from '@nextgis/utils';\n\nimport { Keys } from './components/keys/Keys';\nimport { CenterState } from './components/mapStates/CenterState';\nimport { ZoomState } from './components/mapStates/ZoomState';\nimport { clearObject } from './utils/clearObject';\n\nimport type { StateItem } from './components/mapStates/StateItem';\nimport type { Cursor } from './interfaces/BaseTypes';\nimport type { MainMapEvents, WebMapEvents } from './interfaces/Events';\nimport type { LayerAdapter } from './interfaces/LayerAdapter';\nimport type {\n  FitOptions,\n  Locate,\n  LocateOptions,\n  LocationEvents,\n  MapAdapter,\n  MapClickEvent,\n} from './interfaces/MapAdapter';\nimport type { MapOptions, ViewOptions } from './interfaces/MapOptions';\nimport type { RuntimeParams } from './interfaces/RuntimeParams';\nimport type { StarterKit } from './interfaces/StarterKit';\nimport type { GetPaintFunction } from '@nextgis/paint';\nimport type {\n  LngLatArray,\n  LngLatBoundsArray,\n  TileJson,\n  Type,\n} from '@nextgis/utils';\nimport type { Feature, Polygon } from 'geojson';\nimport type StrictEventEmitter from 'strict-event-emitter-types';\n\ntype EmitStatusEventData = any;\n\nlet ID = 0;\n\nconst OPTIONS: MapOptions = {\n  minZoom: 0,\n  maxZoom: 22,\n  paint: {\n    color: '#0000ff', // blue\n    opacity: 0.4,\n    strokeOpacity: 1,\n    stroke: true,\n    radius: 8,\n    weight: 1,\n  },\n  selectedPaint: {\n    color: '#00008b', // darkblue\n    opacity: 0.4,\n    strokeOpacity: 1,\n    stroke: true,\n    radius: 12,\n    weight: 1,\n  },\n  create: true,\n};\n\ninterface AddEventsListenersOptions {\n  include: (keyof MainMapEvents)[];\n}\n\nexport class WebMapMain<\n  M = any,\n  E extends WebMapEvents = WebMapEvents,\n  O extends MapOptions = MapOptions,\n> {\n  static keys: Keys = new Keys();\n\n  static getPaintFunctions: { [name: string]: GetPaintFunction };\n\n  options: O = OPTIONS as O;\n  // `WebMapEvents` must be `E` but its not work correct\n  readonly emitter: StrictEventEmitter<EventEmitter, WebMapEvents> =\n    new EventEmitter();\n  readonly keys = WebMapMain.keys;\n\n  readonly mapAdapter: MapAdapter<M>;\n  readonly runtimeParams: RuntimeParams[] = [];\n\n  getPaintFunctions = WebMapMain.getPaintFunctions;\n  mapState: Type<StateItem>[] = [CenterState, ZoomState];\n  id = ID++;\n\n  /**\n   * From runtime params\n   */\n  protected _initMapState: Record<string, any> = {};\n  protected readonly _starterKits: StarterKit[];\n  private _mapState: StateItem[] = [];\n  private _extent?: LngLatBoundsArray;\n  private readonly _eventsStatus: { [key in keyof E]?: boolean } = {};\n  private _coordFromMapClickPromise?: CancelablePromise<LngLatArray>;\n\n  private readonly _mapEvents: {\n    [key in keyof MainMapEvents]?: (...args: any[]) => void;\n  } = {};\n\n  constructor(mapOptions: O) {\n    this.mapAdapter = mapOptions.mapAdapter as MapAdapter<M>;\n    this._starterKits = mapOptions.starterKits || [];\n    if (mapOptions) {\n      this.options = deepmerge((OPTIONS as O) || {}, mapOptions) as O;\n    }\n    if (this.options.runtimeParams) {\n      this.runtimeParams = this.options.runtimeParams;\n    }\n    this._addEventsListeners();\n\n    if (this.options.tileJson) {\n      this._setTileJsonOptions(this.options.tileJson);\n    }\n    if (this.options.create) {\n      this.create();\n    }\n  }\n\n  getId(): number {\n    return this.id;\n  }\n\n  /**\n   * Manual way to create a map (If {@link MapOptions.create} is `false`).\n   * @example\n   * ```javascript\n   * const webMap = new WebMap(options);\n   * webMap.create().then(() => doSomething());\n   * ```\n   */\n  async create(): Promise<this> {\n    if (!this.getEventStatus('create')) {\n      await this._setInitMapState(this.mapState);\n      await this._setupMap();\n      this._emitStatusEvent('create', this);\n    }\n    return this;\n  }\n\n  setRuntimeParams(params: RuntimeParams): void {\n    this.runtimeParams.push(params);\n  }\n\n  /**\n   * Destroys WebMap, MapAdapter, clears all layers and turn off all event listeners\n   */\n  destroy(): void {\n    this._removeEventListeners();\n    clearObject(this._emitStatusEvent);\n    if (this.mapAdapter.destroy) {\n      this.mapAdapter.destroy();\n    }\n  }\n\n  getState(): Record<string, any> {\n    const state: Record<string, any> = {};\n    this._mapState.forEach((x) => {\n      state[x.name] = x.getValue();\n    });\n    return state;\n  }\n\n  getRuntimeParams(): Record<string, any> {\n    const state: Record<string, any> = {};\n    this._mapState.forEach((x) => {\n      for (const r of this.runtimeParams) {\n        const val = r.get(x.name);\n        if (val !== undefined) {\n          state[x.name] = x.parse(val);\n          break;\n        }\n      }\n    });\n    return state;\n  }\n\n  /**\n   * Returns the HTML element that contains the map.\n   * @returns The map's container\n   */\n  getContainer(): HTMLElement | undefined {\n    if (this.mapAdapter.getContainer) {\n      return this.mapAdapter.getContainer();\n    } else if (this.options.target) {\n      if (this.options.target instanceof HTMLElement) {\n        return this.options.target;\n      } else if (typeof this.options.target === 'string') {\n        const element = document.getElementById(this.options.target);\n        if (element) {\n          return element;\n        }\n      }\n    }\n  }\n\n  /**\n   * Set the cursor icon to be displayed when hover icon on the map container.\n   * @param cursor - Available cursor name from https://developer.mozilla.org/ru/docs/Web/CSS/cursor\n   */\n  setCursor(cursor: Cursor): void {\n    if (this.mapAdapter.setCursor) {\n      this.mapAdapter.setCursor(cursor);\n    }\n  }\n\n  getCursor(): Cursor | undefined {\n    if (this.mapAdapter.getCursor) {\n      return this.mapAdapter.getCursor() as Cursor;\n    }\n    const container = this.getContainer();\n    if (container) {\n      return container.style.cursor as Cursor;\n    }\n  }\n\n  /**\n   * Set the center of the current view.\n   * @param lngLat - Array of two numbers representing longitude and latitude of the center of the map view.\n   *\n   * @example\n   * ```javascript\n   * // Mount Everest 27° 59′ 17″ N, 86° 55′ 31″ E\n   * webMap.setCenter([86.925278, 27.988056]);\n   * ```\n   */\n  setCenter(lngLat: LngLatArray): this {\n    this.mapAdapter.setCenter(lngLat);\n    return this;\n  }\n\n  /**\n   * Returns the map's geographical centerpoint.\n   * @returns lngLat Array of two numbers representing longitude and latitude of the center of the map view.\n   *\n   * @example\n   * ```javascript\n   * // Mount Everest 27° 59′ 17″ N, 86° 55′ 31″ E\n   * webMap.getCenter(); // [86.925278, 27.988056]\n   * ```\n   */\n  getCenter(): LngLatArray | undefined {\n    return this.mapAdapter.getCenter();\n  }\n\n  getBounds(): LngLatBoundsArray | undefined {\n    if (this.mapAdapter.getBounds) {\n      return this.mapAdapter.getBounds();\n    }\n  }\n\n  getBoundsPolygon(): Feature<Polygon> | undefined {\n    const bounds = this.getBounds();\n    if (bounds) {\n      const feature = getBoundsFeature(bounds);\n      return feature;\n    }\n  }\n\n  /**\n   * Zoom to a specific zoom level.\n   * @param zoom - The zoom level to set (0-24).\n   */\n  setZoom(zoom: number): this {\n    this.mapAdapter.setZoom(zoom);\n    return this;\n  }\n\n  /**\n   * Returns the map's current zoom level.\n   * @returns The map's current zoom level (0-24).\n   */\n  getZoom(): number | undefined {\n    const zoom = this.mapAdapter.getZoom();\n    if (typeof zoom === 'number') {\n      return zoom;\n    }\n    // throw Error(\n    //   'Unable to get zoom level. Perhaps the map is not have been initialized yet',\n    // );\n  }\n\n  zoomIn(): void {\n    if (this.mapAdapter.zoomIn) {\n      this.mapAdapter.zoomIn();\n    } else {\n      const zoom = this.getZoom();\n      if (zoom !== undefined) {\n        const toZoom = zoom + 1;\n        this.setZoom(toZoom);\n      }\n    }\n  }\n\n  zoomOut(): void {\n    if (this.mapAdapter.zoomOut) {\n      this.mapAdapter.zoomOut();\n    } else {\n      const zoom = this.getZoom();\n      if (zoom !== undefined) {\n        const toZoom = zoom - 1;\n        this.setZoom(toZoom);\n      }\n    }\n  }\n\n  /**\n   * Sets the view of the map geographical center and zoom\n   * @param lngLat - Array of two numbers representing longitude and latitude of the center of the map view.\n   * @param zoom - The zoom level to set (0-24).\n   *\n   * @example\n   * ```javascript\n   * // Mount Everest 27° 59′ 17″ N, 86° 55′ 31″ E\n   * webMap.setView([86.925278, 27.988056], 12)\n   * ```\n   */\n  setView(lngLatOr: LngLatArray, zoom?: number): void;\n\n  setView(options: ViewOptions): void;\n\n  setView(lngLatOrOpt: LngLatArray | ViewOptions, zoom?: number): void {\n    if (Array.isArray(lngLatOrOpt)) {\n      const lngLat = lngLatOrOpt;\n      if (this.mapAdapter.setView && lngLat && defined(zoom)) {\n        this.mapAdapter.setView(lngLat, zoom);\n      } else {\n        if (lngLat) {\n          this.mapAdapter.setCenter(lngLat);\n        }\n        if (defined(zoom)) {\n          this.mapAdapter.setZoom(zoom);\n        }\n      }\n    } else {\n      const viewOpt = lngLatOrOpt;\n      if (this.mapAdapter.setView) {\n        this.mapAdapter.setView(viewOpt);\n      }\n    }\n  }\n\n  /**\n   * Sets a map view that contains the given geographical bounds.\n   * @param bounds - Array of coordinates, measured in degrees, in [west, south, east, north] order.\n   *\n   * @example\n   * ```javascript\n   * // Whole world\n   * webMap.fitBounds([0, -90, 180, 90]);\n   * ```\n   */\n  fitBounds(bounds: LngLatBoundsArray, options?: FitOptions): this {\n    if (bounds.every((x) => defined(x))) {\n      if (bounds[1] < -85.06) {\n        bounds[1] = -85.06;\n      }\n      if (bounds[3] > 85.06) {\n        bounds[3] = 85.06;\n      }\n      this.mapAdapter.fitBounds(bounds, options);\n    }\n    return this;\n  }\n\n  /**\n   * Checking the status of any asynchronous operation\n   * @param event - The name of the event whose status is checked\n   *\n   * @example\n   * ```javascript\n   * var webMap = new WebMap(options);\n   * webMap.getEventStatus('create'); // false\n   * webMap.emitter.on('create', function () {\n   *   webMap.getEventStatus('create'); // true\n   * })\n   * ```\n   */\n  getEventStatus(event: keyof E): boolean {\n    // ugly hack to disable type checking error\n    const _eventName = event as keyof WebMapEvents;\n    const status = this._eventsStatus[_eventName];\n    return status ?? false;\n  }\n\n  /**\n   * helper method to wait for events to load. By default, card creation is tracked\n   * @param event - The name of the event whose status is checked\n   *\n   * @example\n   * ```javascript\n   * var webMap = new WebMap(options);\n   * webMap.onLoad().then(function () {\n   *   webMap.getEventStatus('create'); // true\n   * })\n   *\n   * // use async/await syntax\n   * async function () {\n   *   await webMap.onLoad();\n   *   doSomething();\n   * }\n   *\n   * ```\n   */\n  onLoad(event: keyof WebMapEvents = 'create'): Promise<this> {\n    return new Promise((res) => {\n      if (this.getEventStatus(event)) {\n        res(this);\n      } else {\n        this.emitter.once(event, () => {\n          res(this);\n        });\n      }\n    });\n  }\n\n  onMapLoad(cb?: (mapAdapter: MapAdapter) => void): Promise<MapAdapter> {\n    return new Promise((res) => {\n      const _resolve = () => {\n        const mapAdapter = this.mapAdapter;\n        if (cb) {\n          cb(mapAdapter);\n        }\n        if (mapAdapter) {\n          res(mapAdapter);\n        }\n      };\n      const isLoaded = this.mapAdapter.isLoaded ?? true;\n      if (this.mapAdapter.map && isLoaded) {\n        _resolve();\n      } else {\n        this.mapAdapter.emitter.once('create', () => {\n          _resolve();\n        });\n      }\n    });\n  }\n\n  getLayerAdapters(): { [name: string]: Type<LayerAdapter> } {\n    return this.mapAdapter.layerAdapters;\n  }\n\n  getLayerAdapter(name: string): Type<LayerAdapter> {\n    const adapter = this.mapAdapter.layerAdapters[name];\n    return adapter;\n  }\n\n  locate(opt: LocateOptions, events?: LocationEvents): Locate {\n    if (this.mapAdapter && this.mapAdapter.locate) {\n      return this.mapAdapter.locate(opt, events);\n    }\n    const stop = () => ({});\n    return { stop };\n  }\n\n  stopGetCoordFromMapClick(): void {\n    if (this._coordFromMapClickPromise) {\n      this._coordFromMapClickPromise.cancel();\n    }\n  }\n\n  getCoordFromMapClick(): CancelablePromise<LngLatArray> {\n    if (!this._coordFromMapClickPromise) {\n      this._coordFromMapClickPromise = new CancelablePromise(\n        (resolve, reject, onCancel) => {\n          const cursor: Cursor = this.getCursor() || 'grab';\n          this._removeEventListeners({ include: ['click'] });\n          this.setCursor('crosshair');\n          const onCancel_ = (): void => {\n            this.setCursor(cursor);\n            this._addEventsListeners({ include: ['click'] });\n            this.mapAdapter.emitter.off('click', onMapClick);\n            this._coordFromMapClickPromise = undefined;\n          };\n          const onMapClick = (e: MapClickEvent) => {\n            onCancel_();\n            deprecatedMapClick(e);\n            resolve(e.lngLat);\n          };\n          this.mapAdapter.emitter.once('click', onMapClick);\n          onCancel(onCancel_);\n        },\n      );\n    } else {\n      return this.getCoordFromMapClick();\n    }\n    return this._coordFromMapClickPromise;\n  }\n\n  protected _emitStatusEvent(\n    eventName: keyof E,\n    data?: EmitStatusEventData,\n  ): void {\n    // ugly hack to disable type checking error\n    const _eventName = eventName as keyof E;\n    this._eventsStatus[_eventName] = true;\n    this.emitter.emit(_eventName as keyof WebMapEvents, data);\n  }\n\n  protected async _addLayerProviders(): Promise<void> {\n    //\n  }\n\n  protected async _onLoadSync(): Promise<void> {\n    //\n  }\n\n  private async _setupMap(): Promise<this> {\n    if (!this.mapAdapter) {\n      throw new Error('WebMap `mapAdapter` option is not set');\n    }\n    await this.mapAdapter.create(this.options);\n    this._zoomToInitialExtent();\n\n    await this._addLayerProviders();\n    await this._onLoadSync();\n\n    this._emitStatusEvent('build-map', this.mapAdapter);\n    return this;\n  }\n\n  private _setTileJsonOptions(tileJson: TileJson): void {\n    if (tileJson.center) {\n      this.options.center = tileJson.center;\n    }\n    if (tileJson.bounds) {\n      this.options.bounds = tileJson.bounds;\n    }\n    if (defined(tileJson.maxzoom)) {\n      // this.options.maxZoom = tileJson.maxzoom;\n      this.options.zoom = tileJson.maxzoom;\n    }\n    if (defined(tileJson.minzoom)) {\n      // this.options.minZoom = tileJson.minzoom;\n      this.options.zoom = tileJson.minzoom;\n    }\n    if (defined(tileJson.maxzoom) && defined(tileJson.minzoom)) {\n      this.options.zoom = (tileJson.maxzoom + tileJson.minzoom) / 2;\n    }\n  }\n\n  private _zoomToInitialExtent(): void {\n    const { center, zoom, bounds } = this.options;\n    if (this._extent) {\n      this.fitBounds(this._extent);\n    } else if (center && zoom) {\n      this.setView(center, zoom);\n    } else if (bounds) {\n      this.fitBounds(bounds);\n    }\n  }\n\n  private _setInitMapState(states: Type<StateItem>[]): void {\n    for (const X of states) {\n      const state = new X(this);\n      this._mapState.push(state);\n      for (const r of this.runtimeParams) {\n        const str = r.get(state.name);\n        if (str !== undefined) {\n          const val = state.parse(str);\n          // state.setValue(val);\n          this._initMapState[state.name] = val;\n          Object.defineProperty(this.options, state.name, {\n            value: val,\n            configurable: true,\n            enumerable: true,\n          });\n          break;\n        }\n      }\n    }\n  }\n\n  private _addEventsListeners(opt?: AddEventsListenersOptions): void {\n    let events: (keyof MainMapEvents)[] = [\n      'preclick',\n      'click',\n      'zoomstart',\n      'zoom',\n      'zoomend',\n      'movestart',\n      'move',\n      'moveend',\n      'mousemove',\n      'mouseout',\n      'mouseover',\n    ];\n\n    if (opt && opt.include) {\n      events = events.filter((x) => opt.include.includes(x));\n    }\n    events.forEach((x) => {\n      this._mapEvents[x] = (data): void => {\n        if (this.runtimeParams.length) {\n          const mapStatusEvent = this._mapState.find((y) => y.event === x);\n          if (mapStatusEvent) {\n            const value = mapStatusEvent.toString(mapStatusEvent.getValue());\n            this.runtimeParams.forEach((r) => {\n              r.set(mapStatusEvent.name, value);\n            });\n          }\n        }\n        if (this._eventsStatus) {\n          this.emitter.emit(x, data);\n        }\n      };\n      const mapEvent = this._mapEvents[x];\n      if (mapEvent) {\n        this.mapAdapter.emitter.on(x, mapEvent);\n      }\n    });\n  }\n\n  private _removeEventListeners(opt?: AddEventsListenersOptions): void {\n    let events = Object.entries(this._mapEvents) as [\n      keyof MainMapEvents,\n      ((...args: any[]) => void) | undefined,\n    ][];\n    if (opt && opt.include) {\n      events = events.filter((x) => opt.include.includes(x[0]));\n    }\n    events.forEach(([x, event]) => {\n      if (event) {\n        this.mapAdapter.emitter.removeListener(x as keyof MainMapEvents, event);\n      }\n    });\n  }\n}\n","/**\n * @internal\n */\nexport function clearObject(obj: Record<any, any>): void {\n  for (const member in obj) {\n    delete obj[member];\n  }\n}\n","import type {\n  Feature,\n  FeatureCollection,\n  GeoJsonGeometryTypes,\n  GeoJsonObject,\n  GeometryCollection,\n} from 'geojson';\n\n/**\n * @internal\n */\nexport function findMostFrequentGeomType(\n  arr: GeoJsonGeometryTypes[],\n): GeoJsonGeometryTypes {\n  const counts: { [x: string]: number } = {};\n  for (let fry = 0; fry < arr.length; fry++) {\n    counts[arr[fry]] = 1 + (counts[arr[fry]] || 0);\n  }\n  let maxName;\n  for (const c in counts) {\n    const count = maxName !== undefined ? counts[maxName] : 0;\n    if (counts[c] > (count || 0)) {\n      maxName = c;\n    }\n  }\n  return maxName as GeoJsonGeometryTypes;\n}\n\n/**\n * @internal\n */\nexport function detectGeometryType(\n  geojson: GeoJsonObject,\n): GeoJsonGeometryTypes {\n  let geometry: GeoJsonGeometryTypes;\n  if (geojson.type === 'FeatureCollection') {\n    const featuresTypes = (geojson as FeatureCollection).features.map(\n      (f) => f.geometry.type,\n    );\n    geometry = findMostFrequentGeomType(featuresTypes);\n  } else if (geojson.type === 'GeometryCollection') {\n    const geometryTypes = (geojson as GeometryCollection).geometries.map(\n      (g) => g.type,\n    );\n    geometry = findMostFrequentGeomType(geometryTypes);\n  } else if (geojson.type === 'Feature') {\n    geometry = (geojson as Feature).geometry.type;\n  } else {\n    geometry = geojson.type;\n  }\n  return geometry;\n}\n","import { KeyCodes } from './KeysCodes';\n\n/**\n * @param {string} key - key symbol\n * @param {string} func - action on key press\n * @param {number} [keyCode] - key code for special button like tab\n *\n * @export\n * @interface KeyControl\n */\nexport interface KeyControl {\n  key?: string;\n  keyCode?: number;\n  func: () => void;\n}\n\nexport class Keys {\n  keyCodeAlias = new KeyCodes();\n\n  keys: { [keyCode: number]: boolean } = {};\n\n  private _windowOnFocus: () => void;\n  private _keysPressed: (e: KeyboardEvent) => void;\n  private _keysReleased: (e: KeyboardEvent) => void;\n\n  constructor() {\n    this._windowOnFocus = this.windowOnFocus.bind(this);\n    this._keysPressed = this.keysPressed.bind(this);\n    this._keysReleased = this.keysReleased.bind(this);\n    this.addKeyboardEventsListener();\n  }\n\n  pressed(keyName: keyof KeyCodes): boolean {\n    const code = this.keyCodeAlias[keyName];\n    return !!code && this.keys[code];\n  }\n\n  addKeyboardEventsListener(): void {\n    if (typeof window !== 'undefined') {\n      window.addEventListener('focus', this._windowOnFocus, false);\n      window.addEventListener('keydown', this._keysPressed, false);\n      window.addEventListener('keyup', this._keysReleased, false);\n    }\n  }\n\n  removeKeyboardEventsListener(): void {\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('focus', this._windowOnFocus, false);\n      window.removeEventListener('keydown', this._keysPressed, false);\n      window.removeEventListener('keyup', this._keysReleased, false);\n    }\n  }\n\n  private keysPressed(e: KeyboardEvent) {\n    e.stopPropagation();\n    if (!this.keys[e.keyCode]) {\n      this.keys[e.keyCode] = true;\n    }\n  }\n\n  private keysReleased(e: KeyboardEvent) {\n    e.stopPropagation();\n    this.keys[e.keyCode] = false;\n  }\n\n  private windowOnFocus() {\n    this.keys = {};\n  }\n}\n","import { isPaint } from '@nextgis/paint';\n\nimport { detectGeometryType } from './geometryTypes';\n\nimport type {\n  GeoJsonAdapterOptions,\n  VectorAdapterLayerType,\n} from '../interfaces/LayerAdapter';\n\n/**\n * @internal\n */\nexport const paintTypeAlias: Record<VectorAdapterLayerType, any> = {\n  polygon: 'path',\n  line: 'path',\n  point: 'circle',\n};\n\nexport const typeAlias: { [x: string]: VectorAdapterLayerType } = {\n  Point: 'point',\n  LineString: 'line',\n  MultiPoint: 'point',\n  Polygon: 'polygon',\n  MultiLineString: 'line',\n  MultiPolygon: 'polygon',\n};\n\n/**\n * @internal\n */\nexport function updateGeoJsonAdapterOptions<\n  O extends GeoJsonAdapterOptions = GeoJsonAdapterOptions,\n>(opt: O): O {\n  if (opt.data) {\n    const geomType = typeAlias[detectGeometryType(opt.data)];\n    const p = opt.paint;\n    if (p && isPaint(p)) {\n      // define parameter if not specified\n      p.type = p.type\n        ? p.type\n        : geomType === 'polygon' || geomType === 'line'\n          ? 'path'\n          : 'html' in p || 'className' in p\n            ? 'icon'\n            : paintTypeAlias[geomType];\n    }\n    opt.type = opt.type || geomType;\n  }\n  return opt;\n}\n","import { preparePaint } from '@nextgis/paint';\nimport { propertiesFilter } from '@nextgis/properties-filter';\nimport { defined } from '@nextgis/utils';\n\nimport { WebMapMain } from './WebMapMain';\nimport { updateGeoJsonAdapterOptions } from './utils/updateGeoJsonAdapterOptions';\n\nimport type { LayerDef } from './interfaces/BaseTypes';\nimport type { WebMapEvents } from './interfaces/Events';\nimport type {\n  AdapterConstructor,\n  AdapterOptions,\n  DataLayerFilter,\n  FeatureLayerAdapter,\n  FilterOptions,\n  GeoJsonAdapterOptions,\n  GetLegendOptions,\n  ImageAdapterOptions,\n  LayerAdapter,\n  LayerAdapterDefinition,\n  LayerAdapters,\n  LayerAdaptersOptions,\n  LayerDefinition,\n  MainLayerAdapter,\n  OnLayerMouseOptions,\n  OnLayerSelectOptions,\n  TileAdapterOptions,\n  VectorLayerAdapter,\n} from './interfaces/LayerAdapter';\nimport type { LayerLegend } from './interfaces/LegendItem';\nimport type { FitOptions } from './interfaces/MapAdapter';\nimport type {\n  GetAttributionsOptions,\n  MapOptions,\n  ToggleLayerOptions,\n} from './interfaces/MapOptions';\nimport type { Paint } from '@nextgis/paint';\nimport type { PropertiesFilter } from '@nextgis/properties-filter';\nimport type { FeatureProperties, TileJson, Type } from '@nextgis/utils';\nimport type { Feature, GeoJsonObject, Geometry } from 'geojson';\n\ntype AddedLayers<M = any, L = any> = { [id: string]: LayerAdapter<M, L> };\n\nexport class WebMapLayers<\n  M = any,\n  L = any,\n  E extends WebMapEvents = WebMapEvents,\n  O extends MapOptions = MapOptions,\n> extends WebMapMain<M, E, O> {\n  private _layersIdCounter = 1;\n  private _layersOrderCounter = 1;\n  private readonly _baselayers: string[] = [];\n  private readonly _layers: AddedLayers<M, L> = {};\n  private readonly _selectedLayers: string[] = [];\n\n  constructor(mapOptions: O) {\n    super(mapOptions);\n    const tileJson = this.options.tileJson;\n    if (tileJson) {\n      this.emitter.once('build-map', () => this.addTileJsonLayer(tileJson));\n    }\n  }\n\n  /**\n   * Try to fit map view by given layer bounds.\n   * But not all layers have borders\n   */\n  async fitLayer(layerDef: LayerDef, options?: FitOptions): Promise<void> {\n    const layer = this.getLayer(layerDef);\n    // TODO: remove backward compatibility for `getExtent`\n    const getBounds = layer && (layer.getBounds || layer.getExtent);\n    if (getBounds) {\n      const extent = await getBounds.call(layer);\n      if (extent) {\n        this.fitBounds(extent, options);\n      }\n    }\n  }\n\n  /**\n   * Check if given layer is baselayer\n   */\n  isBaseLayer(layerDef: LayerDef): boolean | undefined {\n    const layer = this.getLayer(layerDef);\n    if (layer && layer.id) {\n      return this._baselayers.indexOf(layer.id) !== -1;\n    }\n    return undefined;\n  }\n\n  getBaseLayers(): LayerAdapter[] {\n    const baselayers: LayerAdapter[] = [];\n    this._baselayers.forEach((x) => {\n      const baselayer = this._layers[x];\n      if (baselayer) {\n        baselayers.push(baselayer);\n      }\n    });\n    return baselayers;\n  }\n\n  getBaseLayersIds(): string[] {\n    return this._baselayers;\n  }\n\n  /**\n   * Helper method to return added layer object by any definition type.\n   */\n  getLayer<LA extends LayerAdapter = LayerAdapter>(\n    layerDef: LayerDef,\n  ): LA | undefined {\n    if (typeof layerDef === 'string') {\n      return this._layers[layerDef] as LA;\n    }\n    return layerDef as LA;\n  }\n\n  /**\n   * Helper method to return added layer identificator by any definition type.\n   */\n  getLayerId(layerDef: LayerDef): string | undefined {\n    const layer = this.getLayer(layerDef);\n    if (layer) {\n      if (layer.id) {\n        return layer?.id;\n      }\n      if (layer && layer.options) {\n        return layer.options.id;\n      }\n    }\n    throw new Error('No id for layer');\n  }\n\n  /**\n   * Return array of all added layer identifications.\n   */\n  getLayers(): string[] {\n    return Object.keys(this._layers);\n  }\n\n  // TODO: rename to getLayers, getLayers rename to getLayersIds\n  allLayers(): AddedLayers<M, L> {\n    return this._layers;\n  }\n\n  orderedLayers<LA extends LayerAdapter<M, L> = LayerAdapter<M, L>>(): LA[] {\n    return Object.values(this._layers).sort((a, b) =>\n      a.order && b.order ? a.order - b.order : 0,\n    ) as LA[];\n  }\n\n  findLayer<T extends LayerAdapter = LayerAdapter>(\n    filter: (adapter: T) => boolean,\n  ): T | undefined {\n    for (const l in this._layers) {\n      const layerAdapter = this._layers[l] as T;\n      const isFit = filter(layerAdapter);\n      if (isFit) {\n        return layerAdapter;\n      }\n    }\n  }\n\n  /**\n   * Check if the given layer on the map\n   */\n  isLayerVisible(layerDef: LayerDef): boolean {\n    const layer = this.getLayer(layerDef);\n    return layer && layer.options.visibility !== undefined\n      ? layer.options.visibility\n      : false;\n  }\n\n  /**\n   * Shortcut method to create base layer\n   */\n  async addBaseLayer<\n    K extends keyof LayerAdapters,\n    O extends AdapterOptions = AdapterOptions,\n  >(\n    adapter: K | Type<LayerAdapters[K]>,\n    options?: O | LayerAdaptersOptions[K],\n  ): Promise<LayerAdapter> {\n    const layer = await this.addLayer(\n      adapter,\n      {\n        ...options,\n        baselayer: true,\n      },\n      undefined,\n    );\n\n    return layer;\n  }\n\n  /**\n   * Registration of map layer.\n   *\n   * @param adapter - The name of layer adapter from [MapAdapter.layerAdapters](webmap#MapAdapter.layerAdapters).\n   *                May be custom object or class implemented by [MainLayerAdapter](webmap#MainLayerAdapter).\n   * @param options - Specific options for given adapter\n   *\n   * @example\n   * ```javascript\n   * webMap.addLayer('TILE', options).then((layer) => webMap.showLayer(layer));\n   *\n   * webMap.addLayer(CustomLayerAdapter, options);\n   * ```\n   */\n  async addLayer<\n    K extends keyof LayerAdapters,\n    LO extends AdapterOptions = AdapterOptions,\n  >(\n    adapter: LayerAdapterDefinition<K>,\n    options: LO | LayerAdaptersOptions[K] = {},\n    order?: number,\n  ): Promise<LayerAdapter> {\n    const id = this._layersIdCounter++;\n    const _order = defined(order)\n      ? order\n      : options.order !== undefined\n        ? options.order\n        : this.reserveOrder();\n    let adapterEngine: Type<LayerAdapter<M, L, LO>> | undefined;\n    if (typeof adapter === 'string') {\n      adapterEngine = this.getLayerAdapter(adapter) as Type<\n        LayerAdapter<M, L, LO>\n      >;\n    } else if (typeof adapter === 'function') {\n      adapterEngine = adapter as Type<LayerAdapter<M, L, LO>>;\n    } else if (\n      'then' in (adapter as Promise<Type<LayerAdapters[K]> | undefined>)\n    ) {\n      adapterEngine = (await adapter) as Type<LayerAdapter<M, L, LO>>;\n    }\n\n    const geoJsonOptions = options as GeoJsonAdapterOptions;\n\n    this._updateGeoJsonOptions(geoJsonOptions);\n\n    options = {\n      id: String(id),\n      order: _order,\n      ...options,\n    };\n\n    // options.visibility is a layer global state\n    const visibility = options.visibility ?? true;\n    options.visibility = false;\n\n    if (options.baselayer) {\n      options.order = 0;\n    }\n    if (this.options.onBeforeAddLayer) {\n      const modified = this.options.onBeforeAddLayer({\n        options,\n        adapter: adapterEngine,\n      });\n      if (modified) {\n        if (modified.options) {\n          options = modified.options;\n        }\n        if (modified.adapter) {\n          adapterEngine = modified.adapter as Type<LayerAdapter<M, L, LO>>;\n        }\n      }\n    }\n    if (adapterEngine !== undefined) {\n      const _adapter = new adapterEngine(this.mapAdapter.map, options);\n      _adapter.options = { ...options, ..._adapter.options };\n\n      if (_adapter.options.baselayer) {\n        options.baselayer = true;\n        options.order = 0;\n        _adapter.options.order = 0;\n      }\n\n      let layerId: string | undefined;\n      if (_adapter.options.id) {\n        layerId = String(_adapter.options.id);\n\n        this._layers[layerId] = _adapter;\n      }\n      this._emitLayerEvent('layer:preadd', layerId || '', _adapter);\n      await this.onMapLoad();\n      _adapter.map = this.mapAdapter.map;\n      const layer = await _adapter.addLayer(_adapter.options);\n      // checking that the original layer was inserted into the adapter anyway\n      _adapter.layer = layer;\n      // think about how to move `id` to the adapter's constructor,\n      // but that it is not required in the options\n      _adapter.id = _adapter.options.id || String(id);\n      _adapter.options.id = _adapter.id;\n      if (options.baselayer) {\n        _adapter.options.order = 0;\n      }\n      _adapter.order = _adapter.options.order ?? _order;\n      if (layerId) {\n        delete this._layers[layerId];\n      }\n      layerId = String(_adapter.id);\n      if (this._layers[layerId]) {\n        throw Error(`layer with id '${layerId}' already exist`);\n      }\n      if (layerId) {\n        this._layers[layerId] = _adapter;\n\n        if (geoJsonOptions.filter) {\n          this.filterLayer(_adapter, geoJsonOptions.filter);\n        }\n        if (options.baselayer) {\n          this._baselayers.push(layerId);\n        }\n\n        if (visibility) {\n          await this.showLayer(layerId);\n        }\n      }\n      const opacity = options.opacity;\n      if (opacity !== undefined && opacity <= 1) {\n        this.setLayerOpacity(_adapter, opacity);\n      }\n      // TODO: remove backward compatibility for `getExtent`\n      const getBounds = layer && (_adapter.getBounds || _adapter.getExtent);\n      if (options.fit && getBounds) {\n        const extent = await getBounds.call(_adapter);\n        if (extent) {\n          await this.fitBounds(extent);\n        }\n      }\n      if (options.onAdded) {\n        options.onAdded(_adapter);\n      }\n      this._emitLayerEvent('layer:add', layerId, _adapter);\n      return _adapter;\n    }\n    return Promise.reject('No adapter');\n  }\n\n  async addLayerFromAsyncAdapter<\n    K extends keyof LayerAdapters,\n    O extends AdapterOptions = AdapterOptions,\n  >(\n    adapter: AdapterConstructor,\n    options: O | LayerAdaptersOptions[K],\n    order?: number,\n  ): Promise<LayerAdapter> {\n    const _order =\n      order || options.order !== undefined\n        ? options.order\n        : 0 || this.reserveOrder();\n    const adapterConstructor = adapter as AdapterConstructor;\n    const adapterConstructorPromise = adapterConstructor();\n    const adapterEngine = await adapterConstructorPromise;\n    if (adapterEngine) {\n      return this.addLayer(adapterEngine, options, _order);\n    }\n    return Promise.reject('No adapter');\n  }\n\n  /**\n   * Remove all layer from map and memory.\n   */\n  removeLayers(\n    allowCb?: (layer: string, adapter: LayerAdapter) => boolean,\n  ): void {\n    for (const l in this._layers) {\n      let allow = true;\n      if (allowCb) {\n        allow = allowCb(l, this._layers[l]);\n      }\n      if (allow) {\n        this.removeLayer(l);\n        delete this._layers[l];\n      }\n    }\n  }\n\n  async getLegend(options?: GetLegendOptions): Promise<LayerLegend[]> {\n    const promises: Promise<LayerLegend[]>[] = [];\n    for (const l of this.orderedLayers()) {\n      if (l.getLegend) {\n        promises.push(l.getLegend(options));\n      }\n    }\n    return (await Promise.all(promises)).flat();\n  }\n\n  reserveOrder(): number {\n    return this._layersOrderCounter++;\n  }\n\n  /**\n   * Remove all layers but not remove basemap.\n   */\n  removeOverlays(): void {\n    this.removeLayers((layerId, layer) => {\n      if (layer && layer.options && layer.options.baselayer) {\n        return false;\n      }\n      return true;\n    });\n  }\n\n  /**\n   * Remove specific layer from map and memory by its definition.\n   */\n  removeLayer(layerDef: LayerDef): void {\n    const layer = this.getLayer(layerDef);\n    const layerId = layer && this.getLayerId(layer);\n    if (layer && layerId) {\n      this.emitter.emit('layer:preremove', layer);\n      if (layer.beforeRemove) {\n        layer.beforeRemove();\n      }\n      if (layer.removeLayer) {\n        layer.removeLayer();\n      } else {\n        this.mapAdapter.removeLayer(layer.layer);\n      }\n      if (layer.options && layer.options.baselayer) {\n        const index = this._baselayers.indexOf(layerId);\n        if (index) {\n          this._baselayers.splice(index, 1);\n        }\n      }\n      delete this._layers[layerId];\n      this.emitter.emit('layer:remove', layer);\n    }\n  }\n\n  /**\n   * Create layer from GeoJson data. Set style and behavior for selection.\n   *\n   * @example\n   * ```javascript\n   * // Add simple layer\n   * webMap.addGeoJsonLayer({ data: geojson, paint: { color: 'red' } });\n   *\n   * // Add styled by feature property layer with selection behavior\n   * webMap.addGeoJsonLayer({\n   *   data: geojson,\n   *   paint: function (feature) {\n   *     return { color: feature.properties.color, opacity: 0.5 }\n   *   },\n   *  selectedPaint: function (feature) {\n   *    return { color: feature.properties.selcolor, opacity: 1 }\n   *  },\n   *  selectable: true,\n   *  multiselect: true\n   * });\n   *\n   * // Add marker layer styled with use [Icons](icons)\n   * webMap.addGeoJsonLayer({ data: geojson, paint: webMap.getIcon({ color: 'orange' })});\n   *\n   * // work with added layer\n   * const layer = webMap.addGeoJsonLayer({ data: geojson, id: 'my_layer_name'});\n   * // access layer by id\n   * webMap.showLayer('my_layer_name');\n   * // or access layer by instance\n   * webMap.showLayer(layer);\n   * ```\n   */\n  addGeoJsonLayer<\n    K extends keyof LayerAdapters = keyof LayerAdapters,\n    O extends GeoJsonAdapterOptions<any, any> = GeoJsonAdapterOptions,\n  >(\n    opt: O = {} as O,\n    adapter?: LayerAdapterDefinition<K>,\n  ): Promise<VectorLayerAdapter<any, any, any>> {\n    opt = opt || ({} as O);\n    opt.multiselect = opt.multiselect !== undefined ? opt.multiselect : false;\n    opt.unselectOnSecondClick =\n      opt.unselectOnSecondClick !== undefined\n        ? opt.unselectOnSecondClick\n        : true;\n    if (!adapter) {\n      opt = updateGeoJsonAdapterOptions(opt);\n    }\n    opt.paint = opt.paint || {};\n    return this.addLayer(adapter || 'GEOJSON', opt);\n  }\n\n  /** Shortcut for {@link WebMapLayers.addGeoJsonLayer} to create GeoJson adapter with generic types for working in typescript */\n  addFeatureLayer<\n    P extends FeatureProperties = FeatureProperties,\n    G extends Geometry = Geometry,\n    O extends GeoJsonAdapterOptions<Feature<G, P>> = GeoJsonAdapterOptions<\n      Feature<G, P>\n    >,\n  >(options = {} as O): Promise<FeatureLayerAdapter<P, G>> {\n    return this.addGeoJsonLayer<'GEOJSON', O>(options) as Promise<\n      FeatureLayerAdapter<P, G>\n    >;\n  }\n\n  /** Shortcut for {@link WebMapLayers.addLayer} to create TileLayer adapter */\n  addTileLayer(\n    url: string,\n    options: Omit<TileAdapterOptions, 'url'> = {},\n  ): Promise<MainLayerAdapter<M, L, TileAdapterOptions>> {\n    return this.addLayer('TILE', { ...options, url }) as Promise<\n      MainLayerAdapter<M, L, TileAdapterOptions>\n    >;\n  }\n\n  /** Shortcut for {@link WebMapLayers.addLayer} to create TileLayer adapter */\n  addImageLayer(\n    url: string,\n    options: Omit<ImageAdapterOptions, 'url'>,\n  ): Promise<MainLayerAdapter<M, L, ImageAdapterOptions>>;\n  addImageLayer(\n    options: ImageAdapterOptions,\n  ): Promise<MainLayerAdapter<M, L, ImageAdapterOptions>>;\n  addImageLayer(\n    urlOrOptions: string | ImageAdapterOptions,\n    options?: Omit<ImageAdapterOptions, 'url'>,\n  ): Promise<MainLayerAdapter<M, L, ImageAdapterOptions>> {\n    let url;\n    if (typeof urlOrOptions === 'string') {\n      url = urlOrOptions;\n    } else {\n      url = urlOrOptions.url;\n      options = urlOrOptions;\n    }\n\n    return this.addLayer('IMAGE', { ...options, url }) as Promise<\n      MainLayerAdapter<M, L, ImageAdapterOptions>\n    >;\n  }\n\n  /**\n   * Show added layer on the map by it definition.\n   */\n  showLayer(\n    layerDef: LayerDef,\n    options: ToggleLayerOptions = {},\n  ): Promise<void> {\n    return this.toggleLayer(layerDef, true, options);\n  }\n\n  /**\n   * Hide added layer on the map by it definition.\n   */\n  hideLayer(\n    layerDef: LayerDef,\n    options: ToggleLayerOptions = {},\n  ): Promise<void> {\n    return this.toggleLayer(layerDef, false, options);\n  }\n\n  /**\n   * Change added layer visibility on the map by given status or inverse current status.\n   *\n   * @example\n   * ```javascript\n   * webMap.addLayer('TILE', {id: 'my_layer', url: ''}).then((layer) => {\n   *   webMap.toggleLayer(layer, true);\n   *   webMap.toggleLayer('my_layer', false);\n   *   webMap.toggleLayer('my_layer');\n   *   webMap.isLayerVisible(layer); // true\n   * });\n   * ```\n   */\n  toggleLayer(\n    layerDef: LayerDef,\n    status?: boolean,\n    options: ToggleLayerOptions = {},\n  ): Promise<void> {\n    const layer = this.getLayer(layerDef);\n\n    const onMap = layer && layer.options.visibility;\n    const toStatus = status !== undefined ? status : !onMap;\n    const silent = options.silent !== undefined ? options.silent : false;\n    const action = async (l: LayerAdapter) => {\n      const id = String(l.id);\n      const preEventName = toStatus ? 'layer:preshow' : 'layer:prehide';\n      const eventName = toStatus ? 'layer:show' : 'layer:hide';\n      if (!silent) {\n        this._emitLayerEvent(preEventName, id, l);\n        this._emitLayerEvent('layer:pretoggle', id, l);\n      }\n      if (toStatus && this.mapAdapter) {\n        const order = l.options.baselayer ? 0 : l.options.order;\n\n        // do not show baselayer if another on the map\n        if (l.options.baselayer && this._baselayers.length) {\n          const anotherVisibleBaselayers = this._baselayers.filter((x) => {\n            return x !== l.id && this.isLayerVisible(x);\n          });\n          for (const bl of anotherVisibleBaselayers) {\n            await this.hideLayer(bl);\n          }\n        }\n        if (l.showLayer) {\n          await l.showLayer.call(l, l.layer);\n        } else if (l.layer !== undefined) {\n          await this.mapAdapter.showLayer(l.layer);\n        }\n        if (order !== undefined) {\n          this.mapAdapter.setLayerOrder(l.layer, order, this._layers);\n        }\n      } else {\n        if (l.hideLayer) {\n          await l.hideLayer.call(l, l.layer);\n        } else if (l.layer !== undefined) {\n          await this.mapAdapter.hideLayer(l.layer);\n        }\n      }\n      l.options.visibility = toStatus;\n      if (!silent) {\n        this._emitLayerEvent(eventName, id, l);\n        this._emitLayerEvent('layer:toggle', id, l);\n      }\n    };\n    if (layer) {\n      return this.onMapLoad().then(() => action(layer));\n    }\n    return Promise.resolve();\n  }\n\n  updateLayer(layerDef: LayerDef): Promise<void> {\n    const layer = this.getLayer(layerDef);\n    if (layer) {\n      if (layer.updateLayer) {\n        return Promise.resolve(layer.updateLayer());\n      } else if (this.isLayerVisible(layer)) {\n        return this.hideLayer(layer, { silent: true }).then(() => {\n          return this.showLayer(layer, { silent: true });\n        });\n      }\n    }\n    return Promise.resolve();\n  }\n\n  /**\n   * Set transparency for a given layer by number from 0 to 1\n   */\n  setLayerOpacity(layerDef: LayerDef, value: number): void {\n    const layer = this.getLayer(layerDef);\n    if (layer) {\n      if (layer.setOpacity) {\n        layer.setOpacity(value);\n      } else if (this.mapAdapter.setLayerOpacity) {\n        this.mapAdapter.setLayerOpacity(layer.layer, value);\n      }\n    }\n  }\n\n  isLayerLabelVisible(layerDef: LayerDef): boolean | undefined {\n    const layer = this.getLayer(layerDef) as VectorLayerAdapter;\n    if (layer.isLabelVisible) {\n      return layer.isLabelVisible();\n    }\n    return layer.options.labelVisibility ?? true;\n  }\n\n  showLayerLabel(layerDef: LayerDef): void {\n    this.toggleLayerLabel(layerDef, true);\n  }\n\n  hideLayerLabel(layerDef: LayerDef): void {\n    this.toggleLayerLabel(layerDef, false);\n  }\n\n  toggleLayerLabel(layerDef: LayerDef, status?: boolean): boolean {\n    const layer = this.getLayer(layerDef) as VectorLayerAdapter;\n    status = status ?? !this.isLayerLabelVisible(layerDef);\n    if (layer) {\n      if (status) {\n        if (layer.showLabel) {\n          layer.options.labelVisibility = true;\n          layer.showLabel();\n        }\n      } else {\n        if (layer.hideLabel) {\n          layer.options.labelVisibility = false;\n          layer.hideLabel();\n        }\n      }\n      if (layer.id) {\n        this._emitLayerEvent('layer:label:toggle', layer.id, layer);\n      }\n    }\n    return status;\n  }\n\n  /**\n   * Mark the layer as selected.\n   * If the adapter is a vector layer and supports data selection,\n   * you can pass a callback function to specify which data will be selected.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.selectLayer(layer, ({feature}) => feature.id === '42');\n   * });\n   * ```\n\n   */\n  selectLayer(layerDef: LayerDef, findFeatureFun?: DataLayerFilter): void {\n    const layer = this.getLayer(layerDef);\n    if (layer) {\n      const adapter = layer as VectorLayerAdapter;\n      if (adapter && adapter.select) {\n        adapter.select(findFeatureFun);\n      }\n      const layerId = this.getLayerId(layer);\n      if (layerId) {\n        this._selectedLayers.push(layerId);\n      }\n    }\n  }\n\n  /**\n   * Unselect the given layer.\n   * If the adapter is a vector layer and supports data selection,\n   * you can pass a callback function to specify which data will be unselected.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.unSelectLayer(layer, ({feature}) => feature.id === '42');\n   * });\n   * ```\n   *\n   */\n  unSelectLayer(layerDef: LayerDef, findFeatureFun?: DataLayerFilter): void {\n    const layer = this.getLayer(layerDef);\n    if (layer) {\n      const adapter = layer && (layer as VectorLayerAdapter);\n      if (adapter.unselect) {\n        adapter.unselect(findFeatureFun);\n      }\n      const layerId = this.getLayerId(layer);\n      if (layerId) {\n        const index = this._selectedLayers.indexOf(layerId);\n        if (index !== -1) {\n          this._selectedLayers.splice(index, 1);\n        }\n      }\n    }\n  }\n  /** Remove selection from any selected selectable layer */\n  unSelectLayers(): void {\n    const layers = Object.values(this.allLayers());\n    let l: VectorLayerAdapter;\n    for (l of layers) {\n      if (l.unselect) {\n        l.unselect();\n      }\n    }\n  }\n\n  /**\n   * Hide features from a vector layer using a callback function.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.filterLayer(layer, ({feature}) => feature.id === '42');\n   * });\n   * ```\n   *\n   */\n  filterLayer(\n    layerDef: LayerDef,\n    filter: DataLayerFilter<Feature, L>,\n  ): LayerDefinition<Feature, L>[] {\n    const layer = this.getLayer(layerDef);\n    const adapter = layer as VectorLayerAdapter;\n    if (adapter.filter) {\n      return adapter.filter(filter);\n    }\n    return [];\n  }\n\n  propertiesFilter(\n    layerDef: LayerDef,\n    filters: PropertiesFilter,\n    options?: FilterOptions,\n  ): Promise<void> {\n    const layer = this.getLayer(layerDef);\n    if (layer) {\n      const adapter = layer as VectorLayerAdapter;\n      if (adapter.propertiesFilter) {\n        return adapter.propertiesFilter(filters, options);\n      } else if (adapter.filter) {\n        this.filterLayer(adapter, (e) => {\n          if (e.feature && e.feature.properties) {\n            return propertiesFilter(e.feature.properties, filters);\n          }\n          return true;\n        });\n      }\n    }\n    return Promise.resolve();\n  }\n\n  removeLayerFilter(layerDef: LayerDef): void {\n    const layer = this.getLayer(layerDef);\n    const adapter = layer as VectorLayerAdapter;\n    if (adapter.removeFilter) {\n      adapter.removeFilter();\n    } else if (adapter.filter) {\n      adapter.filter(() => {\n        return true;\n      });\n    }\n  }\n\n  /**\n   * Sets the GeoJSON data for given vector layer.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON').then((layer) => {\n   *   webMap.setLayerData(layer, geojson);\n   * });\n   * ```\n   */\n  setLayerData(layerDef: LayerDef, data: GeoJsonObject): void | Promise<void> {\n    const vectorAdapter = this.getLayer(layerDef);\n    const adapter = vectorAdapter as VectorLayerAdapter;\n    if (adapter) {\n      if (adapter.setData) {\n        return adapter.setData(data);\n      } else if (adapter.clearLayer && adapter.addData) {\n        adapter.clearLayer();\n        return adapter.addData(data);\n      }\n    }\n    return Promise.resolve();\n  }\n\n  /**\n   * Push new the GeoJSON features into given vector layer.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson_features_5}).then((layer) => {\n   *   console.log(layer.getLayers().length) // > 5;\n   *   webMap.addLayerData(layer, geojson_features_3);\n   *   console.log(layer.getLayers().length) // > 8;\n   * });\n   * ```\n   */\n  addLayerData(layerDef: LayerDef, data: GeoJsonObject): void {\n    const layerMem = this.getLayer(layerDef);\n    const adapter = layerMem as VectorLayerAdapter;\n    if (adapter.addData) {\n      adapter.addData(data);\n    }\n  }\n\n  /**\n   * Remove from vector layer all features.\n   * it is possible to remove only some objects if you specify a callback function.\n   *\n   * @example\n   * ```javascript\n   * const layer = webMap.addLayer('GEOJSON', {data: geojson}).then((layer) => {\n   *   webMap.clearLayerData(layer, (feture) => feture.id === 42);\n   *   webMap.clearLayerData(layer);\n   * });\n   * ```\n   */\n  clearLayerData(layerDef: LayerDef, cb?: (feature: Feature) => boolean): void {\n    const layerMem = this.getLayer(layerDef);\n    const adapter = layerMem as VectorLayerAdapter;\n    if (adapter && adapter.clearLayer) {\n      adapter.clearLayer(cb);\n    }\n  }\n\n  setLayerPaint(layerDef: LayerDef, paint?: Paint | null): void {\n    const layer = this.getLayer(layerDef);\n    if (paint && layer && layer.setPaint) {\n      layer.setPaint(paint);\n    }\n  }\n  setLayerSelectedPaint(layerDef: LayerDef, paint?: Paint | null): void {\n    const layer = this.getLayer(layerDef);\n    if (paint && layer && layer.setSelectedPaint) {\n      layer.setSelectedPaint(paint);\n    }\n  }\n  updateLayerPaint(layerDef: LayerDef, paint: Partial<Paint>): void {\n    const layer = this.getLayer(layerDef);\n    if (paint && layer && layer.updatePaint) {\n      layer.updatePaint(paint);\n    }\n  }\n  updateLayerSelectedPaint(layerDef: LayerDef, paint: Partial<Paint>): void {\n    const layer = this.getLayer(layerDef);\n    if (paint && layer && layer.updateSelectedPaint) {\n      layer.updateSelectedPaint(paint);\n    }\n  }\n\n  getAttributions(options: GetAttributionsOptions): string[] {\n    const attributions: string[] = [];\n    for (const l in this._layers) {\n      const layerCache = this._layers[l];\n      const onlyVisible =\n        options.onlyVisible !== undefined ? options.onlyVisible : true;\n      let useLayerAttr = onlyVisible ? layerCache.options.visibility : true;\n      if (useLayerAttr && options.onlyBaselayer) {\n        useLayerAttr = this._baselayers.includes(l);\n      }\n      if (useLayerAttr) {\n        const attr = layerCache.options && layerCache.options.attribution;\n        if (attr) {\n          attributions.push(attr);\n        }\n      }\n    }\n\n    return attributions;\n  }\n\n  getActiveBaseLayer(): MainLayerAdapter<M, any, AdapterOptions> | undefined {\n    const visibleLayerBaseLayer = this.getBaseLayers().find((x) => {\n      return this.isLayerVisible(x);\n    });\n    if (visibleLayerBaseLayer) {\n      return this.getLayer(visibleLayerBaseLayer);\n    }\n  }\n\n  addTileJsonLayer(\n    tileJson: TileJson,\n  ): Promise<MainLayerAdapter<M, any, TileAdapterOptions>> {\n    // if (this.mapAdapter.createTileJsonlayer) {\n    // } else {\n\n    const url = tileJson.tiles[0];\n    return this.addLayer('TILE', {\n      url,\n      maxZoom: tileJson.maxzoom,\n      minZoom: tileJson.minzoom,\n      subdomains: tileJson.scheme,\n      attribution: tileJson.attribution,\n    }) as Promise<MainLayerAdapter<M, any, TileAdapterOptions>>;\n  }\n\n  /** @internal */\n  _emitLayerEvent(name: keyof E, id: string, options?: unknown) {\n    const name_ = String(name);\n    if (defined(id) && name_.startsWith('layer:')) {\n      const specificLayerName = name_.replace('layer:', 'layer-' + id + ':');\n      // @ts-ignore can't paste template literal key for interface\n      this.emitter.emit(specificLayerName, options);\n    }\n    // @ts-ignore\n    this.emitter.emit(name, options);\n  }\n\n  private async _onLayerClick(options: OnLayerMouseOptions) {\n    const id = options.layer.id;\n    this._emitLayerEvent('layer:click', id || '', options);\n    return Promise.resolve(options);\n  }\n\n  private async _onLayerSelect(options: OnLayerSelectOptions) {\n    this._emitLayerEvent('layer:select', options.layer.id || '', options);\n    return Promise.resolve(options);\n  }\n\n  private _updateGeoJsonOptions(options: GeoJsonAdapterOptions) {\n    const {\n      onSelect,\n      onLayerSelect,\n      onClick,\n      onLayerClick,\n      onMouseOut,\n      onMouseOver,\n    } = options;\n    const onLayerClickFromOpt = onClick || onLayerClick;\n    options.onClick = (e) => {\n      if (onLayerClickFromOpt) {\n        onLayerClickFromOpt(e);\n      }\n      return this._onLayerClick(e);\n    };\n\n    options.onMouseOut = (e) => {\n      const id = e.layer.id;\n      onMouseOut && onMouseOut(e);\n      if (defined(id)) {\n        this._emitLayerEvent(`layer:mouseout`, id, e);\n      }\n    };\n\n    options.onMouseOver = (e) => {\n      const id = e.layer.id;\n      onMouseOver && onMouseOver(e);\n      if (defined(id)) {\n        this._emitLayerEvent(`layer:mouseover`, id, e);\n      }\n    };\n\n    // TODO: remove backward compatibility for onLayerSelect\n    const onLayerSelectFromOpt = onSelect || onLayerSelect;\n    options.onSelect = (e) => {\n      if (onLayerSelectFromOpt) {\n        onLayerSelectFromOpt(e);\n      }\n      return this._onLayerSelect(e);\n    };\n\n    if (!options.nativePaint) {\n      if (this.options.paint) {\n        options.paint = preparePaint({\n          paint: options.paint || {},\n          defaultPaint: this.options.paint,\n          getPaintFunctions: this.getPaintFunctions,\n        });\n      }\n      if (options.selectedPaint && this.options.selectedPaint) {\n        options.selectedPaint = preparePaint({\n          paint: options.selectedPaint,\n          defaultPaint: this.options.selectedPaint,\n          getPaintFunctions: this.getPaintFunctions,\n        });\n      }\n    }\n  }\n}\n","import { WebMapLayers } from './WebMapLayers';\nimport { createToggleControl } from './components/controls/createToggleControl';\n\nimport type { WebMapMain } from './WebMapMain';\nimport type { WebMapEvents } from './interfaces/Events';\nimport type { ControlPosition } from './interfaces/MapAdapter';\nimport type {\n  ButtonControlOptions,\n  CreateControlOptions,\n  MapControl,\n  MapControls,\n  ToggleControl,\n  ToggleControlOptions,\n} from './interfaces/MapControl';\nimport type { MapOptions } from './interfaces/MapOptions';\n\n/**\n * Collection of methods for managing map controls\n */\nexport class WebMapControls<\n    M = any,\n    L = any,\n    C extends object = any,\n    E extends WebMapEvents = WebMapEvents,\n    O extends MapOptions = MapOptions,\n  >\n  extends WebMapLayers<M, L, E, O>\n  implements WebMapLayers, WebMapMain\n{\n  static controls: {\n    [name: string]: (webMap: WebMapControls, options?: any) => any;\n  } = {\n    CONTROL: (\n      webMap: WebMapControls,\n      options: {\n        control: MapControl;\n        options?: CreateControlOptions;\n      },\n    ) => {\n      return webMap.createControl(options.control, options.options);\n    },\n    BUTTON: (webMap: WebMapControls, options: ButtonControlOptions) => {\n      return webMap.createButtonControl(options);\n    },\n    TOGGLE: (webMap: WebMapControls, options: ToggleControlOptions) => {\n      return webMap.createToggleControl(options);\n    },\n  };\n\n  private _loadControlQueue: {\n    [key in ControlPosition]: (() => Promise<any>)[];\n  } = {\n    'top-right': [],\n    'bottom-right': [],\n    'top-left': [],\n    'bottom-left': [],\n  };\n  private _isControlLoading: { [key in ControlPosition]: boolean } = {\n    'top-right': false,\n    'bottom-right': false,\n    'top-left': false,\n    'bottom-left': false,\n  };\n\n  async addControl<K extends keyof MapControls>(\n    controlDef: K | C,\n    position: ControlPosition,\n    options?: MapControls[K],\n  ): Promise<any> {\n    let control: C | undefined;\n    position = position ?? 'top-left';\n    if (typeof controlDef === 'string') {\n      control = this.getControl(controlDef, options);\n    } else {\n      control = controlDef as C;\n    }\n    if (control) {\n      return new Promise<() => Promise<any>>((resolve) => {\n        const promise = async () => {\n          const _control = await control;\n          const c = this.mapAdapter.addControl(_control, position);\n          resolve(c);\n        };\n        this._setControlQueue(position, promise);\n      });\n    }\n  }\n\n  /**\n   * Creating a universal map layout control element. Can be used with any map adapter.\n   *\n   * @example\n   * ```javascript\n   * const control = webMap.createControl({\n   *   onAdd() {\n   *     return document.createElement('div');\n   *   }\n   * });\n   * ```\n   */\n  async createControl(\n    control: MapControl,\n    options?: CreateControlOptions,\n  ): Promise<C | undefined> {\n    await this.onLoad('build-map');\n    if (this.mapAdapter.createControl) {\n      return this.mapAdapter.createControl(control, options);\n    }\n  }\n\n  async createButtonControl(\n    options: ButtonControlOptions,\n  ): Promise<C | undefined> {\n    await this.onLoad('build-map');\n    if (this.mapAdapter.createButtonControl) {\n      return this.mapAdapter.createButtonControl(options);\n    }\n  }\n\n  /**\n   * Create any toggler control button\n   * @param options - Options for control layout customization and assigning a callback function\n   *\n   * @example\n   * ```javascript\n   * const toggleControl = ngwMap.createToggleControl({\n   *   getStatus: () => webMap.isLayerVisible('any-layer-id'),\n   *   onClick: (status) => ngwMap.toggleLayer('webmap', status),\n   *   html: {\n   *     on: 'ON',\n   *     off: 'OFF'\n   *   },\n   *   title: 'Toggle layer visibility'\n   * });\n   * webMap.addControl(toggleControl, 'top-right');\n   * ```\n   * {@link http://code.nextgis.com/demo-examples-toggle-control | Toggle button control example}\n   */\n  async createToggleControl(\n    options: ToggleControlOptions,\n  ): Promise<(C & ToggleControl) | undefined> {\n    await this.onLoad('build-map');\n    if (this.mapAdapter.createToggleControl) {\n      return this.mapAdapter.createToggleControl(options);\n    } else {\n      if (this.mapAdapter.createButtonControl) {\n        return createToggleControl<C>(\n          this.mapAdapter.createButtonControl,\n          options,\n        );\n      }\n    }\n  }\n\n  /**\n   *\n   * @param control - Instance of WEB-GIS framework control.\n   *                  What is returned by the {@link createControl | create} method\n   */\n  removeControl(control: C): void {\n    if ('remove' in control) {\n      // @ts-ignore TODO: ugly code, rewrite\n      control.remove();\n    } else if (this.mapAdapter.removeControl) {\n      Promise.resolve(control).then((c) => {\n        this.mapAdapter.removeControl(c);\n      });\n    }\n  }\n\n  /**\n   * Get instance of registered control\n   * @param control - Any registered control string name\n   * @param options - Custom control options\n   */\n  getControl<K extends keyof MapControls>(\n    control: K,\n    options?: MapControls[K],\n  ): C | undefined {\n    const engine = this.mapAdapter.controlAdapters[control];\n    if (engine) {\n      return new engine(options);\n    } else {\n      const createFun = WebMapControls.controls[control];\n      if (createFun) {\n        return createFun(this, options);\n      }\n    }\n  }\n\n  getControlContainer(): HTMLElement | undefined {\n    if (this.mapAdapter.getControlContainer) {\n      return this.mapAdapter.getControlContainer();\n    }\n  }\n\n  private _setControlQueue(position: ControlPosition, cb: () => Promise<any>) {\n    this._loadControlQueue[position].push(cb);\n    if (!this._isControlLoading[position]) {\n      this._applyControls(position);\n    }\n  }\n\n  private async _applyControls(position: ControlPosition) {\n    if (this._loadControlQueue[position].length) {\n      this._isControlLoading[position] = true;\n      const controlCb = this._loadControlQueue[position][0];\n      await controlCb();\n      this._loadControlQueue[position].splice(0, 1);\n      this._applyControls(position);\n    } else {\n      this._isControlLoading[position] = false;\n    }\n  }\n}\n","import type {\n  ButtonControlOptions,\n  ToggleControl,\n  ToggleControlOptions,\n} from '../../interfaces/MapControl';\n\n/**\n * The toggle is a button with status.\n * @internal\n */\nexport function createToggleControl<C = any>(\n  createButtonControl: (options: ButtonControlOptions) => C,\n  options: ToggleControlOptions,\n): C & ToggleControl {\n  const link = document.createElement('div');\n\n  let status = false;\n  if (options.getStatus) {\n    status = options.getStatus();\n  } else if (options.status) {\n    status = options.status;\n  }\n\n  const title = options.title || '';\n  const html = options.html;\n\n  function setTitle() {\n    if (title) {\n      if (typeof title === 'string') {\n        link.title = title;\n      } else {\n        link.title = status ? title.on : title.off;\n      }\n      link.setAttribute('aria-label', link.title);\n    }\n  }\n  setTitle();\n\n  // DomEvent.disableClickPropagation(link);\n  // DomEvent.on(link, 'click', DomEvent.stop);\n\n  function _setHtml(htmlDef: string | HTMLElement) {\n    if (htmlDef instanceof HTMLElement) {\n      link.innerHTML = '';\n      link.appendChild(htmlDef);\n    } else if (typeof htmlDef === 'string') {\n      link.innerHTML = htmlDef;\n    }\n  }\n  function setHtml() {\n    if (html) {\n      if (typeof html === 'string' || html instanceof HTMLElement) {\n        _setHtml(html);\n      } else {\n        _setHtml(status ? html.on : html.off);\n      }\n      link.setAttribute('aria-label', link.title);\n    }\n  }\n  setHtml();\n\n  function _setClass(addClass: string, impact: boolean) {\n    addClass.split(' ').forEach((x) => {\n      if (impact) {\n        link.classList.add(x);\n      } else {\n        link.classList.remove(x);\n      }\n    });\n  }\n\n  function setClass() {\n    if (options.addClassOn) {\n      _setClass(options.addClassOn, status);\n    }\n    if (options.addClassOff) {\n      _setClass(options.addClassOff, !status);\n    }\n  }\n\n  if (options.addClass) {\n    _setClass(options.addClass, true);\n  }\n  setClass();\n\n  const changeStatus = (status_?: boolean) => {\n    if (status_ !== undefined) {\n      status = status_;\n    }\n    setHtml();\n    setTitle();\n    setClass();\n  };\n\n  const onClick = (status_?: boolean) => {\n    status = status_ !== undefined ? status_ : !status;\n    if (options.onClick) {\n      const afterClick = options.onClick(status);\n      Promise.resolve(afterClick)\n        .then(() => changeStatus())\n        .catch(() => (status = !status));\n    } else {\n      changeStatus();\n    }\n  };\n\n  const buttonControl = createButtonControl({\n    html: link,\n    onClick,\n  }) as C & ToggleControl;\n  buttonControl.onClick = onClick;\n  buttonControl.changeStatus = changeStatus;\n  return buttonControl;\n}\n","import type { WebMap } from './WebMap';\n\nconst WEB_MAP_CONTAINER: Record<number, any> = {};\n\nexport function getWebMap<T extends WebMap = WebMap>(id: number): T {\n  return WEB_MAP_CONTAINER[id];\n}\n\nexport function setWebMap(id: number, webMap: WebMap) {\n  WEB_MAP_CONTAINER[id] = webMap;\n}\n","/**\n * @privateRemarks\n * Since it was not possible to split the code through mixins, inheritance was used.\n * The `ts-mixin` plugin worked fine, but led to errors in IE.\n *\n * Now inheritance is as follow:\n * BaseWebMap \\> WebMapLayers \\> WebMap\n *\n * Will need to be done this way:\n * ```javascript\n * class WebMap extend mixin(WebMapLayers, WebMapControls) {}\n * ```\n *\n * This approach can also be considered\n * ```javascript\n * class WebMap {\n *   layers: WebMapLayers;\n *   controls  WebMapControls\n * }\n * ```\n * and then\n *\n * const webMap = new WebMap(...);\n * webMap.layers.addLayer(...)\n *\n * looks good, but will add difficulty in inheriting from WebMap\n *\n * old:\n * ```javascript\n * class NgwMap extends WebMap {\n *   addLayer(...) {\n *      super.addLayer(...)\n *   }\n * }\n * ```\n * new:\n * ```javascript\n * class NgwLayers extends WebMapLayers {\n *   addLayer(...) {\n *     super.addLayer(...)\n *   }\n * }\n *\n * class NgwMap extends WebMap {\n *   layersClass = NgwLayers\n * }\n * ```\n * ...and there will be compatibility issues\n */\n\nimport { WebMapControls } from './WebMapControls';\nimport { getWebMap, setWebMap } from './container';\n\nimport type { WebMapLayers } from './WebMapLayers';\nimport type { WebMapMain } from './WebMapMain';\nimport type { WebMapEvents } from './interfaces/Events';\nimport type { ControlOptions } from './interfaces/MapControl';\nimport type { MapOptions } from './interfaces/MapOptions';\n\n/**\n * The core component for managing map adapters.\n * It contains methods for adding and manipulation with\n * {@link WebMapMain | map}, {@link WebMapLayers | layers} and {@link WebMapControls | controls}.\n *\n * @example\n * ```javascript\n * import { WebMap } from '@nextgis/webmap';\n * import MapAdapter from '@nextgis/ol-map-adapter';\n *\n * const webMap = new WebMap({\n *   mapAdapter: new MapAdapter(),\n *   target: 'map',\n * });\n * ```\n *\n * @typeParam M - Interactive Map used in the adapter\n * @typeParam L - Layer\n * @typeParam C - Control\n * @typeParam E - Events\n *\n */\nexport class WebMap<\n    M = any,\n    L = any,\n    C extends object = any,\n    E extends WebMapEvents = WebMapEvents,\n    O extends MapOptions = MapOptions,\n  >\n  extends WebMapControls<M, L, C, E, O>\n  implements WebMapControls, WebMapLayers, WebMapMain\n{\n  constructor(mapOptions: O) {\n    super(mapOptions);\n    this._addControls();\n    setWebMap(this.id, this);\n  }\n\n  static get<T extends WebMap = WebMap>(id: number): T {\n    return getWebMap<T>(id);\n  }\n\n  /**\n   * @internal\n   */\n  protected async _addLayerProviders(): Promise<void> {\n    for await (const kit of this._starterKits) {\n      if (kit.getLayerAdapters) {\n        const adapters = await kit.getLayerAdapters.call(kit);\n        if (adapters) {\n          for await (const adapter of adapters) {\n            const newAdapter = await adapter.createAdapter(this);\n            if (newAdapter) {\n              this.mapAdapter.layerAdapters[adapter.name] = newAdapter;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * @internal\n   */\n  protected async _onLoadSync(): Promise<void> {\n    for await (const kit of this._starterKits) {\n      if (kit.onLoadSync) {\n        try {\n          await kit.onLoadSync.call(kit, this);\n        } catch (er) {\n          console.error(er);\n        }\n      }\n    }\n  }\n\n  private _addControls(): void {\n    if (this.options.controls) {\n      this.options.controls.forEach((x) => {\n        let controlAdapterName = x;\n        let controlOptions: ControlOptions = {};\n        if (typeof x === 'string' && this.options.controlsOptions) {\n          if (this.options.controlsOptions[x]) {\n            controlOptions = this.options.controlsOptions[x];\n            if (controlOptions.control !== undefined) {\n              controlAdapterName = controlOptions.control;\n            }\n          }\n        }\n        const { position, ...options } = controlOptions;\n        this.addControl(controlAdapterName, position || 'top-left', options);\n      });\n    }\n    this._emitStatusEvent('controls:create');\n  }\n}\n","export function getDefaultControls(): string[] {\n  return ['ZOOM', 'ATTRIBUTION'];\n}\n","var map = {\n\t\"./af\": 2786,\n\t\"./af.js\": 2786,\n\t\"./ar\": 867,\n\t\"./ar-dz\": 4130,\n\t\"./ar-dz.js\": 4130,\n\t\"./ar-kw\": 6135,\n\t\"./ar-kw.js\": 6135,\n\t\"./ar-ly\": 6440,\n\t\"./ar-ly.js\": 6440,\n\t\"./ar-ma\": 7702,\n\t\"./ar-ma.js\": 7702,\n\t\"./ar-ps\": 315,\n\t\"./ar-ps.js\": 315,\n\t\"./ar-sa\": 6040,\n\t\"./ar-sa.js\": 6040,\n\t\"./ar-tn\": 7100,\n\t\"./ar-tn.js\": 7100,\n\t\"./ar.js\": 867,\n\t\"./az\": 1083,\n\t\"./az.js\": 1083,\n\t\"./be\": 9808,\n\t\"./be.js\": 9808,\n\t\"./bg\": 8338,\n\t\"./bg.js\": 8338,\n\t\"./bm\": 7438,\n\t\"./bm.js\": 7438,\n\t\"./bn\": 8905,\n\t\"./bn-bd\": 6225,\n\t\"./bn-bd.js\": 6225,\n\t\"./bn.js\": 8905,\n\t\"./bo\": 1560,\n\t\"./bo.js\": 1560,\n\t\"./br\": 1278,\n\t\"./br.js\": 1278,\n\t\"./bs\": 622,\n\t\"./bs.js\": 622,\n\t\"./ca\": 2468,\n\t\"./ca.js\": 2468,\n\t\"./cs\": 5822,\n\t\"./cs.js\": 5822,\n\t\"./cv\": 877,\n\t\"./cv.js\": 877,\n\t\"./cy\": 7373,\n\t\"./cy.js\": 7373,\n\t\"./da\": 4780,\n\t\"./da.js\": 4780,\n\t\"./de\": 9740,\n\t\"./de-at\": 217,\n\t\"./de-at.js\": 217,\n\t\"./de-ch\": 894,\n\t\"./de-ch.js\": 894,\n\t\"./de.js\": 9740,\n\t\"./dv\": 5300,\n\t\"./dv.js\": 5300,\n\t\"./el\": 837,\n\t\"./el.js\": 837,\n\t\"./en-au\": 8348,\n\t\"./en-au.js\": 8348,\n\t\"./en-ca\": 7925,\n\t\"./en-ca.js\": 7925,\n\t\"./en-gb\": 2243,\n\t\"./en-gb.js\": 2243,\n\t\"./en-ie\": 6436,\n\t\"./en-ie.js\": 6436,\n\t\"./en-il\": 7207,\n\t\"./en-il.js\": 7207,\n\t\"./en-in\": 4175,\n\t\"./en-in.js\": 4175,\n\t\"./en-nz\": 6319,\n\t\"./en-nz.js\": 6319,\n\t\"./en-sg\": 1662,\n\t\"./en-sg.js\": 1662,\n\t\"./eo\": 2915,\n\t\"./eo.js\": 2915,\n\t\"./es\": 5655,\n\t\"./es-do\": 5251,\n\t\"./es-do.js\": 5251,\n\t\"./es-mx\": 6112,\n\t\"./es-mx.js\": 6112,\n\t\"./es-us\": 1146,\n\t\"./es-us.js\": 1146,\n\t\"./es.js\": 5655,\n\t\"./et\": 5603,\n\t\"./et.js\": 5603,\n\t\"./eu\": 7763,\n\t\"./eu.js\": 7763,\n\t\"./fa\": 6959,\n\t\"./fa.js\": 6959,\n\t\"./fi\": 1897,\n\t\"./fi.js\": 1897,\n\t\"./fil\": 2549,\n\t\"./fil.js\": 2549,\n\t\"./fo\": 4694,\n\t\"./fo.js\": 4694,\n\t\"./fr\": 4470,\n\t\"./fr-ca\": 3049,\n\t\"./fr-ca.js\": 3049,\n\t\"./fr-ch\": 2330,\n\t\"./fr-ch.js\": 2330,\n\t\"./fr.js\": 4470,\n\t\"./fy\": 5044,\n\t\"./fy.js\": 5044,\n\t\"./ga\": 9295,\n\t\"./ga.js\": 9295,\n\t\"./gd\": 2101,\n\t\"./gd.js\": 2101,\n\t\"./gl\": 8794,\n\t\"./gl.js\": 8794,\n\t\"./gom-deva\": 7884,\n\t\"./gom-deva.js\": 7884,\n\t\"./gom-latn\": 3168,\n\t\"./gom-latn.js\": 3168,\n\t\"./gu\": 5349,\n\t\"./gu.js\": 5349,\n\t\"./he\": 4206,\n\t\"./he.js\": 4206,\n\t\"./hi\": 94,\n\t\"./hi.js\": 94,\n\t\"./hr\": 316,\n\t\"./hr.js\": 316,\n\t\"./hu\": 2138,\n\t\"./hu.js\": 2138,\n\t\"./hy-am\": 1423,\n\t\"./hy-am.js\": 1423,\n\t\"./id\": 9218,\n\t\"./id.js\": 9218,\n\t\"./is\": 135,\n\t\"./is.js\": 135,\n\t\"./it\": 626,\n\t\"./it-ch\": 150,\n\t\"./it-ch.js\": 150,\n\t\"./it.js\": 626,\n\t\"./ja\": 9183,\n\t\"./ja.js\": 9183,\n\t\"./jv\": 4286,\n\t\"./jv.js\": 4286,\n\t\"./ka\": 2105,\n\t\"./ka.js\": 2105,\n\t\"./kk\": 7772,\n\t\"./kk.js\": 7772,\n\t\"./km\": 7766,\n\t\"./km.js\": 7766,\n\t\"./kn\": 9282,\n\t\"./kn.js\": 9282,\n\t\"./ko\": 3730,\n\t\"./ko.js\": 3730,\n\t\"./ku\": 1408,\n\t\"./ku-kmr\": 563,\n\t\"./ku-kmr.js\": 563,\n\t\"./ku.js\": 1408,\n\t\"./ky\": 3291,\n\t\"./ky.js\": 3291,\n\t\"./lb\": 6841,\n\t\"./lb.js\": 6841,\n\t\"./lo\": 5466,\n\t\"./lo.js\": 5466,\n\t\"./lt\": 7010,\n\t\"./lt.js\": 7010,\n\t\"./lv\": 7595,\n\t\"./lv.js\": 7595,\n\t\"./me\": 9861,\n\t\"./me.js\": 9861,\n\t\"./mi\": 5493,\n\t\"./mi.js\": 5493,\n\t\"./mk\": 5966,\n\t\"./mk.js\": 5966,\n\t\"./ml\": 7341,\n\t\"./ml.js\": 7341,\n\t\"./mn\": 5115,\n\t\"./mn.js\": 5115,\n\t\"./mr\": 370,\n\t\"./mr.js\": 370,\n\t\"./ms\": 9847,\n\t\"./ms-my\": 1237,\n\t\"./ms-my.js\": 1237,\n\t\"./ms.js\": 9847,\n\t\"./mt\": 2126,\n\t\"./mt.js\": 2126,\n\t\"./my\": 6165,\n\t\"./my.js\": 6165,\n\t\"./nb\": 4924,\n\t\"./nb.js\": 4924,\n\t\"./ne\": 6744,\n\t\"./ne.js\": 6744,\n\t\"./nl\": 3901,\n\t\"./nl-be\": 9814,\n\t\"./nl-be.js\": 9814,\n\t\"./nl.js\": 3901,\n\t\"./nn\": 3877,\n\t\"./nn.js\": 3877,\n\t\"./oc-lnc\": 2135,\n\t\"./oc-lnc.js\": 2135,\n\t\"./pa-in\": 5858,\n\t\"./pa-in.js\": 5858,\n\t\"./pl\": 4495,\n\t\"./pl.js\": 4495,\n\t\"./pt\": 9520,\n\t\"./pt-br\": 7971,\n\t\"./pt-br.js\": 7971,\n\t\"./pt.js\": 9520,\n\t\"./ro\": 6459,\n\t\"./ro.js\": 6459,\n\t\"./ru\": 1793,\n\t\"./ru.js\": 1793,\n\t\"./sd\": 950,\n\t\"./sd.js\": 950,\n\t\"./se\": 490,\n\t\"./se.js\": 490,\n\t\"./si\": 124,\n\t\"./si.js\": 124,\n\t\"./sk\": 4249,\n\t\"./sk.js\": 4249,\n\t\"./sl\": 4985,\n\t\"./sl.js\": 4985,\n\t\"./sq\": 1104,\n\t\"./sq.js\": 1104,\n\t\"./sr\": 9131,\n\t\"./sr-cyrl\": 9915,\n\t\"./sr-cyrl.js\": 9915,\n\t\"./sr.js\": 9131,\n\t\"./ss\": 5893,\n\t\"./ss.js\": 5893,\n\t\"./sv\": 8760,\n\t\"./sv.js\": 8760,\n\t\"./sw\": 1172,\n\t\"./sw.js\": 1172,\n\t\"./ta\": 7333,\n\t\"./ta.js\": 7333,\n\t\"./te\": 3110,\n\t\"./te.js\": 3110,\n\t\"./tet\": 2095,\n\t\"./tet.js\": 2095,\n\t\"./tg\": 7321,\n\t\"./tg.js\": 7321,\n\t\"./th\": 9041,\n\t\"./th.js\": 9041,\n\t\"./tk\": 9005,\n\t\"./tk.js\": 9005,\n\t\"./tl-ph\": 5768,\n\t\"./tl-ph.js\": 5768,\n\t\"./tlh\": 9444,\n\t\"./tlh.js\": 9444,\n\t\"./tr\": 2397,\n\t\"./tr.js\": 2397,\n\t\"./tzl\": 8254,\n\t\"./tzl.js\": 8254,\n\t\"./tzm\": 1106,\n\t\"./tzm-latn\": 699,\n\t\"./tzm-latn.js\": 699,\n\t\"./tzm.js\": 1106,\n\t\"./ug-cn\": 9288,\n\t\"./ug-cn.js\": 9288,\n\t\"./uk\": 7691,\n\t\"./uk.js\": 7691,\n\t\"./ur\": 3795,\n\t\"./ur.js\": 3795,\n\t\"./uz\": 6791,\n\t\"./uz-latn\": 588,\n\t\"./uz-latn.js\": 588,\n\t\"./uz.js\": 6791,\n\t\"./vi\": 9822,\n\t\"./vi.js\": 9822,\n\t\"./x-pseudo\": 4378,\n\t\"./x-pseudo.js\": 4378,\n\t\"./yo\": 5805,\n\t\"./yo.js\": 5805,\n\t\"./zh-cn\": 3839,\n\t\"./zh-cn.js\": 3839,\n\t\"./zh-hk\": 5726,\n\t\"./zh-hk.js\": 5726,\n\t\"./zh-mo\": 9913,\n\t\"./zh-mo.js\": 9913,\n\t\"./zh-tw\": 4152,\n\t\"./zh-tw.js\": 4152\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 6700;"],"names":["KeyCodes","constructor","_defineProperty","StateItem","webMap","opt","value","this","setValue","name","event","getValue","val","CenterState","arguments","getCenter","setCenter","toString","data","d","map","x","toFixed","parse","str","split","Number","ZoomState","zoom","getZoom","undefined","Math","round","setZoom","String","ID","OPTIONS","minZoom","maxZoom","paint","color","opacity","strokeOpacity","stroke","radius","weight","selectedPaint","create","WebMapMain","mapOptions","EventEmitter","keys","getPaintFunctions","mapAdapter","_starterKits","starterKits","options","deepmerge","runtimeParams","_addEventsListeners","tileJson","_setTileJsonOptions","getId","id","async","getEventStatus","_setInitMapState","mapState","_setupMap","_emitStatusEvent","setRuntimeParams","params","push","destroy","_removeEventListeners","obj","member","clearObject","getState","state","_mapState","forEach","getRuntimeParams","r","get","getContainer","target","HTMLElement","element","document","getElementById","setCursor","cursor","getCursor","container","style","lngLat","getBounds","getBoundsPolygon","bounds","getBoundsFeature","zoomIn","toZoom","zoomOut","setView","lngLatOrOpt","Array","isArray","defined","viewOpt","fitBounds","every","_eventName","status","_eventsStatus","onLoad","length","Promise","res","emitter","once","onMapLoad","cb","_this$mapAdapter$isLo","_resolve","isLoaded","getLayerAdapters","layerAdapters","getLayerAdapter","locate","events","stop","stopGetCoordFromMapClick","_coordFromMapClickPromise","cancel","getCoordFromMapClick","CancelablePromise","resolve","reject","onCancel","include","onCancel_","off","onMapClick","e","deprecatedMapClick","eventName","emit","Error","_zoomToInitialExtent","_addLayerProviders","_onLoadSync","center","maxzoom","minzoom","_extent","states","X","_initMapState","Object","defineProperty","configurable","enumerable","filter","includes","_mapEvents","mapStatusEvent","find","y","set","mapEvent","on","entries","_ref","removeListener","findMostFrequentGeomType","arr","counts","fry","maxName","c","count","_windowOnFocus","windowOnFocus","bind","_keysPressed","keysPressed","_keysReleased","keysReleased","addKeyboardEventsListener","pressed","keyName","code","keyCodeAlias","window","addEventListener","removeKeyboardEventsListener","removeEventListener","stopPropagation","keyCode","paintTypeAlias","polygon","line","point","typeAlias","Point","LineString","MultiPoint","Polygon","MultiLineString","MultiPolygon","WebMapLayers","super","addTileJsonLayer","layerDef","layer","getLayer","getExtent","extent","call","isBaseLayer","_baselayers","indexOf","getBaseLayers","baselayers","baselayer","_layers","getBaseLayersIds","getLayerId","getLayers","allLayers","orderedLayers","values","sort","a","b","order","findLayer","l","layerAdapter","isLayerVisible","visibility","adapter","addLayer","_options$visibility","_layersIdCounter","_order","reserveOrder","adapterEngine","geoJsonOptions","_updateGeoJsonOptions","onBeforeAddLayer","modified","_adapter$options$orde","_adapter","layerId","_emitLayerEvent","concat","filterLayer","showLayer","setLayerOpacity","fit","onAdded","adapterConstructorPromise","removeLayers","allowCb","allow","removeLayer","promises","getLegend","all","flat","_layersOrderCounter","removeOverlays","beforeRemove","index","splice","addGeoJsonLayer","multiselect","unselectOnSecondClick","geomType","geojson","geometry","type","features","f","geometries","g","detectGeometryType","p","isPaint","updateGeoJsonAdapterOptions","addFeatureLayer","addTileLayer","url","addImageLayer","urlOrOptions","toggleLayer","hideLayer","onMap","toStatus","silent","action","preEventName","anotherVisibleBaselayers","bl","setLayerOrder","then","updateLayer","setOpacity","isLayerLabelVisible","_layer$options$labelV","isLabelVisible","labelVisibility","showLayerLabel","toggleLayerLabel","hideLayerLabel","_status","showLabel","hideLabel","selectLayer","findFeatureFun","select","_selectedLayers","unSelectLayer","unselect","unSelectLayers","layers","propertiesFilter","filters","feature","properties","removeLayerFilter","removeFilter","setLayerData","setData","clearLayer","addData","addLayerData","clearLayerData","setLayerPaint","setPaint","setLayerSelectedPaint","setSelectedPaint","updateLayerPaint","updatePaint","updateLayerSelectedPaint","updateSelectedPaint","getAttributions","attributions","layerCache","useLayerAttr","onlyVisible","onlyBaselayer","attr","attribution","getActiveBaseLayer","visibleLayerBaseLayer","tiles","subdomains","scheme","name_","startsWith","specificLayerName","replace","onSelect","onLayerSelect","onClick","onLayerClick","onMouseOut","onMouseOver","onLayerClickFromOpt","_onLayerClick","onLayerSelectFromOpt","_onLayerSelect","nativePaint","preparePaint","defaultPaint","WebMapControls","controlDef","position","_position","control","getControl","_setControlQueue","_control","addControl","createControl","createButtonControl","createToggleControl","link","createElement","getStatus","title","html","setTitle","setAttribute","_setHtml","htmlDef","innerHTML","appendChild","setHtml","_setClass","addClass","impact","classList","add","remove","setClass","addClassOn","addClassOff","changeStatus","status_","afterClick","catch","buttonControl","removeControl","engine","controlAdapters","createFun","controls","getControlContainer","_loadControlQueue","_isControlLoading","_applyControls","controlCb","CONTROL","BUTTON","TOGGLE","WEB_MAP_CONTAINER","WebMap","_addControls","static","getWebMap","kit","adapters","newAdapter","createAdapter","onLoadSync","er","console","error","controlAdapterName","controlOptions","controlsOptions","getDefaultControls","webpackContext","req","webpackContextResolve","__webpack_require__","o","module","exports"],"sourceRoot":""}