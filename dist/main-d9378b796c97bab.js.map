{"version":3,"file":"main-d9378b796c97bab.js","mappings":"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","sources":["webpack://clear_horizon/./@nextgis/packages/url-runtime-params/src/UrlRuntimeParams.ts","webpack://clear_horizon/./@nextgis/packages/url-runtime-params/src/index.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/Clipboard.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/applyMixins.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/debounce.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/deepmerge.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/defined.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/deprecated/deprecatedMapClick.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/deprecated/deprecatedWarn.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/geom/coordTransform.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/geom/getBoundsPolygon.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/geom/constants.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/geom/getCirclePolygon.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/geom/getIdentifyRadius.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/geom/isLngLatBoundsArray.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/number/round.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/object/objectAssign.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/object/objectDeepEqual.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/object/objectRemoveEmpty.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/typeHelpers/index.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/url.ts"],"sourcesContent":["import type { RuntimeParams } from '@nextgis/webmap';\nimport type { Params, StateData } from './interfaces';\n\nexport class UrlRuntimeParams implements RuntimeParams {\n  private _params: Params = {};\n\n  get(name: string): any {\n    return this.params()[name];\n  }\n\n  params(): Record<string, string> {\n    // if (this._params) {\n    //   return this._params;\n    // }\n    const href = window.location.href.replace(/#$/, '');\n    const params: Params = {};\n    href.replace(/[?&]+(\\w+)([^&]*)/gi, function (m, key) {\n      params[key] = true;\n      return ''; // does not matter\n    });\n    href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\n      params[key] = decodeURIComponent(value);\n      return ''; // does not matter\n    });\n    this._params = params;\n    return params;\n  }\n\n  set(name: string, value: string): StateData {\n    if (value) {\n      let search: string;\n      const urlComponent = encodeURIComponent(value);\n      const existUrlParam = this.get(name);\n      if (existUrlParam) {\n        search = location.search.replace(\n          new RegExp('([?|&]' + name + '=)' + '(.+?)(&|$)'),\n          '$1' + urlComponent + '$3',\n        );\n      } else if (location.search.length) {\n        search = location.search + '&' + name + '=' + urlComponent;\n      } else {\n        search = '?' + name + '=' + urlComponent;\n      }\n      const params: Params = {};\n      params[name] = value;\n      this._params[name] = value;\n      const data: StateData = { state: { url: search, params }, url: search };\n      this._pushState(data);\n      return data;\n    } else {\n      return this.remove(name);\n    }\n  }\n\n  remove(name: string): StateData {\n    const sourceUrl = location.search;\n    let rtn = sourceUrl.split('?')[0];\n    let param: string;\n    let paramsArr: string[];\n    const queryString =\n      sourceUrl.indexOf('?') !== -1 ? sourceUrl.split('?')[1] : '';\n    if (queryString !== '') {\n      paramsArr = queryString.split('&');\n      for (let i = paramsArr.length - 1; i >= 0; i -= 1) {\n        param = paramsArr[i].split('=')[0];\n        if (param === name) {\n          paramsArr.splice(i, 1);\n        }\n      }\n      rtn = rtn + '?' + paramsArr.join('&');\n    }\n\n    delete this._params[name];\n\n    const data: StateData = { state: { url: rtn, type: 'remove' }, url: rtn };\n    this._pushState(data);\n\n    return data;\n  }\n\n  private _pushState(data: StateData): void {\n    if (history) {\n      history.replaceState(null, document.title, data.url);\n    }\n  }\n}\n","/**\n * @module url-runtime-params\n */\n\nimport { UrlRuntimeParams } from './UrlRuntimeParams';\n\nexport * from './interfaces';\n\nexport default UrlRuntimeParams;\n","export class Clipboard {\n  silent = true;\n\n  constructor(text?: string) {\n    if (text) {\n      this.copy(text);\n    }\n  }\n\n  static copy(text: string): boolean {\n    const clipboard = new Clipboard();\n    return clipboard.copy(text);\n  }\n\n  copy(text: string): boolean {\n    try {\n      if ((navigator as any).clipboard) {\n        (navigator as any).clipboard.writeText(text);\n      } else if ((window as any).clipboardData) {\n        (window as any).clipboardData.setData('text', text);\n      } else {\n        this.copyToClipboard(text);\n      }\n      !this.silent && console.log('Copied to Clipboard');\n      return true;\n    } catch (e) {\n      !this.silent && console.log('Please copy manually');\n    }\n    return false;\n  }\n\n  private copyToClipboard(text: string) {\n    const input = document.createElement('input') as HTMLInputElement;\n    input.value = text;\n    try {\n      document.body.appendChild(input);\n      this.copyNodeContentsToClipboard(input);\n    } finally {\n      document.body.removeChild(input);\n    }\n  }\n\n  private copyNodeContentsToClipboard(input: HTMLInputElement) {\n    input.select();\n    input.setSelectionRange(0, 99999); /*For mobile devices*/\n    document.execCommand('copy');\n  }\n}\n","export interface ApplyMixinOptions {\n  replace?: boolean;\n}\n\ntype Ctor = any;\n\nexport function applyMixins(\n  derivedCtor: Ctor,\n  baseCtors: Ctor[],\n  opt: ApplyMixinOptions = {},\n): void {\n  const derivedProperties = allProperties(derivedCtor.prototype);\n  const replace = opt.replace !== undefined ? opt.replace : true;\n  baseCtors.forEach((baseCtor) => {\n    Object.getOwnPropertyNames(baseCtor.prototype).forEach((name) => {\n      const isSomeProp = derivedProperties.indexOf(name) !== -1;\n      if ((!replace && !isSomeProp) || replace) {\n        const descriptor = Object.getOwnPropertyDescriptor(\n          baseCtor.prototype,\n          name,\n        );\n        if (descriptor) {\n          Object.defineProperty(derivedCtor.prototype, name, descriptor);\n        }\n      }\n    });\n  });\n}\n\nexport function allProperties(obj: Record<string, unknown>): string[] {\n  return _allProperties(obj);\n}\n\nfunction _allProperties(\n  obj: Record<string, unknown>,\n  _props: string[] = [],\n): string[] {\n  for (; obj !== null; obj = Object.getPrototypeOf(obj)) {\n    const op = Object.getOwnPropertyNames(obj);\n    for (let i = 0; i < op.length; i++) {\n      if (_props.indexOf(op[i]) == -1) {\n        _props.push(op[i]);\n      }\n    }\n  }\n  return _props;\n}\n\nexport function mixinProperties(\n  derivedCtor: Ctor,\n  baseCtor: Ctor,\n  properties: string[],\n): void {\n  properties.forEach((name) => {\n    const descriptor = Object.getOwnPropertyDescriptor(\n      baseCtor.prototype,\n      name,\n    );\n    if (descriptor) {\n      Object.defineProperty(derivedCtor.prototype, name, descriptor);\n    }\n  });\n}\n","// based on https://github.com/bvaughn/debounce-decorator\n\nexport function debounce<T extends (...args: any[]) => void>(\n  cb: T,\n  wait = 10,\n): T & { clear: () => void } {\n  let timeoutId: any;\n\n  function wrapper(this: any, ...args: any[]) {\n    wrapper.clear();\n\n    timeoutId = setTimeout(() => {\n      timeoutId = null;\n      cb.apply(this, args);\n    }, wait);\n  }\n\n  wrapper.clear = function () {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n    }\n  };\n\n  return wrapper as T & { clear: () => void };\n}\n\nexport function DebounceDecorator(wait = 10) {\n  return function (\n    target: unknown,\n    key: string,\n    descriptor: PropertyDescriptor,\n  ): PropertyDescriptor {\n    return {\n      configurable: true,\n      enumerable: descriptor.enumerable,\n      get: function getter() {\n        // Attach this function to the instance (not the class)\n        Object.defineProperty(this, key, {\n          configurable: true,\n          enumerable: descriptor.enumerable,\n          value: debounce(descriptor.value, wait),\n        });\n        // @ts-ignore\n        return this[key];\n      },\n    };\n  };\n}\n","export function deepmerge<T>(\n  x: Partial<T>,\n  y: Partial<T>,\n  mergeArray?: boolean,\n): T;\nexport function deepmerge<T1, T2>(\n  target: Partial<T1>,\n  src: Partial<T2>,\n  mergeArray = false,\n): T1 & T2 {\n  let target_ = target as any;\n  const src_ = src as any;\n  const array = Array.isArray(src_);\n  let dst: any = (array && []) || {};\n\n  if (array && Array.isArray(src_)) {\n    if (mergeArray) {\n      target_ = target_ || [];\n      dst = dst.concat(target_);\n      src_.forEach((e: any, i: number) => {\n        if (typeof dst[i] === 'undefined') {\n          dst[i] = e;\n        } else if (typeof e === 'object') {\n          dst[i] = deepmerge(target_[i], e, mergeArray);\n        } else {\n          if (target_.indexOf(e) === -1) {\n            dst.push(e);\n          }\n        }\n      });\n    } else {\n      // Replace array. Do not merge by default\n      dst = src_;\n    }\n  } else {\n    if (target_ && typeof target_ === 'object') {\n      Object.keys(target_).forEach(function (key) {\n        dst[key] = target_[key];\n      });\n    }\n    Object.keys(src_).forEach(function (key) {\n      if (typeof src_[key] !== 'object' || !src_[key]) {\n        dst[key] = src_[key];\n      } else {\n        if (typeof target_[key] === 'object' && typeof src_[key] === 'object') {\n          dst[key] = deepmerge(target_[key], src_[key], mergeArray);\n        } else {\n          dst[key] = src_[key];\n        }\n      }\n    });\n  }\n  return dst;\n}\n","/**\n * from https://github.com/CesiumGS/cesium/blob/master/Source/Core/defined.js\n *\n * @param val - The object.\n * @returns Returns true if the object is defined, returns false otherwise.\n *\n * @example\n * ```javascript\n * if (defined(positions)) {\n *   doSomething();\n * } else {\n *   doSomethingElse();\n * }\n * ```\n */\nexport function defined<T>(val: T): val is Exclude<T, null | undefined> {\n  return val !== undefined && val !== null;\n}\n\n/**\n * from https://github.com/CesiumGS/cesium/blob/master/Source/Core/defined.js\n *\n * @param val - The object.\n * @returns Returns true if the object is defined and not empty string, returns false otherwise.\n *\n * @example\n * ```javascript\n * full('foo') // true\n * full('') // false\n * full(undefined) // false\n * full(0) // true\n * ```\n */\nexport function full<T>(val: T): val is Exclude<T, null | undefined> {\n  return typeof val === 'string' ? !!val : defined(val);\n}\n","import { debugLog } from '../debug/debugLog';\n\nimport type { LatLng } from '../geom/interfaces';\nimport type { LngLatArray } from '../geom/interfaces';\n\ninterface DeprecatedMapClickEvent {\n  lngLat: LngLatArray;\n  latLng?: LatLng;\n}\n\n/**\n * @internal\n */\nexport function deprecatedMapClick<\n  T extends DeprecatedMapClickEvent = DeprecatedMapClickEvent,\n>(ev: T): T {\n  if (!ev.lngLat && ev.latLng) {\n    debugLog('deprecated use of latLng in MapClickEvent, use lngLat instead');\n    const lat = ev.latLng.lat;\n    const lng = ev.latLng.lng;\n    ev.lngLat = [lng, lat];\n  }\n  return ev;\n}\n","/** @internal */\nexport function deprecatedWarn(message: string): void {\n  console.warn(`DEPRECATED WARN: ${message}`);\n}\n","import type { LngLatArray } from './interfaces';\n\nexport function degrees2meters(lng: number, lat: number): [number, number] {\n  lat = lat > 85.06 ? 85.06 : lat < -85.06 ? -85.06 : lat;\n\n  const x = (lng * 20037508.34) / 180;\n  let y = Math.log(Math.tan(((90 + lat) * Math.PI) / 360)) / (Math.PI / 180);\n  y = (y * 20037508.34) / 180;\n  return [x, y];\n}\n\nexport function meters2degrees(x: number, y: number): LngLatArray {\n  const lon = (x * 180) / 20037508.34;\n  const lat =\n    (Math.atan(Math.exp((y * Math.PI) / 20037508.34)) * 360) / Math.PI - 90;\n  return [lon, lat];\n}\n\nexport function degrees2Radian(deg: number): number {\n  return (deg * Math.PI) / 180;\n}\n\n// export function degrees2meters2(lon: number, lat: number): [number, number] {\n//   const radius = 6378137.0;\n//   const x = (radius * lon * Math.PI) / 180.0;\n//   const y =\n//     radius * Math.log(Math.tan(Math.PI / 4.0 + (lat * Math.PI) / 360.0));\n//   return [x, y];\n// }\n\n// export function meters2degress2(x: number, y: number): LngLatArray {\n//   const radius = 6378137.0;\n//   const lon = (180 / Math.PI) * (x / radius);\n//   const lat = (360 / Math.PI) * (Math.atan(Math.exp(y / radius)) - Math.PI / 4);\n//   return [lon, lat];\n// }\n\n// const lon = -77.035974;\n// const lat = 38.898717;\n\n// console.log(degrees2meters(lon, lat), degrees2meters2(lon, lat));\n\n// const x = -8575605.398443861;\n// const y = 4707174.018280405;\n\n// console.log(meters2degress(x, y), meters2degress2(x, y));\n","import type { Feature, Polygon } from 'geojson';\nimport type { LngLatBoundsArray } from './interfaces';\n\nexport function getBoundsPolygon(b: LngLatBoundsArray): Polygon {\n  const polygon: Polygon = {\n    type: 'Polygon',\n    coordinates: [getBoundsCoordinates(b)],\n  };\n  return polygon;\n}\n\nexport function getBoundsCoordinates(b: LngLatBoundsArray): number[][] {\n  const westNorth = [b[0], b[1]];\n  const eastNorth = [b[2], b[1]];\n  const eastSouth = [b[2], b[3]];\n  const westSouth = [b[0], b[3]];\n\n  return [westNorth, eastNorth, eastSouth, westSouth, westNorth];\n}\n\nexport function getBoundsFeature(b: LngLatBoundsArray): Feature<Polygon> {\n  const feature: Feature<Polygon> = {\n    type: 'Feature',\n    properties: {},\n    geometry: getBoundsPolygon(b),\n  };\n  return feature;\n}\n","/**\n * Radius of the earth in kilometers\n */\nexport const EARTHS_RADIUS = 6371;\n","import { EARTHS_RADIUS } from './constants';\nimport type { Feature, Polygon, Position } from 'geojson';\n\nconst d2r = Math.PI / 180; // degrees to radians\nconst r2d = 180 / Math.PI; // radians to degrees\n\nexport function getCirclePolygonCoordinates(\n  lng: number,\n  lat: number,\n  /** In kilometers */\n  radius = 10,\n  points = 6,\n): Position[] {\n  // find the radius in lat/lon\n  const rlat = (radius / EARTHS_RADIUS) * r2d;\n  const rlng = rlat / Math.cos(lat * d2r);\n\n  const extp = [];\n  for (let i = 0; i < points + 1; i++) {\n    // one extra here makes sure we connect the\n\n    const theta = Math.PI * (i / (points / 2));\n    const ex = lng + rlng * Math.cos(theta); // center a + radius x * cos(theta)\n    const ey = lat + rlat * Math.sin(theta); // center b + radius y * sin(theta)\n    extp.push([ex, ey]);\n  }\n\n  return extp;\n}\n\nexport function getCircleFeature(\n  lng: number,\n  lat: number,\n  radius = 10,\n  points = 6,\n): Feature<Polygon> {\n  const polygon = getCirclePolygonCoordinates(lng, lat, radius, points);\n  const feature: Feature<Polygon> = {\n    type: 'Feature',\n    properties: {},\n    geometry: {\n      type: 'Polygon',\n      coordinates: [polygon],\n    },\n  };\n  return feature;\n}\n","import { LngLatArray } from '@nextgis/utils';\n\nexport function getIdentifyRadius(\n  center: LngLatArray,\n  zoom: number,\n  pixelRadius: number,\n): number {\n  pixelRadius = pixelRadius ?? 10;\n  const metresPerPixel =\n    (40075016.686 * Math.abs(Math.cos((center[1] * 180) / Math.PI))) /\n    Math.pow(2, zoom + 8);\n  const radius = pixelRadius * metresPerPixel * 0.0005;\n  return radius;\n}\n","import { LngLatBoundsArray } from '@nextgis/utils';\n\nexport function isLngLatBoundsArray(\n  array: unknown,\n): array is LngLatBoundsArray {\n  return (\n    Array.isArray(array) &&\n    array.length === 4 &&\n    array.every((x) => typeof x === 'number')\n  );\n}\n","export function round(val: number, toFixed?: number): number {\n  const n = toFixed ? Number('1e+' + toFixed) : 1;\n  return Math.round((val + Number.EPSILON) * n) / n;\n}\n","export function objectAssign<T, U>(target: T, source: U): T & U;\n\n/**\n * Copy the values of all of the enumerable own properties from one or more source objects to a\n * target object. Returns the target object.\n * @param target - The target object to copy to.\n * @param source1 - The first source object from which to copy properties.\n * @param source2 - The second source object from which to copy properties.\n */\nexport function objectAssign<T, U, V>(\n  target: T,\n  source1: U,\n  source2: V,\n): T & U & V;\n\n/**\n * Copy the values of all of the enumerable own properties from one or more source objects to a\n * target object. Returns the target object.\n * @param target - The target object to copy to.\n * @param source1 - The first source object from which to copy properties.\n * @param source2 - The second source object from which to copy properties.\n * @param source3 - The third source object from which to copy properties.\n */\nexport function objectAssign<T, U, V, W>(\n  target: T,\n  source1: U,\n  source2: V,\n  source3: W,\n): T & U & V & W;\n\n/**\n * Copy the values of all of the enumerable own properties from one or more source objects to a\n * target object. Returns the target object.\n * @param target - The target object to copy to.\n * @param sources - One or more source objects from which to copy properties\n */\nexport function objectAssign(\n  target: Record<string, unknown>,\n  ...sources: any[]\n): any {\n  for (const source of sources) {\n    for (const prop of Object.getOwnPropertyNames(source)) {\n      (target as any)[prop] = source[prop];\n    }\n  }\n}\n","function isEqual(a: unknown, b: unknown, o: unknown, p: unknown): boolean {\n  if (a instanceof Array) {\n    if (!(b instanceof Array)) return false;\n    //if (compareObjects(oVal, pVal === false) return false\n    //would work, too, and perhaps is a better fit, still, this is easy, too\n    return b.sort().join('') === a.sort().join('');\n  } else if (a instanceof Date) {\n    if (!(b instanceof Date)) return false;\n    return '' + a === '' + b;\n  } else if (a instanceof Function) {\n    if (!(b instanceof Function)) return false;\n    //ignore functions, or check them regardless?\n  } else if (a instanceof Object) {\n    if (!(b instanceof Object)) return false;\n    if (a === o) {\n      return b === p;\n    } else {\n      return objectDeepEqual(a, b);\n    }\n  }\n  return a === b;\n}\n\n// based on https://stackoverflow.com/a/13143059\nexport function objectDeepEqual<\n  T extends Record<string, any> = Record<string, any>,\n>(o: T, p: T): boolean {\n  const keysO = Object.keys(o).sort();\n  const keysP = Object.keys(p).sort();\n  if (keysO.length !== keysP.length) return false;\n  if (keysO.join('') !== keysP.join('')) return false;\n  for (let i = 0; i < keysO.length; i++) {\n    const oVal = o[keysO[i]];\n    const pVal = p[keysP[i]];\n    if (!isEqual(oVal, pVal, o, p)) {\n      return false;\n    }\n  }\n  return true;\n}\n","export function objectRemoveEmpty<T extends Record<any, any>>(obj: T): T {\n  const newObj: Record<any, any> = {} as T;\n  Object.keys(obj).forEach((key) => {\n    if (!(obj[key] instanceof Array) && obj[key] === Object(obj[key])) {\n      newObj[key] = objectRemoveEmpty(obj[key]);\n    } else if (obj[key] !== undefined) {\n      newObj[key] = obj[key];\n    }\n  });\n  return newObj;\n}\n","export * from './DeepPartial';\nexport * from './Type';\nexport * from './Json';\nexport * from './isObjKey';\n\nexport function isObject(val: unknown): val is Record<string | number, any> {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\nexport function isArray(val: unknown): val is [] {\n  return Object.prototype.toString.call(val) === '[object Array]';\n}\n","export function fixUrlStr(url: string): string {\n  // remove double slash\n  return url.replace(/([^:]\\/)\\/+/g, '$1');\n}\n"],"names":["UrlRuntimeParams","_classCallCheck","key","value","name","this","params","href","window","location","replace","m","decodeURIComponent","_params","search","urlComponent","encodeURIComponent","get","RegExp","length","data","state","url","_pushState","remove","paramsArr","sourceUrl","rtn","split","queryString","indexOf","i","splice","join","type","history","replaceState","document","title","Clipboard","text","copy","navigator","clipboard","writeText","clipboardData","setData","copyToClipboard","silent","console","log","e","input","createElement","body","appendChild","copyNodeContentsToClipboard","removeChild","select","setSelectionRange","execCommand","applyMixins","derivedCtor","baseCtors","opt","arguments","undefined","derivedProperties","obj","_props","Object","getPrototypeOf","op","getOwnPropertyNames","push","_allProperties","prototype","forEach","baseCtor","isSomeProp","descriptor","getOwnPropertyDescriptor","defineProperty","mixinProperties","properties","debounce","cb","timeoutId","wait","wrapper","_this","_len","args","Array","_key","clear","setTimeout","apply","clearTimeout","deepmerge","target","src","mergeArray","target_","src_","array","isArray","dst","concat","_typeof","keys","defined","val","full","deprecatedMapClick","ev","lngLat","latLng","lat","lng","deprecatedWarn","message","warn","degrees2meters","x","y","Math","tan","PI","getBoundsPolygon","b","coordinates","getBoundsCoordinates","westNorth","getBoundsFeature","geometry","EARTHS_RADIUS","d2r","r2d","getCirclePolygonCoordinates","points","rlat","rlng","cos","extp","theta","ex","ey","sin","getIdentifyRadius","center","zoom","pixelRadius","_pixelRadius","abs","pow","isLngLatBoundsArray","every","round","toFixed","n","Number","EPSILON","objectAssign","sources","_i","_sources","_step","source","_iterator","_createForOfIteratorHelper","s","done","prop","err","f","isEqual","a","o","p","sort","Date","Function","objectDeepEqual","keysO","keysP","objectRemoveEmpty","newObj","isObject","toString","call","fixUrlStr"],"sourceRoot":""}