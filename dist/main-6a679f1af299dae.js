(self.webpackChunkclear_horizon=self.webpackChunkclear_horizon||[]).push([[754],{97060:function(t,n,r){"use strict";r.d(n,{a$:function(){return a},TE:function(){return s},Ml:function(){return c}});var e=r(40203),o=function(){return(o=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};function i(t,n,r){if((n=String(n))===(t=String(t)))return!0;if(r&&n.toUpperCase()===t.toUpperCase())return!0;var o=("^"+(0,e.Fz)(n)+"$").replace(/%/g,".*").replace("_",".");return null!==new RegExp(o,r?"i":"").exec(t)}var u={gt:function(t,n){return t>n},lt:function(t,n){return t<n},ge:function(t,n){return t>=n},le:function(t,n){return t<=n},eq:function(t,n){return t===n},ne:function(t,n){return t!==n},in:function(t,n){return-1!==n.indexOf(t)},notin:function(t,n){return-1===n.indexOf(t)},like:function(t,n){return i(t,n)},ilike:function(t,n){return i(t,n,!0)}};function a(t){var n=t;return 3===n.length&&"string"==typeof n[0]&&"string"==typeof n[1]}function s(t,n){var r=o({},t.properties);return!!r&&(r.$id=t.id,c(r,n))}function c(t,n){var r="string"==typeof n[0]?n[0]:"all",e=function(n){if(a(n)){var r=n[0],e=n[1],o=n[2],i=u[e];if(i){if(("like"===e||"ilike"===e)&&"string"==typeof r){var s="",p=r.replace(/^%?(\w+)%?$/,(function(n,e){return s=t[e],r.replace(e,o)}));return i(s,p)}return i(t[r],o)}return!1}return c(t,n)},o=n.filter((function(t){return Array.isArray(t)}));return"any"===r?o.some(e):o.every(e)}},33258:function(t,n,r){"use strict";r.d(n,{WL:function(){return c}});var e=r(40203),o={tms:"TILE"};function i(t){return new Promise((function(n,r){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState&&200===o.status&&o.responseText)try{n(JSON.parse(o.responseText))}catch(t){r(t)}},o.open("GET",(0,e.nH)(t),!0),o.send()}))}var u=function(){return(u=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};function a(t,n){return void 0===n&&(n="https://qms.nextgis.com"),function(){function r(t,n){this.map=t,this.options=n,this.options.baselayer=!0}return r.prototype.addLayer=function(a){return s=this,c=void 0,f=function(){var s,c,p,f,l,h,y,m;return function(t,n){var r,e,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,e&&(o=2&i[0]?e.return:i[0]?e.throw||((o=e.return)&&o.call(e),0):e.next)&&!(o=o.call(e,i[1])).done)return o;switch(e=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,e=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!((o=(o=u.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=n.call(t,u)}catch(t){i=[6,t],e=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}(this,(function(v){switch(v.label){case 0:if(this.qms||!a.qmsId)return[3,4];v.label=1;case 1:return v.trys.push([1,3,,4]),s=this,[4,i(n+"/api/v1/geoservices/"+a.qmsId)];case 2:return s.qms=v.sent(),[3,4];case 3:return c=v.sent(),console.error(c),[3,4];case 4:return(p=this.qms)&&(f=o[p.type||"tms"],(l=t.mapAdapter.layerAdapters[f])&&((0,e.FR)(r,l,["showLayer","hideLayer"]),"TILE"===f))?(a=u(u({order:0,maxZoom:t.options.maxZoom,minZoom:t.options.minZoom},this.options),function(t){var n=("https:"===location.protocol?"https":"http")+"://",r=t.url.replace(/^(https?|ftp):\/\//,n);return t.y_origin_top||(r=r.replace("{y}","{-y}")),{url:r,name:t.name,attribution:t.copyright_text,maxZoom:t.z_max,minZoom:t.z_min}}(p)),p.origin_url&&(d=p.origin_url,g=[],h=[d=d.replace(/{switch:(.*?)}/,(function(t,n){return"string"==typeof n&&n.split(",").forEach((function(t){return g.push(t)})),"{s}"})),g],y=h[0],(m=h[1]).length&&(a.subdomains=m,a.url=y)),this.options=a,[2,new l(this.map,a).addLayer(a)]):[2]}var d,g}))},new((p=void 0)||(p=Promise))((function(t,n){function r(t){try{o(f.next(t))}catch(t){n(t)}}function e(t){try{o(f.throw(t))}catch(t){n(t)}}function o(n){var o;n.done?t(n.value):(o=n.value,o instanceof p?o:new p((function(t){t(o)}))).then(r,e)}o((f=f.apply(s,c||[])).next())}));var s,c,p,f},r}()}var s=function(){return(s=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},c=function(){function t(t){this.options={url:"https://qms.nextgis.com"},this.options=s(s({},this.options),t),this.url=this.options.url}return t.prototype.getLayerAdapters=function(){var t=this;return Promise.resolve([{name:"QMS",createAdapter:function(n){return Promise.resolve(t._createAdapter(n))}}])},t.prototype._createAdapter=function(t){return a(t,this.url)},t.utils={createQmsAdapter:a},t}()}}]);
//# sourceMappingURL=main-6a679f1af299dae.js.map