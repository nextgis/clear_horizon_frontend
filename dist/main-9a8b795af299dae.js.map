{"version":3,"sources":["webpack://clear_horizon/./config.ts","webpack://clear_horizon/./src/bulma.ts","webpack://clear_horizon/./src/components/Popup.ts","webpack://clear_horizon/./src/Utils.ts","webpack://clear_horizon/./src/components/MapSettingsPanel/CollapsiblePanel.ts","webpack://clear_horizon/./src/components/MapSettingsPanel/WebmapTreeItem.ts","webpack://clear_horizon/./src/components/MapSettingsPanel/UserFiresContainer.ts","webpack://clear_horizon/./src/components/MapSettingsPanel/FiresContainer.ts","webpack://clear_horizon/./src/components/MapSettingsPanel/BaseMapsContainer.ts","webpack://clear_horizon/./src/components/MapSettingsPanel/BookmarksContainer.ts","webpack://clear_horizon/./src/components/MapSettingsPanel/MapSettingsPanel.ts","webpack://clear_horizon/./src/components/GetCoordinateControl/GetCoordinateControl.ts","webpack://clear_horizon/./src/components/ActionMap.ts","webpack://clear_horizon/./src/App.ts","webpack://clear_horizon/./src/main.ts"],"names":["mapOptions","target","bounds","baseUrl","resources","resource","fit","adapterOptions","selectable","basemaps","qmsId","userFires","id","paint","color","fires","document","addEventListener","$navbarBurgers","Array","prototype","slice","call","querySelectorAll","length","forEach","el","dataset","$target","getElementById","classList","toggle","ngwMap","_resourceItems","setNgwMap","this","createPopupContent","feature","resourceId","popupElement","createElement","properties","className","propertiesList","Object","keys","map","k","key","value","innerHTML","createPropertiesHtml","appendChild","updateElementContent","then","elem","day","month","year","join","hour","minute","str","RegExp","test","prepareColumnValue","element","_getResourceItem","item","feature_layer","fields","x","grid_visibility","property","keyname","push","display_name","newContent","pre","getElementsByClassName","_addPhotos","attachment","fid","attachmentElement","img","figure","_loadImage","width","height","src","imgElem","connector","get","options","Promise","resolve","reject","url","makeQuery","responseType","blob","reader","FileReader","readAsDataURL","onloadend","result","catch","er","_container","status","undefined","open","_updateContainer","parent","getContainer","_content","_updateContent","_toggle","_getToggleButtonHtml","close","_cleanContent","icon","title","header","_createHeader","content","leftLevel","rightLevel","onclick","html","layer","container","_createTreeItem","_createTreeBranch","layers","setAttribute","item_type","layer_enabled","checked","emitter","on","ev","set","propagation","children","tree","getChildren","treeBranch","reverse","_createContainer","f","_createFireItem","fire","getLayer","toggleLayer","displayName","split","replace","trim","symbol","_createSymbol","style","borderColor","backgroundColor","SELECT","selector","_createSelector","insertBefore","firstChild","label","createTextNode","option","text","onchange","propertiesFilter","Math","floor","Date","now","Number","UserFiresContainer","e","isBaseLayer","_updateBaseMapContainer","_baseMapsContainer","_createBaseMapItem","getBaseLayers","baseMap","control","input","isLayerVisible","hideLayer","getActiveBaseLayer","name","bookmarksContainer","bookmarks","b","labelField","find","label_field","getNgwLayerItems","items","_createBookmarkItem","bookmark","nameField","bookmarkBlock","geoJson","GeoJSON","geom","mapAdapter","fitBounds","getBounds","OPTIONS","actionMap","Error","_target","HTMLElement","sidebar","closeButton","position","autoPan","addTo","ngwLayers","hide","show","remove","add","CollapsiblePanel","_createUserFiresContainer","_createFiresContainer","_createNgwLayers","_createBasemapsContainer","_createBookmarksContainer","n","ngwLayer","treeContainer","WebmapTreeItem","bookmarkContainer","BookmarksContainer","firesContainer","FiresContainer","baseMapsContainer","BaseMapsContainer","off","addClass","addClassOn","EventEmitter","addLayer","visibility","radius","popup","popupOptions","d","_createPopupContent","geometry","coordinates","toFixed","_layer","onClick","toggleControl","setCursor","_removeClickListener","__onMapClick","_onMapClick","clearLayerData","type","latLng","lng","lat","setLayerData","emit","latLngStr","_promises","_stopToggleControlsCb","Popup","create","opt","mapOpt","controls","minZoom","runtimeParams","onLoad","i","addBaseLayer","getPaintFunctions","base","addControl","_createLocateControl","customAttribution","_createShareControl","getNgwLayers","values","webmap","bookmark_resource","_addUserFires","_addFires","_createGetCoordinateControl","_addTreeControl","_crateMeasureControl","_addEventsListeners","_locate","locate","setView","locationfound","lngLat","setCenter","_createAuthControl","auth","authBtn","getStatus","user","logout","window","location","reload","display","shareModal","closeModalBtn","shareModalContent","shareInput","shareControl","createButtonControl","href","_createShareModalContent","GetCoordinatePanelControl","_stopToggleControlsFor","disableSelection","enableSelection","createToggleControl","stop","locateControl","addNgwLayer","stroke","fillOpacity","selectedPaint","timedelta","sidebarToggleBtn","isActive","contains","activeBurger","disactiveBurger","MapSettingsPanel","setTimeout","_clean","getFeaturePromise","cancel","removeLayer","_highlighNgwLayer","params","fetchIdentifyItem","extensions","toGeojson","geojson","data","selectOnHover","featureId","excludeControlName","cancelPromise","measureControl","showBearings","bearingTextIn","bearingTextOut","tooltipTextFinish","tooltipTextDelete","tooltipTextMove","tooltipTextResume","tooltipTextAdd","measureControlTitleOn","measureControlTitleOff","measureControlLabel","measureControlClasses","unitControlLabel","metres","kilometres","sttus","_measuring","_toggleMeasure","ActionMap","config","console","warn","App"],"mappings":"kHA2CA,IAzC4B,CAC1BA,WAAY,CACVC,OAAQ,MACRC,OAAQ,CAAC,GAAI,GAAI,GAAI,IAErBC,QAAS,oCACTC,UAAW,CACT,CACEC,SAAU,EACVC,KAAK,EACLC,eAAgB,CAAEC,YAAY,MAIpCC,SAAU,CACR,CACEC,MAAO,MAET,CACEA,MAAO,MAGXC,UAAW,CACTN,SAAU,iBACVO,GAAI,WACJL,eAAgB,CAAEM,MAAO,CAAEC,MAAO,oBAEpCC,MAAO,CACL,CACEV,SAAU,IACVO,GAAI,QACJL,eAAgB,CAAEM,MAAO,CAAEC,MAAO,SAEpC,CACET,SAAU,IACVO,GAAI,QACJL,eAAgB,CAAEM,MAAO,CAAEC,MAAO,e,iBCtCxCE,SAASC,iBAAiB,oBAAoB,WAE5C,IAAMC,EAAiBC,MAAMC,UAAUC,MAAMC,KAC3CN,SAASO,iBAAiB,kBAC1B,GAIEL,EAAeM,OAAS,GAE1BN,EAAeO,SAAQ,SAACC,GACtBA,EAAGT,iBAAiB,SAAS,WAE3B,IAAMhB,EAASyB,EAAGC,QAAQ1B,OACpB2B,EAAUZ,SAASa,eAAe5B,GAGxCyB,EAAGI,UAAUC,OAAO,aAChBH,GACFA,EAAQE,UAAUC,OAAO,uB,0gDCAnC,aAGE,WAAoBC,GAAA,KAAAA,SAFZ,KAAAC,eAAyD,GAsJnE,OAlJE,YAAAC,UAAA,SAAUF,GACRG,KAAKH,OAASA,GAGhB,YAAAI,mBAAA,SACEC,EACAC,GAEA,IAAMC,EAAevB,SAASwB,cAAc,OACtCC,EAAazB,SAASwB,cAAc,OAC1CC,EAAWC,UAAY,aACvB,IAAMC,EAAiBC,OAAOC,KAAKR,EAAQI,YAAYK,KAAI,SAACC,GAC1D,MAAO,CACLC,IAAKD,EACLE,MAAOZ,EAAQI,WAAWM,OAK9B,GAFAN,EAAWS,UAAYf,KAAKgB,qBAAqBR,GAE7CL,EAAY,CACd,IAAM,EAAMtB,SAASwB,cAAc,OACnC,EAAIY,YAAYX,GAChBF,EAAaW,UAAY,WACzBf,KAAKkB,qBAAqB,EAAKf,EAAYD,GAASiB,MAAK,WACvDf,EAAaW,UAAY,GACzBX,EAAaa,YAAY,WAG3Bb,EAAaa,YAAYX,GAE3B,OAAOF,GAGT,YAAAY,qBAAA,SACEV,GAEA,IAAIc,EAAO,GAgBX,OAfAd,EAAWhB,SAAQ,SAAC,G,IAAEuB,EAAG,MAAEC,EAAK,QACT,iBAAVA,GAAsBA,IAC3B,SAAUA,EACZA,EAAQ,CAACA,EAAMO,IAAKP,EAAMQ,MAAOR,EAAMS,MAAMC,KAAK,KACzC,SAAUV,IACnBA,EAAQ,CAACA,EAAMW,KAAMX,EAAMY,QAAQF,KAAK,OAG5CJ,GAAQ,sFAE8BP,EAAG,uCC1CxC,SAA4BC,GACjC,MAAqB,iBAAVA,IAdOa,EAeDb,EAdD,IAAIc,OAClB,wKAMA,KAEeC,KAAKF,IAMX,YAAYb,EAAK,qBAAqBA,EAAK,OAG/CA,EAnBT,IAAoBa,EDwDUG,CAAmBhB,GAAM,kCAI5CM,GAGH,YAAAF,qBAAN,SACEa,EACA5B,EACAD,G,sGAEa,SAAMF,KAAKgC,iBAAiB7B,I,OAiBzC,OAjBM8B,EAAO,UACJC,gBACD,EAAgB,GACtBD,EAAKC,cAAcC,OAAO7C,SAAQ,SAAC8C,GACjC,GAAIA,EAAEC,gBAAiB,CACrB,IAAMC,EAAWpC,EAAQI,WAAW8B,EAAEG,SAClCD,GACF,EAAcE,KAAK,CAAE3B,IAAKuB,EAAEK,aAAc3B,MAAOwB,QAIjDI,EAAa1C,KAAKgB,qBAAqB,IACvC2B,EAAMZ,EAAQa,uBAAuB,cAAc,MAEvDD,EAAI5B,UAAY2B,IAGb,CAAP,EAAOT,WAGH,YAAAY,WAAN,SACEd,EACAe,EACArE,EACAsE,G,6GAEMC,EAAoBnE,SAASwB,cAAc,QAE/BE,UAAY,sB,IACZ,EAAAuC,E,wBAAA,YAAPG,EAAG,MAGNC,EAASrE,SAASwB,cAAc,WAC/BE,UAAY,mBACP,GAAMP,KAAKmD,WAAWF,EAAK,CACrCG,MALY,IAMZC,OALa,IAMb5E,GAAE,EACFsE,IAAG,MATqB,M,OAKpBO,EAAM,UAMNC,EAAU1E,SAASwB,cAAc,QAC/BiD,IAAMA,EACdJ,EAAOjC,YAAYsC,GACnBP,EAAkB/B,YAAYiC,G,wBAdd,I,oBAgBlBnB,EAAQd,YAAY+B,GACpB,WAAqBA,G,YAGT,YAAAhB,iBAAd,SAA+B7B,G,uGACxBH,KAAKF,eAAeK,GAArB,MACW,GAAMH,KAAKH,OAAO2D,UAAUC,IAAI,gBAAiB,KAAM,CAClEhF,GAAI0B,K,OADA8B,EAAO,SAGbjC,KAAKF,eAAeK,GAAc8B,E,iBAEpC,MAAO,CAAP,EAAOjC,KAAKF,eAAeK,YAGrB,YAAAgD,WAAR,SACEF,EACAS,GAFF,WAIE,OAAO,IAAIC,SAAgB,SAACC,EAASC,GAC3B,IAAAT,EAAkBM,EAAO,MAAlBL,EAAWK,EAAO,OAC3BI,EACJ,iBACAJ,EAAQjF,GACR,YACAiF,EAAQX,IACR,eAAeE,EAAIxE,GAAE,UACpB2E,GAASC,EAAS,SAASD,EAAK,IAAIC,EAAW,IAClD,EAAKxD,OAAO2D,UACTO,UAAUD,EAAK,GAAI,CAAEE,aAAc,SACnC7C,MAAK,SAAC8C,GACL,IAAMC,EAAS,IAAIC,WACnBD,EAAOE,cAAcH,GACrBC,EAAOG,UAAY,WACjBT,EAAQM,EAAOI,YAGlBC,OAAM,SAACC,GACNX,EAAOW,UAIjB,EAvJA,G,oBERA,aAME,WAAoBd,GAAA,KAAAA,UALH,KAAAe,WAAa5F,SAASwB,cAAc,OAMnDL,KAAK0E,YAA+BC,IAAtB3E,KAAK0D,QAAQkB,MAAqB5E,KAAK0D,QAAQkB,KAC7D5E,KAAK6E,mBACD7E,KAAK0D,QAAQoB,QACf9E,KAAK0D,QAAQoB,OAAO7D,YAAYjB,KAAK+E,gBA0G3C,OAtGE,YAAAA,aAAA,WACE,OAAO/E,KAAKyE,YAGd,YAAAG,KAAA,WACO5E,KAAKgF,SAASjE,WACjBf,KAAKiF,iBAGHjF,KAAKkF,UACPlF,KAAKkF,QAAQnE,UAAYf,KAAKmF,qBAAqB,sBAErDnF,KAAK0E,QAAS,GAGhB,YAAAU,MAAA,WACEpF,KAAKqF,gBACDrF,KAAKkF,UACPlF,KAAKkF,QAAQnE,UAAYf,KAAKmF,qBAAqB,wBAErDnF,KAAK0E,QAAS,GAGhB,YAAA9E,OAAA,WACMI,KAAK0E,OACP1E,KAAKoF,QAELpF,KAAK4E,QAID,YAAAO,qBAAR,SAA6BG,GAC3B,MAAO,wFAGOA,EAAI,uCAMZ,YAAAT,iBAAR,WAEE,GADA7E,KAAKyE,WAAW1D,UAAY,GACxBf,KAAK0D,QAAQ6B,MAAO,CACtB,IAAMC,EAASxF,KAAKyF,gBACpBzF,KAAKyE,WAAWxD,YAAYuE,GAE9B,IAAME,EAAU7G,SAASwB,cAAc,OACvCqF,EAAQnF,UAAY,gBACpBP,KAAKgF,SAAWU,EAChB1F,KAAKyE,WAAWxD,YAAYyE,GAExB1F,KAAK0E,OACP1E,KAAK4E,OAEL5E,KAAKoF,SAID,YAAAK,cAAR,sBACQD,EAAS3G,SAASwB,cAAc,OACtCmF,EAAOjF,UAAY,+BAEnB,IAAMoF,EAAY9G,SAASwB,cAAc,OACzCsF,EAAUpF,UAAY,aAEtB,IAAMgF,EAAQ1G,SAASwB,cAAc,OACrCkF,EAAMhF,UAAY,iCAClBgF,EAAMxE,UAAYf,KAAK0D,QAAQ6B,MAC/BI,EAAU1E,YAAYsE,GAEtB,IAAMK,EAAa/G,SAASwB,cAAc,OAC1CuF,EAAWrF,UAAY,cACvB,IAAMX,EAASf,SAASwB,cAAc,OAYtC,OAXAT,EAAOW,UAAY,kCACnBqF,EAAW3E,YAAYrB,GAEvBA,EAAOiG,QAAU,WACf,EAAKjG,UAEPI,KAAKkF,QAAUtF,EAEf4F,EAAOvE,YAAY0E,GACnBH,EAAOvE,YAAY2E,GAEZJ,GAGD,YAAAH,cAAR,WACErF,KAAKgF,SAASjE,UAAY,IAGpB,YAAAkE,eAAR,WACEjF,KAAKqF,gBACL,IAAMS,EAC4B,mBAAzB9F,KAAK0D,QAAQgC,QAChB1F,KAAK0D,QAAQgC,UACb1F,KAAK0D,QAAQgC,QAGnB,OADA1F,KAAKgF,SAAS/D,YAAY6E,GACnB9F,KAAKgF,UAEhB,EApHA,G,UCPA,aAGE,WAAYe,GACV,IAAMC,EAAYhG,KAAKiG,gBAAgBF,GACnCC,IACFhG,KAAKyE,WAAauB,GAkExB,OA9DE,YAAAjB,aAAA,WACE,OAAO/E,KAAKyE,YAGN,YAAAyB,kBAAR,SAA0BC,GAA1B,WACQ/E,EAAOvC,SAASwB,cAAc,OAUpC,OATAe,EAAKb,UAAY,gCACjB4F,EAAO7G,SAAQ,SAAC8C,GACd,GAAIA,EAAEH,KAAM,CACV,IAAMA,EAAO,EAAKgE,gBAAgB7D,GAC9BH,GACFb,EAAKH,YAAYgB,OAIhBb,GAGD,YAAA6E,gBAAR,SAAwBF,GACtB,IAAM9D,EAA8B8D,EAAM9D,KAC1C,IAAKA,EACH,OAAO,EAET,IAAMb,EAAOvC,SAASwB,cAAc,OAEpC,GADAe,EAAKb,UAAY,uBACb0B,EAAKQ,aAAc,CACrB,IAAM,EAAQ5D,SAASwB,cAAc,SACrC,EAAM+F,aAAa,OAAQ,YAC3B,IAAMtF,EAA2B,UAAnBmB,EAAKoE,WAAwBpE,EAAKqE,cAChD,EAAMC,QAAUzF,EAEhB,IAAM,EAAaiF,EAAMzF,WAAWgC,SAClC,cAEE,IACF,EAAWkE,QAAQC,GAAG,UAAU,SAACC,GAC/B,EAAMH,QAAUG,EAAG5F,SAErB,EAAM+E,QAAU,WACd,EAAWc,IAAI,EAAMJ,QAAS,CAC5BK,YAAa,kBAAoB,YAKvC,IAAM,EAAO/H,SAASwB,cAAc,QACpC,EAAKU,UAAYkB,EAAKQ,aAEtBrB,EAAKH,YAAY,GACjBG,EAAKH,YAAY,GAGnB,GACqB,UAAnBgB,EAAKoE,WACe,SAAnBpE,EAAKoE,WAAwBpE,EAAK4E,SAASxH,OAC5C,CACA,IAAMwH,EAAWd,EAAMe,KAAKC,cACtBC,EAAahH,KAAKkG,kBAAkBW,EAASI,WACnD7F,EAAKH,YAAY+F,GAEnB,OAAO5F,GAEX,EAxEA,GCQA,aAIE,WAAsBsC,GAAA,KAAAA,UACpB1D,KAAKH,OAAS6D,EAAQ7D,OACtBG,KAAKyE,WAAazE,KAAKkH,mBAkE3B,OA/DE,YAAAnC,aAAA,WACE,OAAO/E,KAAKyE,YAGd,YAAAyC,iBAAA,sBACQlB,EAAYnH,SAASwB,cAAc,OACzC2F,EAAUzF,UAAY,4CAEtB,IAAM3B,EAAQC,SAASwB,cAAc,OAOrC,OANAzB,EAAM2B,UAAY,6BAClBP,KAAK0D,QAAQ9E,MAAMU,SAAQ,SAAC6H,GAC1B,EAAKC,gBAAgBD,EAAGvI,MAE1BoH,EAAU/E,YAAYrC,GAEfoH,GAGT,YAAAoB,gBAAA,SAAgBC,EAAoBrB,GAApC,WACQ5E,EAAOvC,SAASwB,cAAc,OACpCe,EAAKb,UAAY,uBACjB,IAAMwF,EAAQ/F,KAAKH,OAAOyH,SAASD,EAAK5I,IACxC,GAAIsH,GAASA,EAAM9D,KAAM,CACvB,IAAMA,EAAO8D,EAAM9D,KACb,EAAQpD,SAASwB,cAAc,SACrC,EAAM+F,aAAa,OAAQ,YAE3B,EAAMG,SAAU,EAKhB,EAAMV,QAAU,WACd,EAAKhG,OAAO0H,YAAYF,EAAK5I,GAAI,EAAM8H,UAGzC,IAAM,EAAO1H,SAASwB,cAAc,QAE9BmH,EAAcvF,EAAK/D,SAASuE,aAAagF,MAAM,MAAM,GAE3D,EAAK1G,UAAYyG,EAAYE,QAAQ,QAAS,IAAIC,OAElD,IAAMC,EAAS5H,KAAK6H,cAAcR,GAElCjG,EAAKH,YAAY,GACjBG,EAAKH,YAAY2G,GACjBxG,EAAKH,YAAY,GAEjB+E,EAAU/E,YAAYG,KAI1B,YAAAyG,cAAA,SAAcR,G,MACNO,EAAS/I,SAASwB,cAAc,QACtCuH,EAAOrH,UAAY,cACnB,IAAM5B,GAA4B,QAAnB,EAAA0I,EAAKjJ,sBAAc,eAAEM,OAAsBC,MAM1D,MALqB,iBAAVA,IACTiJ,EAAOE,MAAMnJ,MAAQA,EACrBiJ,EAAOE,MAAMC,YAAcpJ,EAC3BiJ,EAAOE,MAAME,gBAAkBrJ,GAE1BiJ,GAEX,EAxEA,G,0UCPMK,EAAS,CACb,CAAC,KAAM,WACP,CAAC,KAAM,YACP,CAAC,KAAM,WACP,CAAC,MAAO,WAGV,2B,+CAyCA,OAzCoC,OAClC,YAAAf,iBAAA,WACE,IAAMlB,EAAY,YAAMkB,iBAAgB,WAElCgB,EAAWlI,KAAKmI,kBAGtB,OAFAnC,EAAUoC,aAAaF,EAAUlC,EAAUqC,YAEpCrC,GAGD,YAAAmC,gBAAR,sBACQ/G,EAAOvC,SAASwB,cAAc,OAC9BiI,EAAQzJ,SAASwB,cAAc,SAErCiI,EAAMrH,YAAYpC,SAAS0J,eAAe,0BAC1C,IAAML,EAAWrJ,SAASwB,cAAc,UAwBxC,OAtBA4H,EAAO3I,SAAQ,SAAC8C,GACd,IAAMoG,EAAS3J,SAASwB,cAAc,UACtCmI,EAAO1H,MAAQsB,EAAE,GACjBoG,EAAOC,KAAOrG,EAAE,GAChB8F,EAASjH,YAAYuH,MAGvBN,EAASQ,SAAW,WAClB,EAAKhF,QAAQ9E,MAAMU,SAAQ,SAAC8C,GACZ,EAAKvC,OAAOyH,SAASlF,EAAE3D,IAC/BkK,iBAAiB,CACrB,CACE,YACA,KACAC,KAAKC,MAAMC,KAAKC,MAAQ,KAAiC,KAAzBC,OAAOd,EAASpH,cAMxDwH,EAAMrH,YAAYiH,GAClB9G,EAAKH,YAAYqH,GACVlH,GAEX,EAzCA,CAAoC6H,GCJpC,aAKE,WAAoBvF,GAApB,WAAoB,KAAAA,UAClB1D,KAAKH,OAAS6D,EAAQ7D,OACtBG,KAAKyE,WAAazE,KAAKkH,mBACvBlH,KAAKH,OAAO2G,QAAQC,GAAG,aAAa,SAACyC,GAC/B,EAAKrJ,OAAOsJ,YAAYD,IAC1B,EAAKE,6BAmEb,OA9DE,YAAArE,aAAA,WACE,OAAO/E,KAAKyE,YAGN,YAAAyC,iBAAR,WACE,IAAMlB,EAAYnH,SAASwB,cAAc,OACzC2F,EAAUzF,UAAY,sDAEtB,IAAMjC,EAAWO,SAASwB,cAAc,OAKxC,OAJA/B,EAASiC,UAAY,gCACrBP,KAAKqJ,mBAAqB/K,EAC1B0H,EAAU/E,YAAY3C,GACtB0B,KAAKoJ,0BACEpD,GAGD,YAAAoD,wBAAR,sBACEpJ,KAAKqJ,mBAAmBtI,UAAY,GAEpCf,KAAKsJ,qBACLtJ,KAAKH,OAAO0J,gBAAgBjK,SAAQ,SAAC8C,GACnC,IAAM2D,EAAQ,EAAKlG,OAAOyH,SAASlF,GAC/B2D,GACF,EAAKuD,mBAAmBvD,OAKtB,YAAAuD,mBAAR,SAA2BE,GAA3B,WACQC,EAAU5K,SAASwB,cAAc,OACvCoJ,EAAQlJ,UAAY,UACpB,IAAMa,EAAOvC,SAASwB,cAAc,SACpCe,EAAKb,UAAY,gCAEjB,IAAMmJ,EAAQ7K,SAASwB,cAAc,SACrCqJ,EAAMtD,aAAa,OAAQ,SAC3BsD,EAAMtD,aAAa,OAAQ,WAE3BsD,EAAMnD,QAAUvG,KAAKH,OAAO8J,eAAeH,GAK3CE,EAAM7D,QAAU,WACV2D,EACF,EAAK3J,OAAO0H,YAAYiC,EAAQ/K,GAAIiL,EAAMnD,SAE1C,EAAK1G,OAAO+J,UAAU,EAAK/J,OAAOgK,uBAGtC,IACMrC,EADYgC,IAAYA,EAAQM,MAAQN,EAAQ9F,QAAQoG,OAC7B,QAC3BA,EAAOjL,SAAS0J,eAAef,GAErCpG,EAAKH,YAAYyI,GAEjBtI,EAAKH,YAAY6I,GAEjBL,EAAQxI,YAAYG,GAEpBpB,KAAKqJ,mBAAmBpI,YAAYwI,IAExC,EA7EA,G,WCKA,aAIE,WAAoB/F,GAAA,KAAAA,UAClB1D,KAAKH,OAAS6D,EAAQ7D,OACtBG,KAAKyE,WAAazE,KAAKkH,mBAiD3B,OA9CE,YAAAnC,aAAA,WACE,OAAO/E,KAAKyE,YAGd,YAAAyC,iBAAA,sBACQlB,EAAYnH,SAASwB,cAAc,OACzC2F,EAAUzF,UAAY,gDAEtB,IAAMwJ,EAAqBlL,SAASwB,cAAc,OAmBlD,OAlBA0J,EAAmBxJ,UAAY,iCAC/BP,KAAK0D,QAAQsG,UAAU1K,SAAQ,SAAC2K,GAC9B,EAAKpK,OAAO2D,UACTC,IAAI,gBAAiB,KAAM,CAAEhF,GAAIwL,EAAExL,KACnC0C,MAAK,SAACjD,GACL,IAAMgM,EAAahM,EAASgE,cAAcC,OAAOgI,MAC/C,SAAC/H,GAAM,OAAAA,EAAEgI,eAEX,EAAKvK,OAAOwK,iBAAiB,CAAElK,WAAY8J,EAAExL,KAAM0C,MAAK,SAACmJ,GACvDA,EAAMhL,SAAQ,SAAC8C,GACb,IAAMhB,EAAO,EAAKmJ,oBAAoBnI,EAAG8H,EAAW3H,SACpDyD,EAAU/E,YAAYG,eAKhC4E,EAAU/E,YAAY8I,GAEf/D,GAGT,YAAAuE,oBAAA,SACEC,EACAC,GAFF,gBAEE,IAAAA,MAAA,QAEA,IAAMrJ,EAAOvC,SAASwB,cAAc,OACpCe,EAAKb,UAAY,gCACjB,IAAMmK,EAAgB7L,SAASwB,cAAc,OAQ7C,OAPAqK,EAAc3J,UAAYyJ,EAASrI,OAAOsI,GAC1CC,EAAc7E,QAAU,WACtB,IAAM8E,EAAU,IAAI,EAAAC,QAAQJ,EAASK,MACxB,EAAKhL,OAAOiL,WAAWnK,IAC/BoK,UAAUJ,EAAQK,cAEzB5J,EAAKH,YAAYyJ,GACVtJ,GAEX,EAvDA,G,+MCIM6J,EAAmC,CACvCnN,OAAQ,QAIV,aAUE,WAAoBoN,EAAsBxH,GAExC,GAFkB,KAAAwH,YAClBlL,KAAK0D,QAAU,EAAH,KAAQuH,GAAYvH,GACG,iBAAxB1D,KAAK0D,QAAQ5F,OAAqB,CAC3C,IAAMA,EAASe,SAASa,eAAeM,KAAK0D,QAAQ5F,QACpD,IAAIA,EAGF,MAAM,IAAIqN,MACR,uBAAuBnL,KAAK0D,QAAQ5F,OAAM,gCAH5CkC,KAAKoL,QAAUtN,OAMRkC,KAAK0D,QAAQ5F,kBAAkBuN,cACxCrL,KAAKoL,QAAUpL,KAAK0D,QAAQ5F,QAE9BkC,KAAKsL,QAAU,IAAI,IAAJ,CAAYtL,KAAKoL,QAAS,CACvCG,aAAa,EACbC,SAAU,OACVC,SAAS,IAEXzL,KAAKsL,QAAQI,MAAM1L,KAAKkL,UAAUrL,OAAOiL,WAAWnK,KAEpDX,KAAK2L,UAAY3L,KAAK0D,QAAQiI,UAE9B3L,KAAKyE,WAAazE,KAAKkH,mBAClBlH,KAAK0D,QAAQgB,QAChB1E,KAAK4L,OAEP5L,KAAKoL,QAAQnK,YAAYjB,KAAKyE,YAyHlC,OAtHE,YAAAoH,KAAA,WACE7L,KAAKyE,WAAW9E,UAAUmM,OAAO,UACjC9L,KAAKsL,QAAQO,QAGf,YAAAD,KAAA,WACE5L,KAAKsL,QAAQM,OACb5L,KAAKyE,WAAW9E,UAAUoM,IAAI,WAGxB,YAAA7E,iBAAR,sBACQlB,EAAYnH,SAASwB,cAAc,OAwCzC,OAvCA2F,EAAUzF,UAAY,sBAEKoE,IAAvB3E,KAAK0D,QAAQN,QACf4C,EAAU8B,MAAM1E,MAAQpD,KAAK0D,QAAQN,MAAQ,MAG3CpD,KAAK0D,QAAQlF,WACf,IAAIwN,EAAiB,CACnBzG,MAAO,SACPG,QAAS,WAAM,SAAKuG,6BACpBnH,OAAQkB,IAGRhG,KAAK0D,QAAQ9E,OACf,IAAIoN,EAAiB,CACnBzG,MAAO,qBACPG,QAAS,WAAM,SAAKwG,yBACpBpH,OAAQkB,IAGZ,IAAIgG,EAAiB,CACnBzG,MAAO,eACPG,QAAS,WAAM,SAAKyG,oBACpBvH,MAAM,EACNE,OAAQkB,IAEV,IAAIgG,EAAiB,CACnBzG,MAAO,WACPG,QAAS,WAAM,SAAK0G,4BACpBxH,MAAM,EACNE,OAAQkB,IAEV,IAAIgG,EAAiB,CACnBzG,MAAO,WACPG,QAAS,WAAM,SAAK2G,6BACpBzH,MAAM,EACNE,OAAQkB,IAGHA,GAGD,YAAAmG,iBAAR,WACE,IAAMnG,EAAYnH,SAASwB,cAAc,OAEzC,IAAK,IAAMiM,KADXtG,EAAUzF,UAAY,wBACNP,KAAK2L,UAAW,CAC9B,IAAMY,EAAWvM,KAAK2L,UAAUW,GAE1BE,EADO,IAAIC,EAAeF,EAASxG,MAAMA,OACpBhB,eACvByH,GACFxG,EAAU/E,YAAYuL,GAG1B,OAAOxG,GAGD,YAAAqG,0BAAR,WACE,IAAMrG,EAAYnH,SAASwB,cAAc,OACnC2J,EAAYhK,KAAK0D,QAAQsG,UAC/B,GAAIA,EAAW,CACb,IAAM0C,EAAoB,IAAIC,EAAmB,CAC/C3C,UAAS,EACTnK,OAAQG,KAAK0D,QAAQ7D,SAEvBmG,EAAU/E,YAAYyL,EAAkB3H,gBAE1C,OAAOiB,GAGD,YAAAiG,0BAAR,WACE,IAAMjG,EAAYnH,SAASwB,cAAc,OACnCzB,EAAQ,CAACoB,KAAK0D,QAAQlF,WAC5B,GAAII,EAAO,CACT,IAAMgO,EAAiB,IAAI3D,EAAmB,CAC5CrK,MAAK,EACLiB,OAAQG,KAAK0D,QAAQ7D,SAEvBmG,EAAU/E,YAAY2L,EAAe7H,gBAEvC,OAAOiB,GAGD,YAAAkG,sBAAR,WACE,IAAMlG,EAAYnH,SAASwB,cAAc,OACnCzB,EAAQoB,KAAK0D,QAAQ9E,MAC3B,GAAIA,EAAO,CACT,IAAMgO,EAAiB,IAAIC,EAAe,CACxCjO,MAAK,EACLiB,OAAQG,KAAK0D,QAAQ7D,SAEvBmG,EAAU/E,YAAY2L,EAAe7H,gBAEvC,OAAOiB,GAGD,YAAAoG,yBAAR,WACE,IAAMpG,EAAYnH,SAASwB,cAAc,OAEzC,GADcL,KAAK0D,QAAQ9E,MAChB,CACT,IAAMkO,EAAoB,IAAIC,EAAkB,CAC9ClN,OAAQG,KAAK0D,QAAQ7D,SAEvBmG,EAAU/E,YAAY6L,EAAkB/H,gBAE1C,OAAOiB,GAEX,EA9JA,G,WCJA,aAkBE,WACUkF,EACRxH,GAFF,WACU,KAAAwH,YAlBV,KAAApF,KAAO,mDACP,KAAAP,MAAQ,CACNyH,IAAK,gCACLvG,GAAI,+CAGN,KAAAwG,SAAW,qCACX,KAAAC,WAAa,SAEb,KAAAxI,QAAS,EAET,KAAA8B,QAAU,IAAI,EAAA2G,aAUZnN,KAAKkF,QAAUxB,EAAQ9D,OACvBI,KAAKkL,UAAUrL,OACZuN,SAAS,UAAW,CACnB3O,GAAI,wBACJ4O,YAAY,EACZ3O,MAAO,CAAE4O,OAAQ,GACjBC,OAAO,EACPC,aAAc,CACZvN,mBAAoB,SAACwN,GACnB,OAAO,EAAKC,oBACVD,EAAEvN,QAAQyN,SAASC,YAAYjN,KAAI,SAACyB,GAAM,OAAAA,EAAEyL,QAAQ,WAK3D1M,MAAK,SAAC4E,GACDA,IACF,EAAK+H,OAAS/H,MAuExB,OAlEE,YAAAgI,QAAA,SAAQrJ,GACN1E,KAAKgO,cAActJ,IAGrB,YAAAmH,KAAA,sBACE7L,KAAKkL,UAAUrL,OAAOoO,UAAU,aAChCjO,KAAKkO,uBACLlO,KAAKmO,aAAe,SAACjF,GAAqB,SAAKkF,YAAYlF,IAC3DlJ,KAAKkL,UAAUrL,OAAO2G,QAAQC,GAAG,QAASzG,KAAKmO,eAGjD,YAAAvC,KAAA,WACE5L,KAAKkL,UAAUrL,OAAOoO,UAAU,WAChCjO,KAAKkO,uBACLlO,KAAKkL,UAAUrL,OAAOwO,eAAerO,KAAK8N,SAGpC,YAAAI,qBAAR,WACMlO,KAAKmO,eACPnO,KAAKkL,UAAUrL,OAAO2G,QAAQwG,IAAI,QAAShN,KAAKmO,cAChDnO,KAAKmO,aAAe,OAIhB,YAAAC,YAAR,SAAoBlF,GAClB,IAAMhJ,EAA0B,CAC9BoO,KAAM,UACNhO,WAAY,GACZqN,SAAU,CAAEW,KAAM,QAASV,YAAa,CAAC1E,EAAEqF,OAAOC,IAAKtF,EAAEqF,OAAOE,OAElEzO,KAAKkL,UAAUrL,OAAO6O,aAAa1O,KAAK8N,OAAQ5N,IAG1C,YAAA8N,cAAR,SAAsBtJ,IACpBA,OAAoBC,IAAXD,EAAuBA,GAAU1E,KAAK0E,QAE7C1E,KAAK6L,OAEL7L,KAAK4L,OAGP5L,KAAK0E,OAASA,EACV1E,KAAKkF,SACPlF,KAAKkF,QAAQR,GAEf1E,KAAKwG,QAAQmI,KAAK,SAAU3O,KAAK0E,SAG3B,YAAAgJ,oBAAR,SAA4B,G,IAACc,EAAG,KAAEC,EAAG,KAC7B/I,EAAU7G,SAASwB,cAAc,OACjCuO,EAAeH,EAAG,KAAKD,EAc7B,OAbA9I,EAAQ3E,UAAY,wEAEW6N,EAAS,sGAIlBlJ,EAAQ9C,uBAC5B,qBACA,GACYiD,QAAU,WACtB,UAAe+I,IAGVlJ,GAEX,EA9GA,G,4hDCmBA,aAgBE,WAAoBhC,GAAA,KAAAA,UAPZ,KAAAmL,UAAwD,GAExD,KAAAC,sBAGH,GAGH9O,KAAKuN,MAAQ,IAAIwB,EAAM/O,KAAKH,QAgZhC,OA7YQ,YAAAmP,OAAN,SAAaC,G,2GA0CO,OAxCZC,EAAS,KAAKD,EAAIpR,YAQxBmC,KAAKH,OAAS,IAAI,KAAO,GACvBiL,WAAY,IAAI,IAChBqE,SAAU,GACVC,QAAS,EACTC,cAAe,CAAC,IAAI,MACjBH,IAELlP,KAAKH,OAAOoO,UAAU,WACtBjO,KAAKuN,MAAMxN,UAAUC,KAAKH,QACtBoP,EAAI3Q,UACN0B,KAAKH,OAAOyP,SAASnO,MAAK,WACxB,OAAA8N,EAAI3Q,SAASgB,SAAQ,SAAC8C,EAAGmN,GACvB,EAAK1P,OAAO2P,aAAqC,MAAO,OACnDpN,GAAC,CACJiL,WAAkB,IAANkC,WAKpBvP,KAAKH,OAAO4P,kBAAoB,CAAEC,KAAM,KAExC1P,KAAKH,OAAO8P,WAAW,OAAQ,YAC/B3P,KAAK4P,uBACL5P,KAAKH,OAAO8P,WAAW,cAAe,eAAgB,CACpDE,kBAAmB,CACjB,gEAGJ7P,KAAK8P,sBAIa,GAAM9P,KAAKH,OAAOkQ,gB,OAWpC,OAXMpE,EAAY,SACZ3B,EAAiC,GACvCvJ,OAAOuP,OAAOrE,GAAWrM,SAAQ,SAAC8C,GAChC,IAAMoI,EACJpI,EAAE2D,MAAM9D,MACRG,EAAE2D,MAAM9D,KAAKgO,QACb7N,EAAE2D,MAAM9D,KAAKgO,OAAOC,kBAClB1F,GACFR,EAAUxH,KAAKgI,MAGnB,GAAMxK,KAAKmQ,cAAclB,EAAIzQ,Y,OAC7B,OADA,SACA,GAAMwB,KAAKoQ,UAAUnB,EAAIrQ,Q,cAAzB,SACAoB,KAAKqQ,8BACLrQ,KAAKsQ,gBAAgB,CACnB3E,UAAS,EACT/M,MAAOqQ,EAAIrQ,MACXJ,UAAWyQ,EAAIzQ,UACfwL,UAAS,IAEXhK,KAAKH,OAAO8P,WAAW3P,KAAKuQ,uBAAwB,YAEpDvQ,KAAKwQ,sB,YAGC,YAAAC,QAAR,sBAkBEzQ,KAAKH,OAAO6Q,OAAO,CAAEC,SAAS,GAAS,CAAEC,cAjBnB,SAAC1H,GACrB,IAAM2H,EAAS3H,EAAE2H,OAajB,EAAKhR,OAAOiR,UAAUD,OAMZ,YAAAE,mBAAd,SAAiCC,G,2FACzBC,EAAUpS,SAAS+D,uBACvB,eACA,GACIsO,EAAY,WAChB,SAAU,EAAKrR,OAAO2D,YAAa,EAAK3D,OAAO2D,UAAU2N,OAErDpD,EAAU,WACdiD,EAAKI,SACLC,OAAOC,SAASC,UAElBN,EAAQlQ,UAAYmQ,IAAc,QAAU,QAC5CD,EAAQnJ,MAAM0J,QAAU,QACxBP,EAAQnS,iBAAiB,QAASiP,G,WAG5B,YAAA+B,oBAAR,sBACQ2B,EAAa5S,SAAS+D,uBAAuB,YAAY,GACzD8O,EAAgB7S,SAAS+D,uBAAuB,kBAAkB,GAClE+O,EAAoB9S,SAAS+D,uBACjC,0BACA,GACIgP,EAAa/S,SAAS+D,uBAC1B,kBACA,GAaF8O,EAAc5S,iBAAiB,SAAS,WAHtC6S,EAAkB5Q,UAAY,GAC9B0Q,EAAW9R,UAAUmM,OAAO,gBAM9B,IAAM+F,EAAe7R,KAAKH,OAAOiS,oBAAoB,CACnDhM,KAAM,qDACNiI,QAAO,WAlBS,IACVgE,EACAjM,EADAiM,EAAOT,SAASS,KAChBjM,EAAO,EAAKkM,yBAAyBD,GAC3CH,EAAW9Q,MAAQiR,EACnBJ,EAAkB5Q,UAAY+E,EAC9B,aACA2L,EAAW9R,UAAUoM,IAAI,gBAgB3B/L,KAAKH,OAAO8P,WAAWkC,EAAc,iBAGzB,YAAAxB,4BAAd,W,yGAWwB,OAVhB5G,EAAU,IAAIwI,EAA0BjS,KAAM,CAClDJ,OAAQ,SAAC8E,GACHA,GACF,EAAKwN,uBAAuB,cAC5B,EAAKrS,OAAOsS,oBAEZ,EAAKtS,OAAOuS,qBAII,GAAMpS,KAAKH,OAAOwS,oBAAoB5I,I,cAAtDuE,EAAgB,SACtBhO,KAAKH,OAAO8P,WAAW3B,EAAe,YACtChO,KAAK8O,sBAAsBtM,KAAK,CAC9BsH,KAAM,aACNwI,KAAM,WAAM,OAAAtE,EAAcD,SAAQ,M,YAI9B,YAAA6B,qBAAR,sBAEQ2C,EAAgBvS,KAAKH,OAAOiS,oBAAoB,CACpDhM,KAAM,yDACNP,MAAO,sBACPwI,QAJc,WAAM,SAAK0C,aAM3BzQ,KAAKH,OAAO8P,WAAW4C,EAAe,aAGhC,YAAAP,yBAAR,SAAiClO,GAmB/B,MAZa,yDAAyDA,EAAG,wCAN1D,CACb,CAAErF,GAAI,KAAMqL,KAAM,UAAWxE,KAAM,kBACnC,CAAE7G,GAAI,KAAMqL,KAAM,KAAMxE,KAAM,aAC9B,CAAE7G,GAAI,KAAMqL,KAAM,WAAYxE,KAAM,2BAKjC3E,KACC,SAACyB,GAAM,+CAAyCA,EAAE3D,GAAE,kFAE1B2D,EAAEkD,KAAI,kEAEdlD,EAAE0H,KAAI,mCAGzBtI,KAAK,IAAG,gBAKD,YAAA2O,cAAd,SACE/N,EACAhE,G,gFAEIgE,IACI1D,EAAQ0D,EAAEhE,eAAeM,MAC/BsB,KAAKH,OAAO2S,YAAY,CACtBtU,SAAUkE,EACV3D,GAAI2D,EAAE3D,GAENL,eAAgB,GACdM,MAAO,OACFA,GAAK,CACR+T,QAAQ,EACRC,YAAa,GACbpF,OAAQ,IAEVjP,YAAY,EACZsU,cAAe,OACVjU,GAAK,CACR+T,QAAQ,EACRC,YAAa,GACbpF,OAAQ,KAEPlP,M,WAMG,YAAAgS,UAAd,SAAwBxR,G,wGAClBA,EAAA,Y,IACc,EAAAA,E,wBAAA,YAALwD,EAAC,KACV,GAAMpC,KAAKmQ,cAAc/N,EAAG,CAC1BuG,iBAAkB,CAChB,CACE,YACA,KACAC,KAAKC,MAAMC,KAAKC,MAAQ,KACW,KAAjCC,OAAOhJ,KAAK0D,QAAQkP,iBAPT,M,OACnB,S,wBADc,I,+BAeN,YAAAtC,gBAAd,SAA8BrB,G,+GAa5B,OAPM4D,EAAmBhU,SAAS+D,uBAAuB,cAAc,GAEjEkQ,EAAW,WAAM,OAAAD,EAAiBlT,UAAUoT,SAAS,cACrDC,EAAe,WAAM,OAAAH,EAAiBlT,UAAUoM,IAAI,cACpDkH,EAAkB,WACtB,OAAAJ,EAAiBlT,UAAUmM,OAAO,cAEpC,GAAM9L,KAAKH,OAAOyP,U,cAAlB,SAEAtP,KAAK8G,KAAO,IAAIoM,EAAiBlT,KAAM,OAClCiP,GAAG,CACNpP,OAAQG,KAAKH,UAGTD,EAAS,SAAC8E,IACdA,OAAoBC,IAAXD,EAAuBA,EAASoO,MAEvC,EAAKZ,uBAAuB,QAC5B,EAAKpL,KAAK+E,OACVmH,MAEA,EAAKlM,KAAK8E,OACVqH,MAGJJ,EAAiB/T,iBAAiB,SAAS,WACzCc,OAEFuT,YAAW,WACTvT,MACC,KACHI,KAAK8O,sBAAsBtM,KAAK,CAC9BsH,KAAM,OACNwI,KAAM,WAAM,OAAA1S,GAAO,M,YAIf,YAAAwT,OAAR,WAEIpT,KAAK6O,UAAUwE,mBACfrT,KAAK6O,UAAUwE,kBAAkBC,QAEjCtT,KAAK6O,UAAUwE,kBAAkBC,SAEnCtT,KAAKH,OAAO0T,YAAY,cAGlB,YAAAC,kBAAR,SAA0BtK,GAA1B,WACElJ,KAAKoT,SACL,IACMK,GADa,QAAiBvK,GACV,GAC1B,GAAIuK,EAAQ,CACV,IAAM,EAAaA,EAAOtT,WAC1BH,KAAKH,OACF6T,kBAAkBxK,EAAG,CACpByK,WAAY,CAAC,gBAEdxS,MAAK,SAACc,GACLA,EAAK2R,YAAYzS,MAAK,SAAC0S,GACrB,EAAKhU,OAAOuN,SAAS,UAAW,CAC9B3O,GAAI,YACJqV,KAAMD,EACNxG,YAAY,EACZ3O,MAAO,CAAEC,MAAO,QAAS8T,QAAQ,EAAMC,YAAa,OAEpDqB,eAAe,EACfxG,OAAO,EAEPC,aAAc,CACZvN,mBAAoB,SAACiJ,GACnB,GAAIA,EAAEhJ,QAAS,CACb,IAAM6B,EAAU,EAAKwL,MAAMtN,mBACzBiJ,EAAEhJ,QACF,GAaF,OAVE+B,EAAK0R,WAAW7Q,YAChBb,EAAK0R,WAAW7Q,WAAWzD,QAE3B,EAAKkO,MAAM1K,WACTd,EACAE,EAAK0R,WAAW7Q,WAChB2Q,EAAOtT,WACPsT,EAAOO,WAGJjS,eAUjB,YAAAmQ,uBAAR,SAA+B+B,GAC7BjU,KAAK8O,sBAAsBxP,SAAQ,SAAC8C,GAC9BA,EAAE0H,OAASmK,GACb7R,EAAEkQ,WAKA,YAAA9B,oBAAR,sBACExQ,KAAKH,OAAO2G,QAAQC,GAAG,SAAS,WAC9B,EAAK5G,OAAOqU,cAAc,WAAY,aAExClU,KAAKH,OAAO2G,QAAQC,GAAG,cAAc,SAACyC,GAAM,SAAKsK,kBAAkBtK,OAG7D,YAAAqH,qBAAR,sBACQ4D,EAAiB,IAAI,IAAJ,CAAoB,CACzCC,cAAc,EACdC,cAAe,KACfC,eAAgB,MAChBC,kBAAmB,iDACnBC,kBAAmB,0CACnBC,gBAAiB,mDACjBC,kBAAmB,gDACnBC,eAAgB,0CAChBC,sBAAuB,4BACvBC,uBAAwB,4BACxBC,oBACE,yDACFC,sBAAuB,GACvBC,iBAAkB,CAChBC,OAAQ,IACRC,WAAY,QAyBhB,OArBAlV,KAAKH,OAAOiL,WAAWnK,IAAI8F,GAEzB,0BACA,SAACwI,GACKA,EAAIkG,OACN,EAAKjD,uBAAuB,WAC5B,EAAKrS,OAAOsS,qBAEZ,EAAKtS,OAAOoO,UAAU,WACtB,EAAKpO,OAAOuS,sBAIlBpS,KAAK8O,sBAAsBtM,KAAK,CAC9BsH,KAAM,UACNwI,KAAM,WACA6B,EAAeiB,YACjBjB,EAAekB,oBAIdlB,GAEX,EAjaA,G,0NCAA,aAGE,WAAmBzQ,GAAA,KAAAA,UAFnB,KAAAwH,UAAY,IAAIoK,EAAUtV,KAAK0D,SAQjC,OAJQ,YAAAsL,OAAN,SAAatL,G,ymCACX1D,KAAK0D,QAAU,OAAK1D,KAAK0D,SAAYA,GACrC1D,KAAKkL,UAAU8D,OAAOhP,KAAK0D,S,wSAE/B,EATA,GC9BI6R,EAAqB,GACzB,IACEA,EAAS,WACT,MAAO/Q,GACPgR,QAAQC,KAAK,wDAWH,IAAIC,GADA,QAPY,CAC1B7X,WAAY,CACVC,OAAQ,MACRC,OAAQ,CAAC,MAAO,OAAQ,OAAQ,SAElC6U,UAAW,IAEsB2C,IAG/BvG,W","file":"main-9a8b795af299dae.js","sourcesContent":["import { AppOptions } from './src/App';\n\nconst options: AppOptions = {\n  mapOptions: {\n    target: 'map',\n    bounds: [45, 46, 47, 49],\n    // baseUrl: location.protocol + '//clear-horizon.nextgis.com',\n    baseUrl: 'https://clear-horizon.nextgis.com',\n    resources: [\n      {\n        resource: 1,\n        fit: true,\n        adapterOptions: { selectable: true },\n      },\n    ],\n  },\n  basemaps: [\n    {\n      qmsId: 1135,\n    },\n    {\n      qmsId: 487,\n    },\n  ],\n  userFires: {\n    resource: 'userfirepoints',\n    id: 'USERFIRE',\n    adapterOptions: { paint: { color: 'rgb(100,20,40)' } },\n  },\n  fires: [\n    {\n      resource: 103,\n      id: 'MODIS',\n      adapterOptions: { paint: { color: 'red' } },\n    },\n    {\n      resource: 105,\n      id: 'VIIRS',\n      adapterOptions: { paint: { color: 'orange' } },\n    },\n  ],\n};\n\nexport default options;\n","document.addEventListener('DOMContentLoaded', () => {\n  // Get all \"navbar-burger\" elements\n  const $navbarBurgers = Array.prototype.slice.call(\n    document.querySelectorAll('.navbar-burger'),\n    0\n  );\n\n  // Check if there are any navbar burgers\n  if ($navbarBurgers.length > 0) {\n    // Add a click event on each of them\n    $navbarBurgers.forEach((el) => {\n      el.addEventListener('click', () => {\n        // Get the target from the \"data-target\" attribute\n        const target = el.dataset.target;\n        const $target = document.getElementById(target);\n\n        // Toggle the \"is-active\" class on both the \"navbar-burger\" and the \"navbar-menu\"\n        el.classList.toggle('is-active');\n        if ($target) {\n          $target.classList.toggle('is-active');\n        }\n      });\n    });\n  }\n});\n","import bulmaCarousel from 'bulma-carousel';\nimport { NgwMap } from '@nextgis/ngw-map';\nimport { Feature, Geometry } from 'geojson';\nimport { FeatureItemAttachment, ResourceItem } from '@nextgis/ngw-connector';\nimport { prepareColumnValue } from '../Utils';\n\ninterface CollectorDate {\n  year: number;\n  month: number;\n  day: number;\n}\ninterface CollectorTime {\n  hour: number;\n  minute: number;\n  second: number;\n}\n\ntype CollectorProperty = string | number | CollectorDate | CollectorTime;\n\nexport class Popup {\n  private _resourceItems: { [resourceId: number]: ResourceItem } = {};\n\n  constructor(private ngwMap: NgwMap) {}\n\n  setNgwMap(ngwMap: NgwMap): void {\n    this.ngwMap = ngwMap;\n  }\n\n  createPopupContent<G extends Geometry = any, P = any>(\n    feature: Feature<G, P>,\n    resourceId?: number\n  ): HTMLElement {\n    const popupElement = document.createElement('div');\n    const properties = document.createElement('div');\n    properties.className = 'properties';\n    const propertiesList = Object.keys(feature.properties).map((k) => {\n      return {\n        key: k,\n        value: feature.properties[k],\n      };\n    });\n    properties.innerHTML = this.createPropertiesHtml(propertiesList);\n\n    if (resourceId) {\n      const pre = document.createElement('div');\n      pre.appendChild(properties);\n      popupElement.innerHTML = 'Загрузка';\n      this.updateElementContent(pre, resourceId, feature).then(() => {\n        popupElement.innerHTML = '';\n        popupElement.appendChild(pre);\n      });\n    } else {\n      popupElement.appendChild(properties);\n    }\n    return popupElement;\n  }\n\n  createPropertiesHtml(\n    properties: Array<{ key: string; value: CollectorProperty }>\n  ): string {\n    let elem = '';\n    properties.forEach(({ key, value }) => {\n      if (typeof value === 'object' && value) {\n        if ('year' in value) {\n          value = [value.day, value.month, value.year].join('.');\n        } else if ('hour' in value) {\n          value = [value.hour, value.minute].join(':');\n        }\n      }\n      elem += `\n      <div class=\"columns is-mobile\">\n        <div class=\"column is-two-fifths\">${key}</div>\n        <div class=\"column\">${prepareColumnValue(value)}</div>\n      </div>\n      `;\n    });\n    return elem;\n  }\n\n  async updateElementContent<G extends Geometry = any, P = any>(\n    element: HTMLElement,\n    resourceId: number,\n    feature: Feature<G, P>\n  ): Promise<ResourceItem> {\n    const item = await this._getResourceItem(resourceId);\n    if (item.feature_layer) {\n      const newProperties = [];\n      item.feature_layer.fields.forEach((x) => {\n        if (x.grid_visibility) {\n          const property = feature.properties[x.keyname];\n          if (property) {\n            newProperties.push({ key: x.display_name, value: property });\n          }\n        }\n      });\n      const newContent = this.createPropertiesHtml(newProperties);\n      const pre = element.getElementsByClassName('properties')[0];\n      if (pre) {\n        pre.innerHTML = newContent;\n      }\n    }\n    return item;\n  }\n\n  async _addPhotos(\n    element: HTMLElement,\n    attachment: FeatureItemAttachment[],\n    id: number,\n    fid: number\n  ): Promise<void> {\n    const attachmentElement = document.createElement('div');\n\n    attachmentElement.className = 'carousel attachment';\n    for (const img of attachment) {\n      const width = 300;\n      const height = 300;\n      const figure = document.createElement('figure');\n      figure.className = `image is-${width}x${height}`;\n      const src = await this._loadImage(img, {\n        width,\n        height,\n        id,\n        fid,\n      });\n      const imgElem = document.createElement('img');\n      imgElem.src = src;\n      figure.appendChild(imgElem);\n      attachmentElement.appendChild(figure);\n    }\n    element.appendChild(attachmentElement);\n    bulmaCarousel.attach(attachmentElement);\n  }\n\n  private async _getResourceItem(resourceId: number) {\n    if (!this._resourceItems[resourceId]) {\n      const item = await this.ngwMap.connector.get('resource.item', null, {\n        id: resourceId,\n      });\n      this._resourceItems[resourceId] = item;\n    }\n    return this._resourceItems[resourceId];\n  }\n\n  private _loadImage(\n    img: FeatureItemAttachment,\n    options: { id: number; fid: number; width?: number; height?: number }\n  ) {\n    return new Promise<string>((resolve, reject) => {\n      const { width, height } = options;\n      const url =\n        '/api/resource/' +\n        options.id +\n        '/feature/' +\n        options.fid +\n        `/attachment/${img.id}/image` +\n        (width && height ? `?size=${width}x${height}` : '');\n      this.ngwMap.connector\n        .makeQuery(url, {}, { responseType: 'blob' })\n        .then((blob) => {\n          const reader = new FileReader();\n          reader.readAsDataURL(blob);\n          reader.onloadend = () => {\n            resolve(reader.result as string);\n          };\n        })\n        .catch((er) => {\n          reject(er);\n        });\n    });\n  }\n}\n","export function fixUrlStr(url: string): string {\n  // remove double slash\n  return url.replace(/([^:]\\/)\\/+/g, '$1');\n}\n\nexport function objToUrlStr(obj: { [param: string]: any }): string {\n  let str = '';\n  for (const key in obj) {\n    if (str !== '') {\n      str += '&';\n    }\n    str += key + '=' + encodeURIComponent(obj[key]);\n  }\n  return str;\n}\n\nfunction isValidUrl(str: string): boolean {\n  const pattern = new RegExp(\n    '^(https?:\\\\/\\\\/)?' + // protocol\n      '((([a-z\\\\d]([a-z\\\\d-]*[a-z\\\\d])*)\\\\.)+[a-z]{2,}|' + // domain name\n      '((\\\\d{1,3}\\\\.){3}\\\\d{1,3}))' + // OR ip (v4) address\n      '(\\\\:\\\\d+)?(\\\\/[-a-z\\\\d%_.~+]*)*' + // port and path\n      '(\\\\?[;&a-z\\\\d%_.~+=-]*)?' + // query string\n      '(\\\\#[-a-z\\\\d_]*)?$',\n    'i'\n  ); // fragment locator\n  return !!pattern.test(str);\n}\n\nexport function prepareColumnValue(value: unknown): unknown | string {\n  if (typeof value === 'string') {\n    if (isValidUrl(value)) {\n      return `<a href=\"${value}\" target=\"_blank\">${value}</a>`;\n    }\n  }\n  return value;\n}\n","import './CollapsiblePanel.css';\n\ntype GetHTML = () => HTMLElement;\n\nexport interface CollapsiblePanelOptions {\n  title?: string;\n  content: HTMLElement | GetHTML;\n  open?: boolean;\n  parent?: HTMLElement;\n}\n\nexport class CollapsiblePanel {\n  private readonly _container = document.createElement('div');\n  private _content: HTMLElement;\n  private _toggle?: HTMLElement;\n  private status: boolean;\n\n  constructor(private options: CollapsiblePanelOptions) {\n    this.status = this.options.open !== undefined ? this.options.open : true;\n    this._updateContainer();\n    if (this.options.parent) {\n      this.options.parent.appendChild(this.getContainer());\n    }\n  }\n\n  getContainer(): HTMLElement {\n    return this._container;\n  }\n\n  open(): void {\n    if (!this._content.innerHTML) {\n      this._updateContent();\n    }\n    // this._container.appendChild(this._content);\n    if (this._toggle) {\n      this._toggle.innerHTML = this._getToggleButtonHtml('fas fa-chevron-up');\n    }\n    this.status = true;\n  }\n\n  close(): void {\n    this._cleanContent();\n    if (this._toggle) {\n      this._toggle.innerHTML = this._getToggleButtonHtml('fas fa-chevron-down');\n    }\n    this.status = false;\n  }\n\n  toggle(): void {\n    if (this.status) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  private _getToggleButtonHtml(icon?: string) {\n    return `\n    <a class=\"button is-small\">\n    <span class=\"icon is-small\">\n      <i class=\"${icon}\"></i>\n    </span>\n    </a>\n    `;\n  }\n\n  private _updateContainer() {\n    this._container.innerHTML = '';\n    if (this.options.title) {\n      const header = this._createHeader();\n      this._container.appendChild(header);\n    }\n    const content = document.createElement('div');\n    content.className = 'panel-content';\n    this._content = content;\n    this._container.appendChild(content);\n\n    if (this.status) {\n      this.open();\n    } else {\n      this.close();\n    }\n  }\n\n  private _createHeader() {\n    const header = document.createElement('div');\n    header.className = 'level is-mobile panel-header';\n\n    const leftLevel = document.createElement('div');\n    leftLevel.className = 'level-left';\n\n    const title = document.createElement('div');\n    title.className = 'level-item panel-header__title';\n    title.innerHTML = this.options.title;\n    leftLevel.appendChild(title);\n\n    const rightLevel = document.createElement('div');\n    rightLevel.className = 'level-right';\n    const toggle = document.createElement('div');\n    toggle.className = 'level-item panel-header__toggle';\n    rightLevel.appendChild(toggle);\n\n    toggle.onclick = () => {\n      this.toggle();\n    };\n    this._toggle = toggle;\n\n    header.appendChild(leftLevel);\n    header.appendChild(rightLevel);\n\n    return header;\n  }\n\n  private _cleanContent() {\n    this._content.innerHTML = '';\n  }\n\n  private _updateContent() {\n    this._cleanContent();\n    const html =\n      typeof this.options.content === 'function'\n        ? this.options.content()\n        : this.options.content;\n\n    this._content.appendChild(html);\n    return this._content;\n  }\n}\n","import { WebMap } from '@nextgis/webmap';\nimport { CheckProperty, ChangeEvent } from '@nextgis/item';\nimport { NgwWebmapItem, TreeGroup, TreeLayer } from '@nextgis/ngw-kit';\n\nexport class WebmapTreeItem {\n  private _container?: HTMLElement;\n\n  constructor(layer: NgwWebmapItem) {\n    const container = this._createTreeItem(layer);\n    if (container) {\n      this._container = container;\n    }\n  }\n\n  getContainer(): HTMLElement {\n    return this._container;\n  }\n\n  private _createTreeBranch(layers: NgwWebmapItem[]) {\n    const elem = document.createElement('div');\n    elem.className = 'tree-container__item-children';\n    layers.forEach((x) => {\n      if (x.item) {\n        const item = this._createTreeItem(x);\n        if (item) {\n          elem.appendChild(item);\n        }\n      }\n    });\n    return elem;\n  }\n\n  private _createTreeItem(layer: NgwWebmapItem) {\n    const item: TreeGroup | TreeLayer = layer.item;\n    if (!item) {\n      return false;\n    }\n    const elem = document.createElement('div');\n    elem.className = 'tree-container__item';\n    if (item.display_name) {\n      const input = document.createElement('input');\n      input.setAttribute('type', 'checkbox');\n      const value = item.item_type === 'layer' ? item.layer_enabled : true;\n      input.checked = value;\n\n      const visibility = layer.properties.property(\n        'visibility'\n      ) as CheckProperty;\n      if (visibility) {\n        visibility.emitter.on('change', (ev: ChangeEvent) => {\n          input.checked = ev.value;\n        });\n        input.onclick = () => {\n          visibility.set(input.checked, {\n            propagation: WebMap.keys.pressed('ctrl'),\n          });\n        };\n      }\n\n      const name = document.createElement('span');\n      name.innerHTML = item.display_name;\n\n      elem.appendChild(input);\n      elem.appendChild(name);\n    }\n\n    if (\n      item.item_type === 'group' ||\n      (item.item_type === 'root' && item.children.length)\n    ) {\n      const children = layer.tree.getChildren() as NgwWebmapItem[];\n      const treeBranch = this._createTreeBranch(children.reverse());\n      elem.appendChild(treeBranch);\n    }\n    return elem;\n  }\n}\n","import './FiresContainer.css';\n\nimport { FireResource } from 'src/App';\nimport { NgwMap } from '@nextgis/ngw-map';\nimport { CirclePaint } from '@nextgis/paint';\nimport { ResourceAdapter, NgwLayerOptions } from '@nextgis/ngw-kit';\n\nexport interface FiresContainerOptions {\n  ngwMap: NgwMap;\n  fires: NgwLayerOptions<'GEOJSON'>[];\n}\n\nexport class UserFiresContainer {\n  protected readonly ngwMap: NgwMap;\n  protected _container: HTMLElement;\n\n  constructor(protected options: FiresContainerOptions) {\n    this.ngwMap = options.ngwMap;\n    this._container = this._createContainer();\n  }\n\n  getContainer(): HTMLElement {\n    return this._container;\n  }\n\n  _createContainer(): HTMLElement {\n    const container = document.createElement('div');\n    container.className = 'fires-contentainer panel-content-padding ';\n\n    const fires = document.createElement('div');\n    fires.className = 'fires-contentainer__layers';\n    this.options.fires.forEach((f) => {\n      this._createFireItem(f, fires);\n    });\n    container.appendChild(fires);\n\n    return container;\n  }\n\n  _createFireItem(fire: FireResource, container: HTMLElement): void {\n    const elem = document.createElement('div');\n    elem.className = 'tree-container__item';\n    const layer = this.ngwMap.getLayer(fire.id) as ResourceAdapter;\n    if (layer && layer.item) {\n      const item = layer.item;\n      const input = document.createElement('input');\n      input.setAttribute('type', 'checkbox');\n\n      input.checked = true;\n\n      // visibility.emitter.on('change', (ev: CheckChangeEvent) => {\n      //   input.checked = ev.value;\n      // });\n      input.onclick = () => {\n        this.ngwMap.toggleLayer(fire.id, input.checked);\n      };\n\n      const name = document.createElement('span');\n\n      const displayName = item.resource.display_name.split('__')[0];\n\n      name.innerHTML = displayName.replace('fires', '').trim();\n\n      const symbol = this._createSymbol(fire);\n\n      elem.appendChild(input);\n      elem.appendChild(symbol);\n      elem.appendChild(name);\n\n      container.appendChild(elem);\n    }\n  }\n\n  _createSymbol(fire: FireResource): HTMLElement {\n    const symbol = document.createElement('span');\n    symbol.className = 'item-symbol';\n    const color = (fire.adapterOptions?.paint as CirclePaint).color;\n    if (typeof color === 'string') {\n      symbol.style.color = color;\n      symbol.style.borderColor = color;\n      symbol.style.backgroundColor = color;\n    }\n    return symbol;\n  }\n}\n","import './FiresContainer.css';\n\nimport { VectorResourceAdapter } from '@nextgis/ngw-kit';\nimport { UserFiresContainer } from './UserFiresContainer';\n\nconst SELECT = [\n  ['24', '24 часа'],\n  ['48', '48 часов'],\n  ['72', '72 часа'],\n  ['168', 'неделя'],\n];\n\nexport class FiresContainer extends UserFiresContainer {\n  _createContainer(): HTMLElement {\n    const container = super._createContainer();\n\n    const selector = this._createSelector();\n    container.insertBefore(selector, container.firstChild);\n\n    return container;\n  }\n\n  private _createSelector() {\n    const elem = document.createElement('div');\n    const label = document.createElement('label');\n\n    label.appendChild(document.createTextNode('Просмотр термоточек: '));\n    const selector = document.createElement('select');\n\n    SELECT.forEach((x) => {\n      const option = document.createElement('option');\n      option.value = x[0];\n      option.text = x[1];\n      selector.appendChild(option);\n    });\n\n    selector.onchange = () => {\n      this.options.fires.forEach((x) => {\n        const layer = this.ngwMap.getLayer(x.id) as VectorResourceAdapter;\n        layer.propertiesFilter([\n          [\n            'timestamp',\n            'ge',\n            Math.floor(Date.now() / 1000) - Number(selector.value) * 3600,\n          ],\n        ]);\n      });\n    };\n\n    label.appendChild(selector);\n    elem.appendChild(label);\n    return elem;\n  }\n}\n","import './BaseMapsContainer.css';\n\nimport { NgwMap, LayerAdapter } from '@nextgis/ngw-map';\n\nexport interface BaseMapsContainerOptions {\n  ngwMap: NgwMap;\n}\n\nexport class BaseMapsContainer {\n  private readonly ngwMap: NgwMap;\n  private _container: HTMLElement;\n  private _baseMapsContainer: HTMLElement;\n\n  constructor(private options: BaseMapsContainerOptions) {\n    this.ngwMap = options.ngwMap;\n    this._container = this._createContainer();\n    this.ngwMap.emitter.on('layer:add', (e) => {\n      if (this.ngwMap.isBaseLayer(e)) {\n        this._updateBaseMapContainer();\n      }\n    });\n  }\n\n  getContainer(): HTMLElement {\n    return this._container;\n  }\n\n  private _createContainer() {\n    const container = document.createElement('div');\n    container.className = 'basemaps-contentainer panel-content-padding control';\n\n    const basemaps = document.createElement('div');\n    basemaps.className = 'basemaps-contentainer__layers';\n    this._baseMapsContainer = basemaps;\n    container.appendChild(basemaps);\n    this._updateBaseMapContainer();\n    return container;\n  }\n\n  private _updateBaseMapContainer() {\n    this._baseMapsContainer.innerHTML = '';\n    // first checkbox to remove any basemap\n    this._createBaseMapItem();\n    this.ngwMap.getBaseLayers().forEach((x) => {\n      const layer = this.ngwMap.getLayer(x);\n      if (layer) {\n        this._createBaseMapItem(layer);\n      }\n    });\n  }\n\n  private _createBaseMapItem(baseMap?: LayerAdapter) {\n    const control = document.createElement('div');\n    control.className = 'control';\n    const elem = document.createElement('label');\n    elem.className = 'radio basemap-container__item';\n\n    const input = document.createElement('input');\n    input.setAttribute('type', 'radio');\n    input.setAttribute('name', 'basemap');\n\n    input.checked = this.ngwMap.isLayerVisible(baseMap);\n\n    // visibility.emitter.on('change', (ev: CheckChangeEvent) => {\n    //   input.checked = ev.value;\n    // });\n    input.onclick = () => {\n      if (baseMap) {\n        this.ngwMap.toggleLayer(baseMap.id, input.checked);\n      } else {\n        this.ngwMap.hideLayer(this.ngwMap.getActiveBaseLayer());\n      }\n    };\n    const layerName = baseMap && (baseMap.name || baseMap.options.name);\n    const displayName = layerName || 'Blank';\n    const name = document.createTextNode(displayName);\n\n    elem.appendChild(input);\n\n    elem.appendChild(name);\n\n    control.appendChild(elem);\n\n    this._baseMapsContainer.appendChild(control);\n  }\n}\n","import './BookmarksContainer.css';\n\nimport { Bookmark } from 'src/App';\nimport { NgwMap } from '@nextgis/ngw-map';\nimport { ResourceHierarchy, FeatureItem } from '@nextgis/ngw-connector';\nimport { GeoJSON, Map } from 'leaflet';\nimport { Polygon } from 'geojson';\n\nexport interface BookmarksContainerOptions {\n  ngwMap: NgwMap<Map>;\n  bookmarks: ResourceHierarchy[];\n}\n\nexport class BookmarksContainer {\n  private readonly ngwMap: NgwMap<Map>;\n  private _container: HTMLElement;\n\n  constructor(private options: BookmarksContainerOptions) {\n    this.ngwMap = options.ngwMap;\n    this._container = this._createContainer();\n  }\n\n  getContainer(): HTMLElement {\n    return this._container;\n  }\n\n  _createContainer(): HTMLElement {\n    const container = document.createElement('div');\n    container.className = 'bookmarks-contentainer panel-content-padding ';\n\n    const bookmarksContainer = document.createElement('div');\n    bookmarksContainer.className = 'bookmarks-contentainer__layers';\n    this.options.bookmarks.forEach((b) => {\n      this.ngwMap.connector\n        .get('resource.item', null, { id: b.id })\n        .then((resource) => {\n          const labelField = resource.feature_layer.fields.find(\n            (x) => x.label_field\n          );\n          this.ngwMap.getNgwLayerItems({ resourceId: b.id }).then((items) => {\n            items.forEach((x: FeatureItem<Bookmark, Polygon>) => {\n              const elem = this._createBookmarkItem(x, labelField.keyname);\n              container.appendChild(elem);\n            });\n          });\n        });\n    });\n    container.appendChild(bookmarksContainer);\n\n    return container;\n  }\n\n  _createBookmarkItem(\n    bookmark: FeatureItem<Bookmark, Polygon>,\n    nameField = 'name'\n  ): HTMLElement {\n    const elem = document.createElement('div');\n    elem.className = 'tree-container__item bookmark';\n    const bookmarkBlock = document.createElement('div');\n    bookmarkBlock.innerHTML = bookmark.fields[nameField];\n    bookmarkBlock.onclick = () => {\n      const geoJson = new GeoJSON(bookmark.geom);\n      const lMap = this.ngwMap.mapAdapter.map;\n      lMap.fitBounds(geoJson.getBounds());\n    };\n    elem.appendChild(bookmarkBlock);\n    return elem;\n  }\n}\n","import './MapSettingsPanel.css';\n\nimport Sidebar from 'leaflet-sidebar';\nimport 'leaflet-sidebar/src/L.Control.Sidebar.css';\n\nimport { MapSettingsPanelOptions } from './interfaces';\n\nimport { NgwLayers } from '@nextgis/ngw-map';\n\nimport { CollapsiblePanel } from './CollapsiblePanel';\nimport { WebmapTreeItem } from './WebmapTreeItem';\nimport { FiresContainer } from './FiresContainer';\nimport { BaseMapsContainer } from './BaseMapsContainer';\nimport { BookmarksContainer } from './BookmarksContainer';\nimport { ActionMap } from '../ActionMap';\nimport { UserFiresContainer } from './UserFiresContainer';\n\nconst OPTIONS: MapSettingsPanelOptions = {\n  target: 'tree',\n  // width: 300\n};\n\nexport class MapSettingsPanel {\n  options: MapSettingsPanelOptions;\n\n  sidebar: Sidebar;\n\n  private _container: HTMLElement;\n  private _target: HTMLElement;\n\n  private ngwLayers!: NgwLayers;\n\n  constructor(private actionMap: ActionMap, options: MapSettingsPanelOptions) {\n    this.options = { ...OPTIONS, ...options };\n    if (typeof this.options.target === 'string') {\n      const target = document.getElementById(this.options.target);\n      if (target) {\n        this._target = target;\n      } else {\n        throw new Error(\n          `No element with ID #${this.options.target} in document for webmap tree`\n        );\n      }\n    } else if (this.options.target instanceof HTMLElement) {\n      this._target = this.options.target;\n    }\n    this.sidebar = new Sidebar(this._target, {\n      closeButton: false,\n      position: 'left',\n      autoPan: false,\n    });\n    this.sidebar.addTo(this.actionMap.ngwMap.mapAdapter.map);\n\n    this.ngwLayers = this.options.ngwLayers;\n\n    this._container = this._createContainer();\n    if (!this.options.status) {\n      this.hide();\n    }\n    this._target.appendChild(this._container);\n  }\n\n  show(): void {\n    this._container.classList.remove('hidden');\n    this.sidebar.show();\n  }\n\n  hide(): void {\n    this.sidebar.hide();\n    this._container.classList.add('hidden');\n  }\n\n  private _createContainer() {\n    const container = document.createElement('div');\n    container.className = 'tree-container';\n\n    if (this.options.width !== undefined) {\n      container.style.width = this.options.width + 'px';\n    }\n\n    if (this.options.userFires) {\n      new CollapsiblePanel({\n        title: 'Пожары',\n        content: () => this._createUserFiresContainer(),\n        parent: container,\n      });\n    }\n    if (this.options.fires) {\n      new CollapsiblePanel({\n        title: 'Термоточки (FIRMS)',\n        content: () => this._createFiresContainer(),\n        parent: container,\n      });\n    }\n    new CollapsiblePanel({\n      title: 'Базовые слои',\n      content: () => this._createNgwLayers(),\n      open: false,\n      parent: container,\n    });\n    new CollapsiblePanel({\n      title: 'Подложки',\n      content: () => this._createBasemapsContainer(),\n      open: false,\n      parent: container,\n    });\n    new CollapsiblePanel({\n      title: 'Закладки',\n      content: () => this._createBookmarksContainer(),\n      open: false,\n      parent: container,\n    });\n\n    return container;\n  }\n\n  private _createNgwLayers() {\n    const container = document.createElement('div');\n    container.className = 'webmap-tree-container';\n    for (const n in this.ngwLayers) {\n      const ngwLayer = this.ngwLayers[n];\n      const tree = new WebmapTreeItem(ngwLayer.layer.layer);\n      const treeContainer = tree.getContainer();\n      if (treeContainer) {\n        container.appendChild(treeContainer);\n      }\n    }\n    return container;\n  }\n\n  private _createBookmarksContainer() {\n    const container = document.createElement('div');\n    const bookmarks = this.options.bookmarks;\n    if (bookmarks) {\n      const bookmarkContainer = new BookmarksContainer({\n        bookmarks,\n        ngwMap: this.options.ngwMap,\n      });\n      container.appendChild(bookmarkContainer.getContainer());\n    }\n    return container;\n  }\n\n  private _createUserFiresContainer() {\n    const container = document.createElement('div');\n    const fires = [this.options.userFires];\n    if (fires) {\n      const firesContainer = new UserFiresContainer({\n        fires,\n        ngwMap: this.options.ngwMap,\n      });\n      container.appendChild(firesContainer.getContainer());\n    }\n    return container;\n  }\n\n  private _createFiresContainer() {\n    const container = document.createElement('div');\n    const fires = this.options.fires;\n    if (fires) {\n      const firesContainer = new FiresContainer({\n        fires,\n        ngwMap: this.options.ngwMap,\n      });\n      container.appendChild(firesContainer.getContainer());\n    }\n    return container;\n  }\n\n  private _createBasemapsContainer() {\n    const container = document.createElement('div');\n    const fires = this.options.fires;\n    if (fires) {\n      const baseMapsContainer = new BaseMapsContainer({\n        ngwMap: this.options.ngwMap,\n      });\n      container.appendChild(baseMapsContainer.getContainer());\n    }\n    return container;\n  }\n}\n","import './GetCoordinateControl.css';\nimport '../ToggleControl.css';\nimport { ActionMap } from '../ActionMap';\nimport {\n  ToggleControlOptions,\n  MapClickEvent,\n  VectorLayerAdapter,\n  LayerDefinition,\n} from '@nextgis/ngw-map';\nimport { Clipboard } from '@nextgis/utils';\n\nimport { EventEmitter } from 'events';\nimport { Feature, Point } from 'geojson';\n\nexport interface GetCoordinatePanelControlOptions {\n  toggle?: (status: boolean) => void;\n}\n\nexport class GetCoordinatePanelControl implements ToggleControlOptions {\n  html = '<i class=\"fas fa-map-pin btn-control-icon \"></i>';\n  title = {\n    off: 'Полученить координаты с карты',\n    on: 'Выключить режим получения координат с карты',\n  };\n\n  addClass = 'toggle-control webmap-tree-control';\n  addClassOn = 'active';\n\n  status = false;\n\n  emitter = new EventEmitter();\n\n  private _toggle?: (status: boolean) => void;\n  private __onMapClick?: (e: MapClickEvent) => void;\n  private _layer!: VectorLayerAdapter;\n\n  constructor(\n    private actionMap: ActionMap,\n    options?: GetCoordinatePanelControlOptions\n  ) {\n    this._toggle = options.toggle;\n    this.actionMap.ngwMap\n      .addLayer('GEOJSON', {\n        id: 'show-coordinate-click',\n        visibility: true,\n        paint: { radius: 6 },\n        popup: true,\n        popupOptions: {\n          createPopupContent: (d: LayerDefinition<Feature<Point>>) => {\n            return this._createPopupContent(\n              d.feature.geometry.coordinates.map((x) => x.toFixed(5))\n            );\n          },\n        },\n      })\n      .then((layer) => {\n        if (layer) {\n          this._layer = layer;\n        }\n      });\n  }\n\n  onClick(status: boolean): void {\n    this.toggleControl(status);\n  }\n\n  show(): void {\n    this.actionMap.ngwMap.setCursor('crosshair');\n    this._removeClickListener();\n    this.__onMapClick = (e: MapClickEvent) => this._onMapClick(e);\n    this.actionMap.ngwMap.emitter.on('click', this.__onMapClick);\n  }\n\n  hide(): void {\n    this.actionMap.ngwMap.setCursor('default');\n    this._removeClickListener();\n    this.actionMap.ngwMap.clearLayerData(this._layer);\n  }\n\n  private _removeClickListener() {\n    if (this.__onMapClick) {\n      this.actionMap.ngwMap.emitter.off('click', this.__onMapClick);\n      this.__onMapClick = null;\n    }\n  }\n\n  private _onMapClick(e: MapClickEvent) {\n    const feature: Feature<Point> = {\n      type: 'Feature',\n      properties: {},\n      geometry: { type: 'Point', coordinates: [e.latLng.lng, e.latLng.lat] },\n    };\n    this.actionMap.ngwMap.setLayerData(this._layer, feature);\n  }\n\n  private toggleControl(status?: boolean) {\n    status = status !== undefined ? status : !this.status;\n    if (status) {\n      this.show();\n    } else {\n      this.hide();\n    }\n\n    this.status = status;\n    if (this._toggle) {\n      this._toggle(status);\n    }\n    this.emitter.emit('status', this.status);\n  }\n\n  private _createPopupContent([lng, lat]: string[]) {\n    const content = document.createElement('div');\n    const latLngStr = `${lat}, ${lng}`;\n    content.innerHTML = `\n    <span>Широта/Долгота:</span>\n    <span class=\"lat-lng-coord\"> ${latLngStr}</span>\n    <a href=\"#\" class=\"copy-to-clipboard\">\n    <i class=\"far fa-clipboard\"></i>\n    </a>`;\n    const clipBoardLink = content.getElementsByClassName(\n      'copy-to-clipboard'\n    )[0] as HTMLLinkElement;\n    clipBoardLink.onclick = () => {\n      Clipboard.copy(latLngStr);\n    };\n\n    return content;\n  }\n}\n","import 'leaflet/dist/leaflet.css';\nimport 'bulma-carousel/dist/css/bulma-carousel.min.css';\nimport './ActionMap.css';\n\nimport { Control, Map, Layer } from 'leaflet';\nimport ShareButtons from 'share-buttons/dist/share-buttons';\nimport PolylineMeasure from 'leaflet.polylinemeasure';\n\nimport {\n  NgwMap,\n  ToggleControl,\n  NgwLayers,\n  LocationEvent,\n  VectorAdapterOptions,\n} from '@nextgis/ngw-map';\nimport { CirclePaint } from '@nextgis/paint';\nimport {\n  NgwIdentify,\n  NgwLayerOptions,\n  getIdentifyItems,\n} from '@nextgis/ngw-kit';\nimport { getIcon } from '@nextgis/icons';\nimport MapAdapter from '@nextgis/leaflet-map-adapter';\nimport UrlRuntimeParams from '@nextgis/url-runtime-params';\nimport { QmsAdapterOptions } from '@nextgis/qms-kit';\nimport CancelablePromise from '@nextgis/cancelable-promise';\nimport { ResourceHierarchy } from '@nextgis/ngw-connector';\n\n// import MapAdapter from '@nextgis/ol-map-adapter';\n// import 'ol/ol.css';\n\nimport { AppOptions } from '../App';\nimport { Auth } from './Auth/Auth';\nimport { Popup } from './Popup';\nimport { MapSettingsPanel } from './MapSettingsPanel/MapSettingsPanel';\nimport { GetCoordinatePanelControl } from './GetCoordinateControl/GetCoordinateControl';\n\nexport class ActionMap {\n  ngwMap: NgwMap<Map, Layer, any>;\n\n  tree?: MapSettingsPanel;\n  treeControl?: Control & ToggleControl;\n\n  authControl?: Control & ToggleControl;\n  popup: Popup;\n\n  private _promises: { [name: string]: CancelablePromise<any> } = {};\n\n  private _stopToggleControlsCb: Array<{\n    name: string;\n    stop: () => void;\n  }> = [];\n\n  constructor(private options: AppOptions) {\n    this.popup = new Popup(this.ngwMap);\n  }\n\n  async create(opt: AppOptions): Promise<void> {\n    // const auth = new Auth(opt.mapOptions);\n    const mapOpt = { ...opt.mapOptions };\n    // try {\n    //   await auth.login();\n    //   mapOpt.connector = auth.connector;\n    // } catch (er) {\n    //   // cancel login\n    // }\n\n    this.ngwMap = new NgwMap({\n      mapAdapter: new MapAdapter(),\n      controls: [],\n      minZoom: 4,\n      runtimeParams: [new UrlRuntimeParams()],\n      ...mapOpt,\n    });\n    this.ngwMap.setCursor('default');\n    this.popup.setNgwMap(this.ngwMap);\n    if (opt.basemaps) {\n      this.ngwMap.onLoad().then(() =>\n        opt.basemaps.forEach((x, i) => {\n          this.ngwMap.addBaseLayer<any, QmsAdapterOptions>('QMS', {\n            ...x,\n            visibility: i === 0,\n          });\n        })\n      );\n    }\n    this.ngwMap.getPaintFunctions = { base: getIcon };\n\n    this.ngwMap.addControl('ZOOM', 'top-left');\n    this._createLocateControl();\n    this.ngwMap.addControl('ATTRIBUTION', 'bottom-right', {\n      customAttribution: [\n        '<a href=\"https://nextgis.com\" target=\"_blank\">©NextGIS</a>',\n      ],\n    });\n    this._createShareControl();\n    // await this._createAuthControl(auth);\n    // this.ngwMap.addControl(this.authControl, 'top-right');\n\n    const ngwLayers = await this.ngwMap.getNgwLayers();\n    const bookmarks: ResourceHierarchy[] = [];\n    Object.values(ngwLayers).forEach((x) => {\n      const bookmark =\n        x.layer.item &&\n        x.layer.item.webmap &&\n        x.layer.item.webmap.bookmark_resource;\n      if (bookmark) {\n        bookmarks.push(bookmark);\n      }\n    });\n    await this._addUserFires(opt.userFires);\n    await this._addFires(opt.fires);\n    this._createGetCoordinateControl();\n    this._addTreeControl({\n      ngwLayers,\n      fires: opt.fires,\n      userFires: opt.userFires,\n      bookmarks,\n    });\n    this.ngwMap.addControl(this._crateMeasureControl(), 'top-left');\n\n    this._addEventsListeners();\n  }\n\n  private _locate() {\n    const locationfound = (e: LocationEvent) => {\n      const lngLat = e.lngLat;\n      // const lngLat: [number, number] = [40, 46];\n      // TODO: get extent from webmap or frame layer;\n      // const extent = this.ngwMap.getBounds();\n      // if (extent) {\n      //   const [minLng, minLat, maxLng, maxLat] = extent;\n      //   const [lng, lat] = lngLat;\n      //   const isLngInBbox = minLng < lng && lng < maxLng;\n      //   const isLatInBbox = minLat < lat && lat < maxLat;\n      //   if (isLngInBbox && isLatInBbox) {\n      //     this.ngwMap.setCenter(lngLat);\n      //   }\n      // }\n      this.ngwMap.setCenter(lngLat);\n    };\n\n    this.ngwMap.locate({ setView: false }, { locationfound });\n  }\n\n  private async _createAuthControl(auth: Auth) {\n    const authBtn = document.getElementsByClassName(\n      'js-auth-btn'\n    )[0] as HTMLElement;\n    const getStatus = () => {\n      return !!(this.ngwMap.connector && this.ngwMap.connector.user);\n    };\n    const onClick = () => {\n      auth.logout();\n      window.location.reload();\n    };\n    authBtn.innerHTML = getStatus() ? 'Выйти' : 'Войти';\n    authBtn.style.display = 'block';\n    authBtn.addEventListener('click', onClick);\n  }\n\n  private _createShareControl() {\n    const shareModal = document.getElementsByClassName('js-modal')[0];\n    const closeModalBtn = document.getElementsByClassName('js-modal-close')[0];\n    const shareModalContent = document.getElementsByClassName(\n      'js-share-modal-content'\n    )[0];\n    const shareInput = document.getElementsByClassName(\n      'js-share-input'\n    )[0] as HTMLInputElement;\n    const showModal = () => {\n      const href = location.href;\n      const html = this._createShareModalContent(href);\n      shareInput.value = href;\n      shareModalContent.innerHTML = html;\n      ShareButtons.update();\n      shareModal.classList.add('is-active');\n    };\n    const closeModal = () => {\n      shareModalContent.innerHTML = '';\n      shareModal.classList.remove('is-active');\n    };\n    closeModalBtn.addEventListener('click', () => {\n      closeModal();\n    });\n\n    const shareControl = this.ngwMap.createButtonControl({\n      html: '<i class=\"fas fa-share-alt btn-control-icon \"></i>',\n      onClick() {\n        showModal();\n      },\n    });\n    this.ngwMap.addControl(shareControl, 'bottom-right');\n  }\n\n  private async _createGetCoordinateControl() {\n    const control = new GetCoordinatePanelControl(this, {\n      toggle: (status) => {\n        if (status) {\n          this._stopToggleControlsFor('coordinate');\n          this.ngwMap.disableSelection();\n        } else {\n          this.ngwMap.enableSelection();\n        }\n      },\n    });\n    const toggleControl = await this.ngwMap.createToggleControl(control);\n    this.ngwMap.addControl(toggleControl, 'top-left');\n    this._stopToggleControlsCb.push({\n      name: 'coordinate',\n      stop: () => toggleControl.onClick(false),\n    });\n  }\n\n  private _createLocateControl() {\n    const onClick = () => this._locate();\n    const locateControl = this.ngwMap.createButtonControl({\n      html: '<i class=\"fas fa-location-arrow btn-control-icon\"></i>',\n      title: 'Найти меня на карте',\n      onClick,\n    });\n    this.ngwMap.addControl(locateControl, 'top-left');\n  }\n\n  private _createShareModalContent(url: string) {\n    const social = [\n      { id: 'tw', name: 'Twitter', icon: 'fab fa-twitter' },\n      { id: 'vk', name: 'VK', icon: 'fab fa-vk' },\n      { id: 'fb', name: 'Facebook', icon: 'fab fa-facebook-square' },\n    ];\n\n    const html = `<div class=\"buttons share-btn js-share-btn\" data-url=\"${url}\" data-title=\"\" data-desc=\"\">\n      ${social\n        .map(\n          (x) => `<a class=\"button is-primary\" data-id=\"${x.id}\">\n                    <span class=\"icon\">\n                        <i class=\"${x.icon}\"></i>\n                    </span>\n                    <span>${x.name}</span>\n                </a>`\n        )\n        .join('')}\n    </div>`;\n    return html;\n  }\n\n  private async _addUserFires(\n    x?: NgwLayerOptions<'GEOJSON'>,\n    adapterOptions?: VectorAdapterOptions\n  ) {\n    if (x) {\n      const paint = x.adapterOptions.paint as CirclePaint;\n      this.ngwMap.addNgwLayer({\n        resource: x,\n        id: x.id,\n\n        adapterOptions: {\n          paint: {\n            ...paint,\n            stroke: true,\n            fillOpacity: 0.6,\n            radius: 5,\n          },\n          selectable: true,\n          selectedPaint: {\n            ...paint,\n            stroke: true,\n            fillOpacity: 0.9,\n            radius: 7,\n          },\n          ...adapterOptions,\n        },\n      });\n    }\n  }\n\n  private async _addFires(fires?: NgwLayerOptions<'GEOJSON'>[]) {\n    if (fires) {\n      for (const x of fires) {\n        await this._addUserFires(x, {\n          propertiesFilter: [\n            [\n              'timestamp',\n              'ge',\n              Math.floor(Date.now() / 1000) -\n                Number(this.options.timedelta) * 3600,\n            ],\n          ],\n        });\n      }\n    }\n  }\n\n  private async _addTreeControl(opt: {\n    ngwLayers: NgwLayers;\n    fires: NgwLayerOptions<'GEOJSON'>[];\n    userFires: NgwLayerOptions<'GEOJSON'>;\n    bookmarks: ResourceHierarchy[];\n  }) {\n    const sidebarToggleBtn = document.getElementsByClassName('js-sidebar')[0];\n\n    const isActive = () => sidebarToggleBtn.classList.contains('is-active');\n    const activeBurger = () => sidebarToggleBtn.classList.add('is-active');\n    const disactiveBurger = () =>\n      sidebarToggleBtn.classList.remove('is-active');\n\n    await this.ngwMap.onLoad();\n\n    this.tree = new MapSettingsPanel(this, {\n      ...opt,\n      ngwMap: this.ngwMap,\n    });\n\n    const toggle = (status?: boolean) => {\n      status = status !== undefined ? status : isActive();\n      if (status) {\n        this._stopToggleControlsFor('tree');\n        this.tree.show();\n        activeBurger();\n      } else {\n        this.tree.hide();\n        disactiveBurger();\n      }\n    };\n    sidebarToggleBtn.addEventListener('click', () => {\n      toggle();\n    });\n    setTimeout(() => {\n      toggle();\n    }, 500);\n    this._stopToggleControlsCb.push({\n      name: 'tree',\n      stop: () => toggle(false),\n    });\n  }\n\n  private _clean() {\n    if (\n      this._promises.getFeaturePromise &&\n      this._promises.getFeaturePromise.cancel\n    ) {\n      this._promises.getFeaturePromise.cancel();\n    }\n    this.ngwMap.removeLayer('highlight');\n  }\n\n  private _highlighNgwLayer(e: NgwIdentify) {\n    this._clean();\n    const paramsList = getIdentifyItems(e);\n    const params = paramsList[0];\n    if (params) {\n      const resourceId = params.resourceId;\n      this.ngwMap\n        .fetchIdentifyItem(e, {\n          extensions: ['attachment'],\n        })\n        .then((item) => {\n          item.toGeojson().then((geojson) => {\n            this.ngwMap.addLayer('GEOJSON', {\n              id: 'highlight',\n              data: geojson,\n              visibility: true,\n              paint: { color: 'green', stroke: true, fillOpacity: '0.8' },\n              // selectable: true,\n              selectOnHover: true,\n              popup: true,\n              // popupOnSelect: true,\n              popupOptions: {\n                createPopupContent: (e) => {\n                  if (e.feature) {\n                    const element = this.popup.createPopupContent(\n                      e.feature,\n                      resourceId\n                    );\n                    if (\n                      item.extensions.attachment &&\n                      item.extensions.attachment.length\n                    ) {\n                      this.popup._addPhotos(\n                        element,\n                        item.extensions.attachment,\n                        params.resourceId,\n                        params.featureId\n                      );\n                    }\n                    return element;\n                  }\n                },\n              },\n            });\n          });\n        });\n    }\n  }\n\n  private _stopToggleControlsFor(excludeControlName?: string) {\n    this._stopToggleControlsCb.forEach((x) => {\n      if (x.name !== excludeControlName) {\n        x.stop();\n      }\n    });\n  }\n\n  private _addEventsListeners() {\n    this.ngwMap.emitter.on('click', () => {\n      this.ngwMap.cancelPromise('identify', 'select');\n    });\n    this.ngwMap.emitter.on('ngw:select', (e) => this._highlighNgwLayer(e));\n  }\n\n  private _crateMeasureControl() {\n    const measureControl = new PolylineMeasure({\n      showBearings: true,\n      bearingTextIn: 'In',\n      bearingTextOut: 'Out',\n      tooltipTextFinish: 'Кликните чтобы <b>завершить изменрение</b><br>',\n      tooltipTextDelete: 'SHIFT + клик чтобы <b>удалить точку</b>',\n      tooltipTextMove: 'Клик + тянуть чтобы <b>передвинуть точку</b><br>',\n      tooltipTextResume: '<br>CTRL + клик чтобы <b>продолжить линию</b>',\n      tooltipTextAdd: 'CTRL + клик чтобы <b>добавить точку</b>',\n      measureControlTitleOn: 'Перейти в режим измерения',\n      measureControlTitleOff: 'Выйти из режима измерений',\n      measureControlLabel:\n        '<i class=\"fas fa-ruler-combined btn-control-icon\"></i>',\n      measureControlClasses: [],\n      unitControlLabel: {\n        metres: 'м',\n        kilometres: 'км',\n      },\n    });\n    // @ts-ignore\n    this.ngwMap.mapAdapter.map.on(\n      // @ts-ignore\n      'polylinemeasure:toggle',\n      (opt: { sttus: boolean }) => {\n        if (opt.sttus) {\n          this._stopToggleControlsFor('measure');\n          this.ngwMap.disableSelection();\n        } else {\n          this.ngwMap.setCursor('default');\n          this.ngwMap.enableSelection();\n        }\n      }\n    );\n    this._stopToggleControlsCb.push({\n      name: 'measure',\n      stop: () => {\n        if (measureControl._measuring) {\n          measureControl._toggleMeasure();\n        }\n      },\n    });\n    return measureControl;\n  }\n}\n","import { ActionMap } from './components/ActionMap';\nimport './bulma';\n\nimport type { NgwMapOptions } from '@nextgis/ngw-map';\nimport type { NgwLayerOptions } from '@nextgis/ngw-kit';\nexport interface AsuLayer {\n  name: string;\n}\n\nexport interface ConnectionOptions {\n  acsUrl?: string;\n  authUrl: string;\n  showUrl: string;\n}\n\nexport type FireResource = NgwLayerOptions<'GEOJSON'>;\n\nexport interface Bookmark {\n  id: string;\n  name: string;\n}\n\nexport type Bookmarks = Bookmark[];\n\nexport interface BaseLayer {\n  name?: string;\n  qmsId: number;\n}\n\nexport interface AppOptions {\n  mapOptions?: NgwMapOptions;\n  fires?: NgwLayerOptions<'GEOJSON'>[];\n  userFires?: NgwLayerOptions<'GEOJSON'>;\n  basemaps?: BaseLayer[];\n  timedelta?: 24;\n}\n\nexport class App {\n  actionMap = new ActionMap(this.options);\n\n  constructor(public options?: AppOptions) {}\n\n  async create(options?: AppOptions): Promise<void> {\n    this.options = { ...this.options, ...options };\n    this.actionMap.create(this.options);\n  }\n}\n","import 'core-js';\nimport 'regenerator-runtime/runtime';\nimport { deepmerge } from '@nextgis/utils';\nimport { App, AppOptions } from './App';\n\nimport './style/style.scss';\n\nlet config: AppOptions = {};\ntry {\n  config = require('../config').default;\n} catch (er) {\n  console.warn('Config file is not funded, run with default settings');\n}\n\nconst OPTIONS: AppOptions = {\n  mapOptions: {\n    target: 'map',\n    bounds: [36.59, 43.385, 49.374, 50.214],\n  },\n  timedelta: 24,\n};\nconst options = deepmerge(OPTIONS, config);\nconst app = new App(options);\n\napp.create();\n"],"sourceRoot":""}