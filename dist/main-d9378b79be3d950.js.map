{"version":3,"file":"main-d9378b79be3d950.js","mappings":"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","sources":["webpack://clear_horizon/./@nextgis/packages/url-runtime-params/src/UrlRuntimeParams.ts","webpack://clear_horizon/./@nextgis/packages/url-runtime-params/src/index.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/applyMixins.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/defined.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/deepmerge.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/deprecated/deprecatedMapClick.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/deprecated/deprecatedWarn.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/debounce.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/geom/getBoundsPolygon.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/platform.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/geom/constants.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/geom/getCirclePolygon.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/geom/coordTransform.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/geom/isLngLatBoundsArray.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/object/objectAssign.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/object/objectDeepEqual.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/object/objectRemoveEmpty.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/re/reEscape.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/url.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/Clipboard.ts","webpack://clear_horizon/./@nextgis/packages/utils/src/index.ts"],"sourcesContent":["import type { RuntimeParams } from '@nextgis/webmap';\nimport type { Params, StateData } from './interfaces';\n\nexport class UrlRuntimeParams implements RuntimeParams {\n  private _params: Params = {};\n\n  get(name: string): any {\n    return this.params()[name];\n  }\n\n  params(): Record<string, string> {\n    // if (this._params) {\n    //   return this._params;\n    // }\n    const href = window.location.href.replace(/#$/, '');\n    const params: Params = {};\n    href.replace(/[?&]+(\\w+)([^&]*)/gi, function (m, key) {\n      params[key] = true;\n      return ''; // does not matter\n    });\n    href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\n      params[key] = decodeURIComponent(value);\n      return ''; // does not matter\n    });\n    this._params = params;\n    return params;\n  }\n\n  set(name: string, value: string): StateData {\n    if (value) {\n      let search: string;\n      const urlComponent = encodeURIComponent(value);\n      const existUrlParam = this.get(name);\n      if (existUrlParam) {\n        search = location.search.replace(\n          new RegExp('([?|&]' + name + '=)' + '(.+?)(&|$)'),\n          '$1' + urlComponent + '$3',\n        );\n      } else if (location.search.length) {\n        search = location.search + '&' + name + '=' + urlComponent;\n      } else {\n        search = '?' + name + '=' + urlComponent;\n      }\n      const params: Params = {};\n      params[name] = value;\n      this._params[name] = value;\n      const data: StateData = { state: { url: search, params }, url: search };\n      this._pushState(data);\n      return data;\n    } else {\n      return this.remove(name);\n    }\n  }\n\n  remove(name: string): StateData {\n    const sourceUrl = location.search;\n    let rtn = sourceUrl.split('?')[0];\n    let param: string;\n    let paramsArr: string[];\n    const queryString =\n      sourceUrl.indexOf('?') !== -1 ? sourceUrl.split('?')[1] : '';\n    if (queryString !== '') {\n      paramsArr = queryString.split('&');\n      for (let i = paramsArr.length - 1; i >= 0; i -= 1) {\n        param = paramsArr[i].split('=')[0];\n        if (param === name) {\n          paramsArr.splice(i, 1);\n        }\n      }\n      rtn = rtn + '?' + paramsArr.join('&');\n    }\n\n    delete this._params[name];\n\n    const data: StateData = { state: { url: rtn, type: 'remove' }, url: rtn };\n    this._pushState(data);\n\n    return data;\n  }\n\n  private _pushState(data: StateData): void {\n    if (history) {\n      history.replaceState(null, document.title, data.url);\n    }\n  }\n}\n","/**\n * @module url-runtime-params\n */\n\nimport { UrlRuntimeParams } from './UrlRuntimeParams';\n\nexport * from './interfaces';\n\nexport default UrlRuntimeParams;\n","export interface ApplyMixinOptions {\n  replace?: boolean;\n}\n\ntype Ctor = any;\n\nexport function applyMixins(\n  derivedCtor: Ctor,\n  baseCtors: Ctor[],\n  opt: ApplyMixinOptions = {},\n): void {\n  const derivedProperties = allProperties(derivedCtor.prototype);\n  const replace = opt.replace !== undefined ? opt.replace : true;\n  baseCtors.forEach((baseCtor) => {\n    Object.getOwnPropertyNames(baseCtor.prototype).forEach((name) => {\n      const isSomeProp = derivedProperties.indexOf(name) !== -1;\n      if ((!replace && !isSomeProp) || replace) {\n        const descriptor = Object.getOwnPropertyDescriptor(\n          baseCtor.prototype,\n          name,\n        );\n        if (descriptor) {\n          Object.defineProperty(derivedCtor.prototype, name, descriptor);\n        }\n      }\n    });\n  });\n}\n\nexport function allProperties(obj: Record<string, unknown>): string[] {\n  return _allProperties(obj);\n}\n\nexport function _allProperties(\n  obj: Record<string, unknown>,\n  _props: string[] = [],\n): string[] {\n  for (; obj !== null; obj = Object.getPrototypeOf(obj)) {\n    const op = Object.getOwnPropertyNames(obj);\n    for (let i = 0; i < op.length; i++) {\n      if (_props.indexOf(op[i]) == -1) {\n        _props.push(op[i]);\n      }\n    }\n  }\n  return _props;\n}\n\nexport function mixinProperties(\n  derivedCtor: Ctor,\n  baseCtor: Ctor,\n  properties: string[],\n): void {\n  properties.forEach((name) => {\n    const descriptor = Object.getOwnPropertyDescriptor(\n      baseCtor.prototype,\n      name,\n    );\n    if (descriptor) {\n      Object.defineProperty(derivedCtor.prototype, name, descriptor);\n    }\n  });\n}\n","/**\n * from https://github.com/CesiumGS/cesium/blob/master/Source/Core/defined.js\n *\n * @param val - The object.\n * @returns Returns true if the object is defined, returns false otherwise.\n *\n * @example\n * ```javascript\n * if (defined(positions)) {\n *   doSomething();\n * } else {\n *   doSomethingElse();\n * }\n * ```\n */\nexport function defined<T>(val: T): val is Exclude<T, null | undefined> {\n  return val !== undefined && val !== null;\n}\n\n/**\n * from https://github.com/CesiumGS/cesium/blob/master/Source/Core/defined.js\n *\n * @param val - The object.\n * @returns Returns true if the object is defined and not empty string, returns false otherwise.\n *\n * @example\n * ```javascript\n * full('foo') // true\n * full('') // false\n * full(undefined) // false\n * full(0) // true\n * ```\n */\nexport function full<T>(val: T): val is Exclude<T, null | undefined> {\n  return typeof val === 'string' ? !!val : defined(val);\n}\n","export function deepmerge<T>(\n  x: Partial<T>,\n  y: Partial<T>,\n  mergeArray?: boolean,\n): T;\nexport function deepmerge<T1, T2>(\n  target: Partial<T1>,\n  src: Partial<T2>,\n  mergeArray = false,\n): T1 & T2 {\n  let target_ = target as any;\n  const src_ = src as any;\n  const array = Array.isArray(src_);\n  let dst: any = (array && []) || {};\n\n  if (array && Array.isArray(src_)) {\n    if (mergeArray) {\n      target_ = target_ || [];\n      dst = dst.concat(target_);\n      src_.forEach((e: any, i: number) => {\n        if (typeof dst[i] === 'undefined') {\n          dst[i] = e;\n        } else if (typeof e === 'object') {\n          dst[i] = deepmerge(target_[i], e, mergeArray);\n        } else {\n          if (target_.indexOf(e) === -1) {\n            dst.push(e);\n          }\n        }\n      });\n    } else {\n      // Replace array. Do not merge by default\n      dst = src_;\n    }\n  } else {\n    if (target_ && typeof target_ === 'object') {\n      Object.keys(target_).forEach(function (key) {\n        dst[key] = target_[key];\n      });\n    }\n    Object.keys(src_).forEach(function (key) {\n      if (typeof src_[key] !== 'object' || !src_[key]) {\n        dst[key] = src_[key];\n      } else {\n        if (typeof target_[key] === 'object' && typeof src_[key] === 'object') {\n          dst[key] = deepmerge(target_[key], src_[key], mergeArray);\n        } else {\n          dst[key] = src_[key];\n        }\n      }\n    });\n  }\n  return dst;\n}\n","import { debugLog } from '../debug/debugLog';\n\nimport type { LatLng } from '../geom/interfaces';\nimport type { LngLatArray } from '../geom/interfaces';\n\ninterface DeprecatedMapClickEvent {\n  lngLat: LngLatArray;\n  latLng?: LatLng;\n}\n\n/**\n *\n * @param ev @deprecated\n */\nexport function deprecatedMapClick<\n  T extends DeprecatedMapClickEvent = DeprecatedMapClickEvent,\n>(ev: T): T {\n  if (!ev.lngLat && ev.latLng) {\n    debugLog('deprecated use of latLng in MapClickEvent, use lngLat instead');\n    const lat = ev.latLng.lat;\n    const lng = ev.latLng.lng;\n    ev.lngLat = [lng, lat];\n  }\n  return ev;\n}\n","export function deprecatedWarn(message: string): void {\n  console.warn(`DEPRECATED WARN: ${message}`);\n}\n","// based on https://github.com/bvaughn/debounce-decorator\n\nexport function debounce<T extends (...args: any[]) => void>(\n  cb: T,\n  wait = 10,\n): T & { clear: () => void } {\n  let timeoutId: any;\n\n  function wrapper(this: any, ...args: any[]) {\n    wrapper.clear();\n\n    timeoutId = setTimeout(() => {\n      timeoutId = null;\n      cb.apply(this, args);\n    }, wait);\n  }\n\n  wrapper.clear = function () {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n    }\n  };\n\n  return wrapper as T & { clear: () => void };\n}\n\nexport function DebounceDecorator(wait = 10) {\n  return function (\n    target: unknown,\n    key: string,\n    descriptor: PropertyDescriptor,\n  ): PropertyDescriptor {\n    return {\n      configurable: true,\n      enumerable: descriptor.enumerable,\n      get: function getter() {\n        // Attach this function to the instance (not the class)\n        Object.defineProperty(this, key, {\n          configurable: true,\n          enumerable: descriptor.enumerable,\n          value: debounce(descriptor.value, wait),\n        });\n        // @ts-ignore\n        return this[key];\n      },\n    };\n  };\n}\n","import type { Feature, Polygon } from 'geojson';\nimport type { LngLatBoundsArray } from './interfaces';\n\nexport function getBoundsPolygon(b: LngLatBoundsArray): Polygon {\n  const polygon: Polygon = {\n    type: 'Polygon',\n    coordinates: [getBoundsCoordinates(b)],\n  };\n  return polygon;\n}\n\nexport function getBoundsCoordinates(b: LngLatBoundsArray): number[][] {\n  const westNorth = [b[0], b[1]];\n  const eastNorth = [b[2], b[1]];\n  const eastSouth = [b[2], b[3]];\n  const westSouth = [b[0], b[3]];\n\n  return [westNorth, eastNorth, eastSouth, westSouth, westNorth];\n}\n\nexport function getBoundsFeature(b: LngLatBoundsArray): Feature<Polygon> {\n  const feature: Feature<Polygon> = {\n    type: 'Feature',\n    properties: {},\n    geometry: getBoundsPolygon(b),\n  };\n  return feature;\n}\n","export const isBrowser =\n  typeof window !== 'undefined' && typeof window.document !== 'undefined';\n\nexport const type: 'browser' | 'node' = isBrowser ? 'browser' : 'node';\n\nexport function getGlobalVariable(): any {\n  if (isBrowser) {\n    return window;\n  } else {\n    // NativeScript uses global, not window\n    return global;\n  }\n}\n","/**\n * Radius of the earth in kilometers\n */\nexport const EARTHS_RADIUS = 6371;\n","import type { Feature, Polygon } from 'geojson';\nimport { EARTHS_RADIUS } from './constants';\n\nconst d2r = Math.PI / 180; // degrees to radians\nconst r2d = 180 / Math.PI; // radians to degrees\n\nexport function getCirclePolygonCoordinates(\n  lng: number,\n  lat: number,\n  radius = 10,\n  points = 6,\n): number[][] {\n  // find the radius in lat/lon\n  const rlat = (radius / EARTHS_RADIUS) * r2d;\n  const rlng = rlat / Math.cos(lat * d2r);\n\n  const extp = [];\n  for (let i = 0; i < points + 1; i++) {\n    // one extra here makes sure we connect the\n\n    const theta = Math.PI * (i / (points / 2));\n    const ex = lng + rlng * Math.cos(theta); // center a + radius x * cos(theta)\n    const ey = lat + rlat * Math.sin(theta); // center b + radius y * sin(theta)\n    extp.push([ex, ey]);\n  }\n\n  return extp;\n}\n\n\nexport function getCircleFeature(\n  lng: number,\n  lat: number,\n  radius = 10,\n  points = 6,\n): Feature<Polygon> {\n  const polygon = getCirclePolygonCoordinates(lng, lat, radius, points);\n  const feature: Feature<Polygon> = {\n    type: 'Feature',\n    properties: {},\n    geometry: {\n      type: 'Polygon',\n      coordinates: [polygon],\n    },\n  };\n  return feature;\n}\n","import type { LngLatArray } from './interfaces';\n\nexport function degrees2meters(lng: number, lat: number): [number, number] {\n  lat = lat > 85.06 ? 85.06 : lat < -85.06 ? -85.06 : lat;\n\n  const x = (lng * 20037508.34) / 180;\n  let y = Math.log(Math.tan(((90 + lat) * Math.PI) / 360)) / (Math.PI / 180);\n  y = (y * 20037508.34) / 180;\n  return [x, y];\n}\n\nexport function meters2degrees(x: number, y: number): LngLatArray {\n  const lon = (x * 180) / 20037508.34;\n  const lat =\n    (Math.atan(Math.exp((y * Math.PI) / 20037508.34)) * 360) / Math.PI - 90;\n  return [lon, lat];\n}\n\nexport function degrees2Radian(deg: number): number {\n  return (deg * Math.PI) / 180;\n}\n\n// export function degrees2meters2(lon: number, lat: number): [number, number] {\n//   const radius = 6378137.0;\n//   const x = (radius * lon * Math.PI) / 180.0;\n//   const y =\n//     radius * Math.log(Math.tan(Math.PI / 4.0 + (lat * Math.PI) / 360.0));\n//   return [x, y];\n// }\n\n// export function meters2degress2(x: number, y: number): LngLatArray {\n//   const radius = 6378137.0;\n//   const lon = (180 / Math.PI) * (x / radius);\n//   const lat = (360 / Math.PI) * (Math.atan(Math.exp(y / radius)) - Math.PI / 4);\n//   return [lon, lat];\n// }\n\n// const lon = -77.035974;\n// const lat = 38.898717;\n\n// console.log(degrees2meters(lon, lat), degrees2meters2(lon, lat));\n\n// const x = -8575605.398443861;\n// const y = 4707174.018280405;\n\n// console.log(meters2degress(x, y), meters2degress2(x, y));\n","import { LngLatBoundsArray } from '@nextgis/webmap';\n\nexport function isLngLatBoundsArray(\n  array: unknown,\n): array is LngLatBoundsArray {\n  return (\n    Array.isArray(array) &&\n    array.length === 4 &&\n    array.every((x) => typeof x === 'number')\n  );\n}\n","export function objectAssign<T, U>(target: T, source: U): T & U;\n\n/**\n * Copy the values of all of the enumerable own properties from one or more source objects to a\n * target object. Returns the target object.\n * @param target - The target object to copy to.\n * @param source1 - The first source object from which to copy properties.\n * @param source2 - The second source object from which to copy properties.\n */\nexport function objectAssign<T, U, V>(\n  target: T,\n  source1: U,\n  source2: V,\n): T & U & V;\n\n/**\n * Copy the values of all of the enumerable own properties from one or more source objects to a\n * target object. Returns the target object.\n * @param target - The target object to copy to.\n * @param source1 - The first source object from which to copy properties.\n * @param source2 - The second source object from which to copy properties.\n * @param source3 - The third source object from which to copy properties.\n */\nexport function objectAssign<T, U, V, W>(\n  target: T,\n  source1: U,\n  source2: V,\n  source3: W,\n): T & U & V & W;\n\n/**\n * Copy the values of all of the enumerable own properties from one or more source objects to a\n * target object. Returns the target object.\n * @param target - The target object to copy to.\n * @param sources - One or more source objects from which to copy properties\n */\nexport function objectAssign(\n  target: Record<string, unknown>,\n  ...sources: any[]\n): any {\n  for (const source of sources) {\n    for (const prop of Object.getOwnPropertyNames(source)) {\n      (target as any)[prop] = source[prop];\n    }\n  }\n}\n","function isEqual(a: unknown, b: unknown, o: unknown, p: unknown): boolean {\n  if (a instanceof Array) {\n    if (!(b instanceof Array)) return false;\n    //if (compareObjects(oVal, pVal === false) return false\n    //would work, too, and perhaps is a better fit, still, this is easy, too\n    return b.sort().join('') === a.sort().join('');\n  } else if (a instanceof Date) {\n    if (!(b instanceof Date)) return false;\n    return '' + a === '' + b;\n  } else if (a instanceof Function) {\n    if (!(b instanceof Function)) return false;\n    //ignore functions, or check them regardless?\n  } else if (a instanceof Object) {\n    if (!(b instanceof Object)) return false;\n    if (a === o) {\n      return b === p;\n    } else {\n      return objectDeepEqual(a, b);\n    }\n  }\n  return a === b;\n}\n\n// based on https://stackoverflow.com/a/13143059\nexport function objectDeepEqual<\n  T extends Record<string, any> = Record<string, any>,\n>(o: T, p: T): boolean {\n  const keysO = Object.keys(o).sort();\n  const keysP = Object.keys(p).sort();\n  if (keysO.length !== keysP.length) return false;\n  if (keysO.join('') !== keysP.join('')) return false;\n  for (let i = 0; i < keysO.length; i++) {\n    const oVal = o[keysO[i]];\n    const pVal = p[keysP[i]];\n    if (!isEqual(oVal, pVal, o, p)) {\n      return false;\n    }\n  }\n  return true;\n}\n","export function objectRemoveEmpty<T extends Record<any, any>>(obj: T): T {\n  const newObj: Record<any, any> = {} as T;\n  Object.keys(obj).forEach((key) => {\n    if (!(obj[key] instanceof Array) && obj[key] === Object(obj[key])) {\n      newObj[key] = objectRemoveEmpty(obj[key]);\n    } else if (obj[key] !== undefined) {\n      newObj[key] = obj[key];\n    }\n  });\n  return newObj;\n}\n","export function reEscape(s: string): string {\n  return s.replace(/[-/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n}\n","export function fixUrlStr(url: string): string {\n  // remove double slash\n  return url.replace(/([^:]\\/)\\/+/g, '$1');\n}\n","export class Clipboard {\n  silent = true;\n\n  constructor(text?: string) {\n    if (text) {\n      this.copy(text);\n    }\n  }\n\n  static copy(text: string): Clipboard {\n    const clipboard = new Clipboard();\n    clipboard.copy(text);\n    return clipboard;\n  }\n\n  copy(text: string): boolean {\n    try {\n      if ((navigator as any).clipboard) {\n        (navigator as any).clipboard.writeText(text);\n      } else if ((window as any).clipboardData) {\n        (window as any).clipboardData.setData('text', text);\n      } else {\n        this.copyToClipboard(text);\n      }\n      !this.silent && console.log('Copied to Clipboard');\n      return true\n    } catch (e) {\n      !this.silent && console.log('Please copy manually');\n    }\n    return false;\n  }\n\n  private copyToClipboard(text: string) {\n    const input = document.createElement('input') as HTMLInputElement;\n    input.value = text;\n    try {\n      document.body.appendChild(input);\n      this.copyNodeContentsToClipboard(input);\n    } finally {\n      document.body.removeChild(input);\n    }\n  }\n\n  private copyNodeContentsToClipboard(input: HTMLInputElement) {\n    input.select();\n    input.setSelectionRange(0, 99999); /*For mobile devices*/\n    document.execCommand('copy');\n  }\n}\n","/**\n * @module utils\n */\n\nexport * from './platform';\n\nexport * from './applyMixins';\nexport * from './array';\nexport * from './defined';\nexport * from './deepmerge';\nexport * from './deprecated';\nexport * from './debounce';\nexport * from './debug';\nexport * from './events';\nexport * from './geom';\nexport * from './object';\nexport * from './flatten';\nexport * from './unflatten';\nexport * from './re';\nexport * from './sleep';\nexport * from './string';\nexport * from './number';\nexport * from './typeHelpers';\nexport * from './url';\nexport * from './Clipboard';\nexport * from './tileJson';\nexport * from './interfaces';\n/**\n * Given an array of member function names as strings, replace all of them\n * with bound versions that will always refer to `context` as `this`. This\n * is useful for classes where otherwise event bindings would reassign\n * `this` to the evented object or some other value: this lets you ensure\n * the `this` value always.\n * Taken from: https://github.com/mapbox/mapbox-gl-js/blob/v1.0.0/src/util/util.js#L243\n */\nexport function bindAll(\n  fns: string[],\n  context: { [method: string]: (...args: any[]) => any },\n): void {\n  fns.forEach((fn) => {\n    if (!context[fn]) {\n      return;\n    }\n    context[fn] = context[fn].bind(context);\n  });\n}\n\nexport function isObject(val: unknown): val is Record<string | number, any> {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\nexport function isArray(val: unknown): val is [] {\n  return Object.prototype.toString.call(val) === '[object Array]';\n}\n"],"names":["name","this","params","href","window","location","replace","m","key","value","decodeURIComponent","_params","search","urlComponent","encodeURIComponent","get","RegExp","length","data","state","url","_pushState","remove","paramsArr","sourceUrl","rtn","split","queryString","indexOf","i","splice","join","type","history","replaceState","document","title","applyMixins","derivedCtor","baseCtors","opt","derivedProperties","allProperties","prototype","undefined","forEach","baseCtor","Object","getOwnPropertyNames","isSomeProp","descriptor","getOwnPropertyDescriptor","defineProperty","obj","_props","getPrototypeOf","op","push","_allProperties","mixinProperties","properties","defined","val","deepmerge","target","src","mergeArray","target_","src_","array","Array","isArray","dst","concat","e","keys","deprecatedMapClick","ev","lngLat","latLng","lat","lng","deprecatedWarn","message","console","warn","debounce","cb","timeoutId","wait","wrapper","args","clear","setTimeout","apply","clearTimeout","getBoundsPolygon","b","coordinates","getBoundsCoordinates","westNorth","getBoundsFeature","geometry","d2r","Math","PI","r2d","getCirclePolygonCoordinates","radius","points","rlat","rlng","cos","extp","theta","ex","ey","sin","degrees2meters","x","y","log","tan","isLngLatBoundsArray","every","objectAssign","sources","source","prop","isEqual","a","o","p","sort","Date","Function","objectDeepEqual","keysO","keysP","objectRemoveEmpty","newObj","reEscape","s","fixUrlStr","Clipboard","text","copy","clipboard","navigator","writeText","clipboardData","setData","copyToClipboard","silent","input","createElement","body","appendChild","copyNodeContentsToClipboard","removeChild","select","setSelectionRange","execCommand","isObject","toString","call"],"sourceRoot":""}