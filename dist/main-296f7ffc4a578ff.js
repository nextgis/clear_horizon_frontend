(self.webpackChunkclear_horizon=self.webpackChunkclear_horizon||[]).push([[692],{8786:(t,e,s)=>{"use strict";s.d(e,{y9:()=>M,c5:()=>F}),s(6265),s(3383),s(7267);var i=s(9443),r=s(8133),o=s(8651),a=s(7187),n=s(1521),l=s(390),d=s(584),h=s(3614);function c(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:String(i))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class p{constructor(){c(this,"backspace",8),c(this,"tab",9),c(this,"enter",13),c(this,"shift",16),c(this,"ctrl",17),c(this,"alt",18),c(this,"pause/break",19),c(this,"caps_lock",20),c(this,"escape",27),c(this,"page_up",33),c(this,"page_down",34),c(this,"end",35),c(this,"home",36),c(this,"left_arrow",37),c(this,"up_arrow",38),c(this,"right_arrow",39),c(this,"down_arrow",40),c(this,"insert",45),c(this,"delete",46),c(this,"left_window_key",91),c(this,"right_window_key",92),c(this,"select_key",93),c(this,"numpad_0",96),c(this,"numpad_1",97),c(this,"numpad_2",98),c(this,"numpad_3",99),c(this,"numpad_4",100),c(this,"numpad_5",101),c(this,"numpad_6",102),c(this,"numpad_7",103),c(this,"numpad_8",104),c(this,"numpad_9",105),c(this,"multiply",106),c(this,"add",107),c(this,"subtract",109),c(this,"decimal_point",110),c(this,"divide",111),c(this,"f1",112),c(this,"f2",113),c(this,"f3",114),c(this,"f4",115),c(this,"f5",116),c(this,"f6",117),c(this,"f7",118),c(this,"f8",119),c(this,"f9",120),c(this,"f10",121),c(this,"f11",122),c(this,"f12",123),c(this,"num_lock",144),c(this,"scroll_lock",145),c(this,"semi-colon",186),c(this,"equal_sign",187),c(this,",",188),c(this,"-",189),c(this,".",190),c(this,"/",191),c(this,"`",192),c(this,"[",219),c(this,"\\",220),c(this,"]",221),c(this,"'",222)}}function u(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:String(i))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function y(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:String(i))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class m{constructor(t,e){this.webMap=t,y(this,"name",void 0),y(this,"event",void 0),y(this,"value",void 0),e&&(e.value&&this.setValue(e.value),e.name&&(this.name=e.name),e.event&&(this.event=e.event))}getValue(){return this.value}setValue(t){this.value=t}}function f(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:String(i))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class v extends m{constructor(){super(...arguments),f(this,"name","center"),f(this,"event","moveend")}getValue(){return this.webMap.getCenter()}setValue(t){this.webMap.setCenter(t)}toString(t){const e=t.map((t=>t.toFixed(5)));return e[0]+"_"+e[1]}parse(t){return t.split("_").map(Number)}}function g(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:String(i))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class L extends m{constructor(){super(...arguments),g(this,"name","zoom"),g(this,"event","zoomend")}getValue(){const t=this.webMap.getZoom();return void 0!==t?Math.round(t):void 0}setValue(t){this.webMap.setZoom(t)}toString(t){return String(t)}parse(t){return Number(t)}}function b(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:String(i))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}let j=0;const _={minZoom:0,maxZoom:22,paint:{color:"#0000ff",opacity:.4,strokeOpacity:1,stroke:!0,radius:8,weight:1},selectedPaint:{color:"#00008b",opacity:.4,strokeOpacity:1,stroke:!0,radius:12,weight:1},create:!0};class w{constructor(t){b(this,"options",_),b(this,"emitter",new a.EventEmitter),b(this,"keys",w.keys),b(this,"mapAdapter",void 0),b(this,"runtimeParams",[]),b(this,"getPaintFunctions",w.getPaintFunctions),b(this,"mapState",[v,L]),b(this,"id",j++),b(this,"_initMapState",{}),b(this,"_starterKits",void 0),b(this,"_mapState",[]),b(this,"_extent",void 0),b(this,"_eventsStatus",{}),b(this,"_coordFromMapClickPromise",void 0),b(this,"_mapEvents",{}),this.mapAdapter=t.mapAdapter,this._starterKits=t.starterKits||[],t&&(this.options=(0,l.v)(_||{},t)),this.options.runtimeParams&&(this.runtimeParams=this.options.runtimeParams),this._addEventsListeners(),this.options.tileJson&&this._setTileJsonOptions(this.options.tileJson),this.options.create&&this.create()}getId(){return this.id}async create(){return this.getEventStatus("create")||(await this._setInitMapState(this.mapState),await this._setupMap(),this._emitStatusEvent("create",this)),this}setRuntimeParams(t){this.runtimeParams.push(t)}destroy(){this._removeEventListeners(),function(t){for(const e in t)delete t[e]}(this._emitStatusEvent),this.mapAdapter.destroy&&this.mapAdapter.destroy()}getState(){const t={};return this._mapState.forEach((e=>{t[e.name]=e.getValue()})),t}getRuntimeParams(){const t={};return this._mapState.forEach((e=>{for(const s of this.runtimeParams){const i=s.get(e.name);if(void 0!==i){t[e.name]=e.parse(i);break}}})),t}getContainer(){if(this.mapAdapter.getContainer)return this.mapAdapter.getContainer();if(this.options.target){if(this.options.target instanceof HTMLElement)return this.options.target;if("string"==typeof this.options.target){const t=document.getElementById(this.options.target);if(t)return t}}}setCursor(t){this.mapAdapter.setCursor&&this.mapAdapter.setCursor(t)}getCursor(){if(this.mapAdapter.getCursor)return this.mapAdapter.getCursor();const t=this.getContainer();return t?t.style.cursor:void 0}setCenter(t){return this.mapAdapter.setCenter(t),this}getCenter(){return this.mapAdapter.getCenter()}getBounds(){if(this.mapAdapter.getBounds)return this.mapAdapter.getBounds()}getBoundsPolygon(){const t=this.getBounds();if(t)return(0,d.pv)(t)}setZoom(t){return this.mapAdapter.setZoom(t),this}getZoom(){const t=this.mapAdapter.getZoom();if("number"==typeof t)return t}zoomIn(){if(this.mapAdapter.zoomIn)this.mapAdapter.zoomIn();else{const t=this.getZoom();if(void 0!==t){const e=t+1;this.setZoom(e)}}}zoomOut(){if(this.mapAdapter.zoomOut)this.mapAdapter.zoomOut();else{const t=this.getZoom();if(void 0!==t){const e=t-1;this.setZoom(e)}}}setView(t,e){if(Array.isArray(t)){const s=t;this.mapAdapter.setView&&s&&(0,o.r)(e)?this.mapAdapter.setView(s,e):(s&&this.mapAdapter.setCenter(s),(0,o.r)(e)&&this.mapAdapter.setZoom(e))}else{const e=t;this.mapAdapter.setView&&this.mapAdapter.setView(e)}}fitBounds(t,e){return t.every((t=>(0,o.r)(t)))&&(t[1]<-85.06&&(t[1]=-85.06),t[3]>85.06&&(t[3]=85.06),this.mapAdapter.fitBounds(t,e)),this}getEventStatus(t){const e=t,s=this._eventsStatus[e];return null!=s&&s}onLoad(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"create";return new Promise((e=>{this.getEventStatus(t)?e(this):this.emitter.once(t,(()=>{e(this)}))}))}onMapLoad(t){return new Promise((e=>{var s;const i=()=>{const s=this.mapAdapter;t&&t(s),s&&e(s)},r=null===(s=this.mapAdapter.isLoaded)||void 0===s||s;this.mapAdapter.map&&r?i():this.mapAdapter.emitter.once("create",(()=>{i()}))}))}getLayerAdapters(){return this.mapAdapter.layerAdapters}getLayerAdapter(t){return this.mapAdapter.layerAdapters[t]}locate(t,e){return this.mapAdapter&&this.mapAdapter.locate?this.mapAdapter.locate(t,e):{stop:()=>({})}}stopGetCoordFromMapClick(){this._coordFromMapClickPromise&&this._coordFromMapClickPromise.cancel()}getCoordFromMapClick(){return this._coordFromMapClickPromise?this.getCoordFromMapClick():(this._coordFromMapClickPromise=new n.Z(((t,e,s)=>{const i=this.getCursor()||"grab";this._removeEventListeners({include:["click"]}),this.setCursor("crosshair");const r=()=>{this.setCursor(i),this._addEventsListeners({include:["click"]}),this.mapAdapter.emitter.off("click",o),this._coordFromMapClickPromise=void 0},o=e=>{r(),(0,h.V)(e),t(e.lngLat)};this.mapAdapter.emitter.once("click",o),s(r)})),this._coordFromMapClickPromise)}_emitStatusEvent(t,e){const s=t;this._eventsStatus[s]=!0,this.emitter.emit(s,e)}async _addLayerProviders(){}async _onLoadSync(){}async _setupMap(){if(!this.mapAdapter)throw new Error("WebMap `mapAdapter` option is not set");return await this.mapAdapter.create(this.options),this._zoomToInitialExtent(),await this._addLayerProviders(),await this._onLoadSync(),this._emitStatusEvent("build-map",this.mapAdapter),this}_setTileJsonOptions(t){t.center&&(this.options.center=t.center),t.bounds&&(this.options.bounds=t.bounds),(0,o.r)(t.maxzoom)&&(this.options.zoom=t.maxzoom),(0,o.r)(t.minzoom)&&(this.options.zoom=t.minzoom),(0,o.r)(t.maxzoom)&&(0,o.r)(t.minzoom)&&(this.options.zoom=(t.maxzoom+t.minzoom)/2)}_zoomToInitialExtent(){const{center:t,zoom:e,bounds:s}=this.options;this._extent?this.fitBounds(this._extent):t&&e?this.setView(t,e):s&&this.fitBounds(s)}_setInitMapState(t){for(const e of t){const t=new e(this);this._mapState.push(t);for(const e of this.runtimeParams){const s=e.get(t.name);if(void 0!==s){const e=t.parse(s);this._initMapState[t.name]=e,Object.defineProperty(this.options,t.name,{value:e,configurable:!0,enumerable:!0});break}}}}_addEventsListeners(t){let e=["preclick","click","zoomstart","zoom","zoomend","movestart","move","moveend","mousemove","mouseout","mouseover"];t&&t.include&&(e=e.filter((e=>t.include.includes(e)))),e.forEach((t=>{this._mapEvents[t]=e=>{if(this.runtimeParams.length){const e=this._mapState.find((e=>e.event===t));if(e){const t=e.toString(e.getValue());this.runtimeParams.forEach((s=>{s.set(e.name,t)}))}}this._eventsStatus&&this.emitter.emit(t,e)};const e=this._mapEvents[t];e&&this.mapAdapter.emitter.on(t,e)}))}_removeEventListeners(t){let e=Object.entries(this._mapEvents);t&&t.include&&(e=e.filter((e=>t.include.includes(e[0])))),e.forEach((t=>{let[e,s]=t;s&&this.mapAdapter.emitter.removeListener(e,s)}))}}function k(t){const e={};for(let s=0;s<t.length;s++)e[t[s]]=1+(e[t[s]]||0);let s;for(const t in e){const i=void 0!==s?e[s]:0;e[t]>(i||0)&&(s=t)}return s}b(w,"keys",new class{constructor(){u(this,"keyCodeAlias",new p),u(this,"keys",{}),u(this,"_windowOnFocus",void 0),u(this,"_keysPressed",void 0),u(this,"_keysReleased",void 0),this._windowOnFocus=this.windowOnFocus.bind(this),this._keysPressed=this.keysPressed.bind(this),this._keysReleased=this.keysReleased.bind(this),this.addKeyboardEventsListener()}pressed(t){const e=this.keyCodeAlias[t];return!!e&&this.keys[e]}addKeyboardEventsListener(){"undefined"!=typeof window&&(window.addEventListener("focus",this._windowOnFocus,!1),window.addEventListener("keydown",this._keysPressed,!1),window.addEventListener("keyup",this._keysReleased,!1))}removeKeyboardEventsListener(){"undefined"!=typeof window&&(window.removeEventListener("focus",this._windowOnFocus,!1),window.removeEventListener("keydown",this._keysPressed,!1),window.removeEventListener("keyup",this._keysReleased,!1))}keysPressed(t){t.stopPropagation(),this.keys[t.keyCode]||(this.keys[t.keyCode]=!0)}keysReleased(t){t.stopPropagation(),this.keys[t.keyCode]=!1}windowOnFocus(){this.keys={}}}),b(w,"getPaintFunctions",void 0);const C={polygon:"path",line:"path",point:"circle"},P={Point:"point",LineString:"line",MultiPoint:"point",Polygon:"polygon",MultiLineString:"line",MultiPolygon:"polygon"};function A(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:String(i))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class S extends w{constructor(t){super(t),A(this,"_layersIdCounter",1),A(this,"_layersOrderCounter",1),A(this,"_baselayers",[]),A(this,"_layers",{}),A(this,"_selectedLayers",[]);const e=this.options.tileJson;e&&this.emitter.once("build-map",(()=>this.addTileJsonLayer(e)))}async fitLayer(t,e){const s=this.getLayer(t),i=s&&(s.getBounds||s.getExtent);if(i){const t=await i.call(s);t&&this.fitBounds(t,e)}}isBaseLayer(t){const e=this.getLayer(t);if(e&&e.id)return-1!==this._baselayers.indexOf(e.id)}getBaseLayers(){const t=[];return this._baselayers.forEach((e=>{const s=this._layers[e];s&&t.push(s)})),t}getBaseLayersIds(){return this._baselayers}getLayer(t){return"string"==typeof t?this._layers[t]:t}getLayerId(t){const e=this.getLayer(t);if(e){if(e.id)return null==e?void 0:e.id;if(e&&e.options)return e.options.id}throw new Error("No id for layer")}getLayers(){return Object.keys(this._layers)}allLayers(){return this._layers}orderedLayers(){return Object.values(this._layers).sort(((t,e)=>t.order&&e.order?t.order-e.order:0))}findLayer(t){for(const e in this._layers){const s=this._layers[e];if(t(s))return s}}isLayerVisible(t){const e=this.getLayer(t);return!(!e||void 0===e.options.visibility)&&e.options.visibility}async addBaseLayer(t,e){return await this.addLayer(t,{...e,baselayer:!0},void 0)}async addLayer(t){var e;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const r=this._layersIdCounter++,a=(0,o.r)(i)?i:void 0!==s.order?s.order:this.reserveOrder();let n;"string"==typeof t?n=this.getLayerAdapter(t):"function"==typeof t?n=t:"then"in t&&(n=await t);const l=s;this._updateGeoJsonOptions(l),s={id:String(r),order:a,...s};const d=null===(e=s.visibility)||void 0===e||e;if(s.visibility=!1,s.baselayer&&(s.order=0),this.options.onBeforeAddLayer){const t=this.options.onBeforeAddLayer({options:s,adapter:n});t&&(t.options&&(s=t.options),t.adapter&&(n=t.adapter))}if(void 0!==n){var h;const t=new n(this.mapAdapter.map,s);let e;t.options={...s,...t.options},t.options.baselayer&&(s.baselayer=!0,s.order=0,t.options.order=0),t.options.id&&(e=String(t.options.id),this._layers[e]=t),this._emitLayerEvent("layer:preadd",e||"",t),await this.onMapLoad(),t.map=this.mapAdapter.map;const i=await t.addLayer(t.options);if(t.layer=i,t.id=t.options.id||String(r),t.options.id=t.id,s.baselayer&&(t.options.order=0),t.order=null!==(h=t.options.order)&&void 0!==h?h:a,e&&delete this._layers[e],e=String(t.id),this._layers[e])throw Error("layer with id '".concat(e,"' already exist"));e&&(this._layers[e]=t,l.filter&&this.filterLayer(t,l.filter),s.baselayer&&this._baselayers.push(e),d&&await this.showLayer(e));const o=s.opacity;void 0!==o&&o<=1&&this.setLayerOpacity(t,o);const c=i&&(t.getBounds||t.getExtent);if(s.fit&&c){const e=await c.call(t);e&&await this.fitBounds(e)}return s.onAdded&&s.onAdded(t),this._emitLayerEvent("layer:add",e,t),t}return Promise.reject("No adapter")}async addLayerFromAsyncAdapter(t,e,s){const i=s||void 0!==e.order?e.order:this.reserveOrder(),r=t(),o=await r;return o?this.addLayer(o,e,i):Promise.reject("No adapter")}removeLayers(t){for(const e in this._layers){let s=!0;t&&(s=t(e,this._layers[e])),s&&(this.removeLayer(e),delete this._layers[e])}}async getLegend(t){const e=[];for(const s of this.orderedLayers())s.getLegend&&e.push(s.getLegend(t));return(await Promise.all(e)).flat()}reserveOrder(){return this._layersOrderCounter++}removeOverlays(){this.removeLayers(((t,e)=>!(e&&e.options&&e.options.baselayer)))}removeLayer(t){const e=this.getLayer(t),s=e&&this.getLayerId(e);if(e&&s){if(this.emitter.emit("layer:preremove",e),e.beforeRemove&&e.beforeRemove(),e.removeLayer?e.removeLayer():this.mapAdapter.removeLayer(e.layer),e.options&&e.options.baselayer){const t=this._baselayers.indexOf(s);t&&this._baselayers.splice(t,1)}delete this._layers[s],this.emitter.emit("layer:remove",e)}}addGeoJsonLayer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return t=t||{},t.multiselect=void 0!==t.multiselect&&t.multiselect,t.unselectOnSecondClick=void 0===t.unselectOnSecondClick||t.unselectOnSecondClick,e||(t=function(t){if(t.data){const e=P[function(t){let e;return e="FeatureCollection"===t.type?k(t.features.map((t=>t.geometry.type))):"GeometryCollection"===t.type?k(t.geometries.map((t=>t.type))):"Feature"===t.type?t.geometry.type:t.type,e}(t.data)],s=t.paint;s&&(0,i.GY)(s)&&(s.type=s.type?s.type:"polygon"===e||"line"===e?"path":"html"in s||"className"in s?"icon":C[e]),t.type=t.type||e}return t}(t)),t.paint=t.paint||{},this.addLayer(e||"GEOJSON",t)}addFeatureLayer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.addGeoJsonLayer(t)}addTileLayer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.addLayer("TILE",{...e,url:t})}addImageLayer(t,e){let s;return"string"==typeof t?s=t:(s=t.url,e=t),this.addLayer("IMAGE",{...e,url:s})}showLayer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.toggleLayer(t,!0,e)}hideLayer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.toggleLayer(t,!1,e)}toggleLayer(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getLayer(t),r=i&&i.options.visibility,o=void 0!==e?e:!r,a=void 0!==s.silent&&s.silent,n=async t=>{const e=String(t.id),s=o?"layer:preshow":"layer:prehide",i=o?"layer:show":"layer:hide";if(a||(this._emitLayerEvent(s,e,t),this._emitLayerEvent("layer:pretoggle",e,t)),o&&this.mapAdapter){const e=t.options.baselayer?0:t.options.order;if(t.options.baselayer&&this._baselayers.length){const e=this._baselayers.filter((e=>e!==t.id&&this.isLayerVisible(e)));for(const t of e)await this.hideLayer(t)}t.showLayer?await t.showLayer.call(t,t.layer):void 0!==t.layer&&await this.mapAdapter.showLayer(t.layer),void 0!==e&&this.mapAdapter.setLayerOrder(t.layer,e,this._layers)}else t.hideLayer?await t.hideLayer.call(t,t.layer):void 0!==t.layer&&await this.mapAdapter.hideLayer(t.layer);t.options.visibility=o,a||(this._emitLayerEvent(i,e,t),this._emitLayerEvent("layer:toggle",e,t))};return i?this.onMapLoad().then((()=>n(i))):Promise.resolve()}updateLayer(t){const e=this.getLayer(t);if(e){if(e.updateLayer)return Promise.resolve(e.updateLayer());if(this.isLayerVisible(e))return this.hideLayer(e,{silent:!0}).then((()=>this.showLayer(e,{silent:!0})))}return Promise.resolve()}setLayerOpacity(t,e){const s=this.getLayer(t);s&&(s.setOpacity?s.setOpacity(e):this.mapAdapter.setLayerOpacity&&this.mapAdapter.setLayerOpacity(s.layer,e))}isLayerLabelVisible(t){var e;const s=this.getLayer(t);return s.isLabelVisible?s.isLabelVisible():null===(e=s.options.labelVisibility)||void 0===e||e}showLayerLabel(t){this.toggleLayerLabel(t,!0)}hideLayerLabel(t){this.toggleLayerLabel(t,!1)}toggleLayerLabel(t,e){var s;const i=this.getLayer(t);return e=null!==(s=e)&&void 0!==s?s:!this.isLayerLabelVisible(t),i&&(e?i.showLabel&&(i.options.labelVisibility=!0,i.showLabel()):i.hideLabel&&(i.options.labelVisibility=!1,i.hideLabel()),i.id&&this._emitLayerEvent("layer:label:toggle",i.id,i)),e}selectLayer(t,e){const s=this.getLayer(t);if(s){const t=s;t&&t.select&&t.select(e);const i=this.getLayerId(s);i&&this._selectedLayers.push(i)}}unSelectLayer(t,e){const s=this.getLayer(t);if(s){const t=s&&s;t.unselect&&t.unselect(e);const i=this.getLayerId(s);if(i){const t=this._selectedLayers.indexOf(i);-1!==t&&this._selectedLayers.splice(t,1)}}}unSelectLayers(){const t=Object.values(this.allLayers());let e;for(e of t)e.unselect&&e.unselect()}filterLayer(t,e){const s=this.getLayer(t);return s.filter?s.filter(e):[]}propertiesFilter(t,e,s){const i=this.getLayer(t);if(i){const t=i;if(t.propertiesFilter)return t.propertiesFilter(e,s);t.filter&&this.filterLayer(t,(t=>!t.feature||!t.feature.properties||(0,r.Ml)(t.feature.properties,e)))}return Promise.resolve()}removeLayerFilter(t){const e=this.getLayer(t);e.removeFilter?e.removeFilter():e.filter&&e.filter((()=>!0))}setLayerData(t,e){const s=this.getLayer(t);if(s){if(s.setData)return s.setData(e);if(s.clearLayer&&s.addData)return s.clearLayer(),s.addData(e)}return Promise.resolve()}addLayerData(t,e){const s=this.getLayer(t);s.addData&&s.addData(e)}clearLayerData(t,e){const s=this.getLayer(t);s&&s.clearLayer&&s.clearLayer(e)}setLayerPaint(t,e){const s=this.getLayer(t);e&&s&&s.setPaint&&s.setPaint(e)}setLayerSelectedPaint(t,e){const s=this.getLayer(t);e&&s&&s.setSelectedPaint&&s.setSelectedPaint(e)}updateLayerPaint(t,e){const s=this.getLayer(t);e&&s&&s.updatePaint&&s.updatePaint(e)}updateLayerSelectedPaint(t,e){const s=this.getLayer(t);e&&s&&s.updateSelectedPaint&&s.updateSelectedPaint(e)}getAttributions(t){const e=[];for(const s in this._layers){const i=this._layers[s];let r=!(void 0===t.onlyVisible||t.onlyVisible)||i.options.visibility;if(r&&t.onlyBaselayer&&(r=this._baselayers.includes(s)),r){const t=i.options&&i.options.attribution;t&&e.push(t)}}return e}getActiveBaseLayer(){const t=this.getBaseLayers().find((t=>this.isLayerVisible(t)));if(t)return this.getLayer(t)}addTileJsonLayer(t){const e=t.tiles[0];return this.addLayer("TILE",{url:e,maxZoom:t.maxzoom,minZoom:t.minzoom,subdomains:t.scheme,attribution:t.attribution})}_emitLayerEvent(t,e,s){const i=String(t);if((0,o.r)(e)&&i.startsWith("layer:")){const t=i.replace("layer:","layer-"+e+":");this.emitter.emit(t,s)}this.emitter.emit(t,s)}async _onLayerClick(t){const e=t.layer.id;return this._emitLayerEvent("layer:click",e||"",t),Promise.resolve(t)}async _onLayerSelect(t){return this._emitLayerEvent("layer:select",t.layer.id||"",t),Promise.resolve(t)}_updateGeoJsonOptions(t){const{onSelect:e,onLayerSelect:s,onClick:r,onLayerClick:a,onMouseOut:n,onMouseOver:l}=t,d=r||a;t.onClick=t=>(d&&d(t),this._onLayerClick(t)),t.onMouseOut=t=>{const e=t.layer.id;n&&n(t),(0,o.r)(e)&&this._emitLayerEvent("layer:mouseout",e,t)},t.onMouseOver=t=>{const e=t.layer.id;l&&l(t),(0,o.r)(e)&&this._emitLayerEvent("layer:mouseover",e,t)};const h=e||s;t.onSelect=t=>(h&&h(t),this._onLayerSelect(t)),t.nativePaint||(this.options.paint&&(t.paint=(0,i.Yx)({paint:t.paint||{},defaultPaint:this.options.paint,getPaintFunctions:this.getPaintFunctions})),t.selectedPaint&&this.options.selectedPaint&&(t.selectedPaint=(0,i.Yx)({paint:t.selectedPaint,defaultPaint:this.options.selectedPaint,getPaintFunctions:this.getPaintFunctions})))}}function E(t,e,s){var i;return(e="symbol"==typeof(i=function(t,e){if("object"!=typeof t||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var i=s.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(e))?i:String(i))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class O extends S{constructor(){super(...arguments),E(this,"_loadControlQueue",{"top-right":[],"bottom-right":[],"top-left":[],"bottom-left":[]}),E(this,"_isControlLoading",{"top-right":!1,"bottom-right":!1,"top-left":!1,"bottom-left":!1})}async addControl(t,e,s){var i;let r;if(e=null!==(i=e)&&void 0!==i?i:"top-left",r="string"==typeof t?this.getControl(t,s):t,r)return new Promise((t=>{this._setControlQueue(e,(async()=>{const s=await r,i=this.mapAdapter.addControl(s,e);t(i)}))}))}async createControl(t,e){if(await this.onLoad("build-map"),this.mapAdapter.createControl)return this.mapAdapter.createControl(t,e)}async createButtonControl(t){if(await this.onLoad("build-map"),this.mapAdapter.createButtonControl)return this.mapAdapter.createButtonControl(t)}async createToggleControl(t){return await this.onLoad("build-map"),this.mapAdapter.createToggleControl?this.mapAdapter.createToggleControl(t):this.mapAdapter.createButtonControl?function(t,e){const s=document.createElement("div");let i=!1;e.getStatus?i=e.getStatus():e.status&&(i=e.status);const r=e.title||"",o=e.html;function a(){r&&(s.title="string"==typeof r?r:i?r.on:r.off,s.setAttribute("aria-label",s.title))}function n(t){t instanceof HTMLElement?(s.innerHTML="",s.appendChild(t)):"string"==typeof t&&(s.innerHTML=t)}function l(){o&&("string"==typeof o||o instanceof HTMLElement?n(o):n(i?o.on:o.off),s.setAttribute("aria-label",s.title))}function d(t,e){t.split(" ").forEach((t=>{e?s.classList.add(t):s.classList.remove(t)}))}function h(){e.addClassOn&&d(e.addClassOn,i),e.addClassOff&&d(e.addClassOff,!i)}a(),l(),e.addClass&&d(e.addClass,!0),h();const c=t=>{void 0!==t&&(i=t),l(),a(),h()},p=t=>{if(i=void 0!==t?t:!i,e.onClick){const t=e.onClick(i);Promise.resolve(t).then((()=>c())).catch((()=>i=!i))}else c()},u=t({html:s,onClick:p});return u.onClick=p,u.changeStatus=c,u}(this.mapAdapter.createButtonControl,t):void 0}removeControl(t){"remove"in t?t.remove():this.mapAdapter.removeControl&&Promise.resolve(t).then((t=>{this.mapAdapter.removeControl(t)}))}getControl(t,e){const s=this.mapAdapter.controlAdapters[t];if(s)return new s(e);{const s=O.controls[t];if(s)return s(this,e)}}getControlContainer(){if(this.mapAdapter.getControlContainer)return this.mapAdapter.getControlContainer()}_setControlQueue(t,e){this._loadControlQueue[t].push(e),this._isControlLoading[t]||this._applyControls(t)}async _applyControls(t){if(this._loadControlQueue[t].length){this._isControlLoading[t]=!0;const e=this._loadControlQueue[t][0];await e(),this._loadControlQueue[t].splice(0,1),this._applyControls(t)}else this._isControlLoading[t]=!1}}E(O,"controls",{CONTROL:(t,e)=>t.createControl(e.control,e.options),BUTTON:(t,e)=>t.createButtonControl(e),TOGGLE:(t,e)=>t.createToggleControl(e)});const z={};class M extends O{constructor(t){var e;super(t),this._addControls(),e=this.id,z[e]=this}static get(t){return function(t){return z[t]}(t)}async _addLayerProviders(){for await(const t of this._starterKits)if(t.getLayerAdapters){const e=await t.getLayerAdapters.call(t);if(e)for await(const t of e){const e=await t.createAdapter(this);e&&(this.mapAdapter.layerAdapters[t.name]=e)}}}async _onLoadSync(){for await(const t of this._starterKits)if(t.onLoadSync)try{await t.onLoadSync.call(t,this)}catch(t){console.error(t)}}_addControls(){this.options.controls&&this.options.controls.forEach((t=>{let e=t,s={};"string"==typeof t&&this.options.controlsOptions&&this.options.controlsOptions[t]&&(s=this.options.controlsOptions[t],void 0!==s.control&&(e=s.control));const{position:i,...r}=s;this.addControl(e,i||"top-left",r)})),this._emitStatusEvent("controls:create")}}function F(){return["ZOOM","ATTRIBUTION"]}},6700:(t,e,s)=>{var i={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-ps":315,"./ar-ps.js":315,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":7766,"./km.js":7766,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku-kmr":563,"./ku-kmr.js":563,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":9822,"./vi.js":9822,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9913,"./zh-mo.js":9913,"./zh-tw":4152,"./zh-tw.js":4152};function r(t){var e=o(t);return s(e)}function o(t){if(!s.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id=6700}}]);
//# sourceMappingURL=main-296f7ffc4a578ff.js.map